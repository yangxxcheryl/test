                        .module cardStoreProcess.c
                        .area data(ram, con, rel)
 0000           _WaitPhotoFlag:
 0000                   .blkb 1
                        .area idata
 0000 00                .byte 0
                        .area data(ram, con, rel)
 0001           _ReScanfFlag:
 0001                   .blkb 1
                        .area idata
 0001 00                .byte 0
                        .area data(ram, con, rel)
 0002           _CardScanfPos:
 0002                   .blkb 2
                        .area idata
 0002 0000              .word 0
                        .area data(ram, con, rel)
 0004           _CardStoreOpenLook::
 0004                   .blkb 1
                        .area idata
 0004 00                .byte 0
                        .area data(ram, con, rel)
 0005           _preCardStoreNum::
 0005                   .blkb 1
                        .area idata
 0005 01                .byte 1
                        .area data(ram, con, rel)
 0006           _stopFlag:
 0006                   .blkb 1
                        .area idata
 0006 00                .byte 0
                        .area data(ram, con, rel)
                        .area text(rom, con, rel)
                ;              m -> R20
                        .even
 0000           _SetGetCardTestMode::
 0000 4A93              st -y,R20
 0002 402F              mov R20,R16
 0004           ; #include <iom1280v.h>
 0004           ; #include "B1404_LIB.h"
 0004           ; #include "Common.h"
 0004           ; #include "eeprom.h"
 0004           ; //*************************************************
 0004           ; extern unsigned char CardNoneUseful;  // 老化测试,不需要检测有无试剂片
 0004           ; unsigned char CardStoreTestFlag;              // 片仓取片测试
 0004           ; extern unsigned int _DropMode;                        // 滴样模式,控制是否需要抽打混匀
 0004           ; extern unsigned char _MixtureMode;            // 1:1模式下,是否需要抽打混匀
 0004           ; extern unsigned char InsertRingFlag;
 0004           ; extern unsigned char insertflag[30];  // 插入转盘标志
 0004           ; extern unsigned char workSwitch;                      // 停止工作开关
 0004           ; extern RING_QUEUE     RingQueue;
 0004           ; static unsigned char WaitPhotoFlag = 0;
 0004           ; static unsigned char ReScanfFlag = 0;
 0004           ; static unsigned int  CardScanfPos = 0;
 0004           ; extern unsigned long SecondCount;
 0004           ; extern TEST_QUEUE TestQueueA;
 0004           ; extern TEST_QUEUE TestQueueB;
 0004           ; //*************************************************
 0004           ; extern unsigned char GetNewTestCard;
 0004           ; extern unsigned char CurInsertRingNum;
 0004           ; extern unsigned char TurnPlateUsedLock;
 0004           ; extern unsigned char WorkProcessStep;
 0004           ; unsigned char CardStoreOpenLook = 0;
 0004           ; extern unsigned int _AutoTestCycleNum;
 0004           ; 
 0004           ; //
 0004           ; unsigned char preCardStoreNum = 1;            // 用于取片测试下,片仓的切换
 0004           ; static unsigned char stopFlag = 0;            //整机暂停导致取片测试清零标识
 0004           ; static unsigned char preGetCardNum[5];        // 用于取片测试下,计算每个片仓取片数量
 0004           ; extern unsigned char WithoutPuncture; // 默认为0 穿刺   1  不穿刺测橙黄G   2 不穿刺测老化
 0004           ; unsigned char LastCardGetState;                       // 上一次取片测试是否完成
 0004           ; 
 0004           ; void SetGetCardTestMode(unsigned char m)
 0004           ; {
 0004           ;       if(m > 1)
 0004 81E0              ldi R24,1
 0006 8417              cp R24,R20
 0008 08F4              brsh L2
 000A           X0:
 000A           ; 		m = 1;
 000A 41E0              ldi R20,1
 000C           L2:
 000C           ; 	CardStoreTestFlag = m;
 000C 40933500          sts _CardStoreTestFlag,R20
 0010           ;       if(1 == CardStoreTestFlag)
 0010 4130              cpi R20,1
 0012 11F5              brne L4
 0014           X1:
 0014           ; 	{
 0014           ; 		CardNoneUseful = 0;		// 输入此命令,自动关闭老化测试
 0014 2224              clr R2
 0016 20920000          sts _CardNoneUseful,R2
 001A           ;               _AutoTestCycleNum = 124;        // 124
 001A 8CE7              ldi R24,124
 001C 90E0              ldi R25,0
 001E 90930100          sts __AutoTestCycleNum+1,R25
 0022 80930000          sts __AutoTestCycleNum,R24
 0026           ;               LastCardGetState = 1;   
 0026 81E0              ldi R24,1
 0028 80932F00          sts _LastCardGetState,R24
 002C           ;               preCardStoreNum = 1;    // 默认从1号片仓开始
 002C 80930500          sts _preCardStoreNum,R24
 0030           ;               SetDiluentRatio(1);             // 设置稀释比例为1:1
 0030 01E0              ldi R16,1
 0032 0E940000          xcall _SetDiluentRatio
 0036           ; #ifdef Puncture
 0036           ;               WithoutPuncture = 2;    // 不穿刺               
 0036           ; #endif
 0036           ;               Uart0ReUnable;
 0036 8091C100          lds R24,193
 003A 8F7E              andi R24,239
 003C 8093C100          sts 193,R24
 0040           ;               uart_Printf("%s $ 1\r\n",strM3125);
 0040 20E0              ldi R18,<_strM3125
 0042 30E0              ldi R19,>_strM3125
 0044 00E0              ldi R16,<L6
 0046 10E0              ldi R17,>L6
 0048 0E940000          xcall _uart_Printf
 004C           ;               Uart0ReEnable;
 004C 8091C100          lds R24,193
 0050 8061              ori R24,16
 0052 8093C100          sts 193,R24
 0056           ;       }
 0056 16C0              xjmp L5
 0058           L4:
 0058           ; 	else
 0058           ; 	{
 0058           ; 		_AutoTestCycleNum = 0;
 0058 2224              clr R2
 005A 3324              clr R3
 005C 30920100          sts __AutoTestCycleNum+1,R3
 0060 20920000          sts __AutoTestCycleNum,R2
 0064           ;               Uart0ReUnable;
 0064 8091C100          lds R24,193
 0068 8F7E              andi R24,239
 006A 8093C100          sts 193,R24
 006E           ;               uart_Printf("%s $ 0\r\n",strM3129);
 006E 20E0              ldi R18,<_strM3129
 0070 30E0              ldi R19,>_strM3129
 0072 00E0              ldi R16,<L7
 0074 10E0              ldi R17,>L7
 0076 0E940000          xcall _uart_Printf
 007A           ;               Uart0ReEnable;
 007A 8091C100          lds R24,193
 007E 8061              ori R24,16
 0080 8093C100          sts 193,R24
 0084           ;       }
 0084           L5:
 0084           L1:
 0084                   .dbline 0 ; func end
 0084 4991              ld R20,y+
 0086 0895              ret
 0088           ;              i -> R16
                        .even
 0088           _ReStartCardGetTest:
 0088           ; }
 0088           ; 
 0088           ; static void ReStartCardGetTest(void)
 0088           ; {
 0088           ; 	unsigned char i;
 0088           ; 	for(i = 0;i < 5;i++)
 0088 0027              clr R16
 008A 09C0              xjmp L12
 008C           L9:
 008C           ; 		preGetCardNum[i] = 0;
 008C 80E0              ldi R24,<_preGetCardNum
 008E 90E0              ldi R25,>_preGetCardNum
 0090 E02F              mov R30,R16
 0092 FF27              clr R31
 0094 E80F              add R30,R24
 0096 F91F              adc R31,R25
 0098 2224              clr R2
 009A 2082              std z+0,R2
 009C           L10:
 009C 0395              inc R16
 009E           L12:
 009E 0530              cpi R16,5
 00A0 A8F3              brlo L9
 00A2           X2:
 00A2           ; 	preCardStoreNum = 1;
 00A2 81E0              ldi R24,1
 00A4 80930500          sts _preCardStoreNum,R24
 00A8           ;       LastCardGetState = 1;
 00A8 80932F00          sts _LastCardGetState,R24
 00AC           ;       _AutoTestCycleNum = 124;        // 124
 00AC 8CE7              ldi R24,124
 00AE 90E0              ldi R25,0
 00B0 90930100          sts __AutoTestCycleNum+1,R25
 00B4 80930000          sts __AutoTestCycleNum,R24
 00B8           L8:
 00B8                   .dbline 0 ; func end
 00B8 0895              ret
                        .even
 00BA           _clearstopFlag::
 00BA           ; }
 00BA           ; 
 00BA           ; void clearstopFlag(void)
 00BA           ; {
 00BA           ; 	if(stopFlag == 1)
 00BA 80910600          lds R24,_stopFlag
 00BE 8130              cpi R24,1
 00C0 19F4              brne L14
 00C2           X3:
 00C2           ; 		stopFlag = 0;
 00C2 2224              clr R2
 00C4 20920600          sts _stopFlag,R2
 00C8           L14:
 00C8           L13:
 00C8                   .dbline 0 ; func end
 00C8 0895              ret
                        .area bss(ram, con, rel)
 0000           L17:
 0000                   .blkb 1
                        .area text(rom, con, rel)
                        .even
 00CA           _CardGetTestDone:
 00CA 2297              sbiw R28,2
 00CC           ; }
 00CC           ; 
 00CC           ; static void CardGetTestDone(void)
 00CC           ; {
 00CC           ;       static unsigned char num;
 00CC           ;       if(1 == stopFlag)       return;
 00CC 80910600          lds R24,_stopFlag
 00D0 8130              cpi R24,1
 00D2 09F4              brne L18
 00D4           X4:
 00D4 6CC0              xjmp L16
 00D6           L18:
 00D6           ; 	stopFlag = 0;
 00D6 2224              clr R2
 00D8 20920600          sts _stopFlag,R2
 00DC           ;       LastCardGetState = 1;
 00DC 81E0              ldi R24,1
 00DE 80932F00          sts _LastCardGetState,R24
 00E2           ;       if(preCardStoreNum >= 1)
 00E2 80910500          lds R24,_preCardStoreNum
 00E6 8130              cpi R24,1
 00E8 08F1              brlo L20
 00EA           X5:
 00EA           ; 	{
 00EA           ; 		preGetCardNum[preCardStoreNum - 1]++;
 00EA 80E0              ldi R24,<_preGetCardNum-1
 00EC 90E0              ldi R25,>_preGetCardNum-1
 00EE 20900500          lds R2,_preCardStoreNum
 00F2 3324              clr R3
 00F4 280E              add R2,R24
 00F6 391E              adc R3,R25
 00F8 F101              movw R30,R2
 00FA 8081              ldd R24,z+0
 00FC 8F5F              subi R24,255    ; addi 1
 00FE 8083              std z+0,R24
 0100           ;               if(preGetCardNum[preCardStoreNum - 1] >= 25)  // 25
 0100 80E0              ldi R24,<_preGetCardNum-1
 0102 90E0              ldi R25,>_preGetCardNum-1
 0104 E0910500          lds R30,_preCardStoreNum
 0108 FF27              clr R31
 010A E80F              add R30,R24
 010C F91F              adc R31,R25
 010E 8081              ldd R24,z+0
 0110 8931              cpi R24,25
 0112 60F0              brlo L23
 0114           X6:
 0114           ; 		{
 0114           ; 			preCardStoreNum++;
 0114 80910500          lds R24,_preCardStoreNum
 0118 8F5F              subi R24,255    ; addi 1
 011A 80930500          sts _preCardStoreNum,R24
 011E           ;                       if(preCardStoreNum > 5)
 011E 85E0              ldi R24,5
 0120 20900500          lds R2,_preCardStoreNum
 0124 8215              cp R24,R2
 0126 10F4              brsh L26
 0128           X7:
 0128           ; 				preCardStoreNum = 5;
 0128 80930500          sts _preCardStoreNum,R24
 012C           L26:
 012C           ; 		}
 012C           L23:
 012C           ; 	}
 012C           L20:
 012C           ; 	num = preGetCardNum[0] +  preGetCardNum[1] + preGetCardNum[2] + preGetCardNum[3] +  preGetCardNum[4];
 012C 20903100          lds R2,_preGetCardNum+1
 0130 30903000          lds R3,_preGetCardNum
 0134 320C              add R3,R2
 0136 20903200          lds R2,_preGetCardNum+2
 013A 320C              add R3,R2
 013C 20903300          lds R2,_preGetCardNum+3
 0140 320C              add R3,R2
 0142 20903400          lds R2,_preGetCardNum+4
 0146 320C              add R3,R2
 0148 30920000          sts L17,R3
 014C           ;       Uart0ReUnable;
 014C 8091C100          lds R24,193
 0150 8F7E              andi R24,239
 0152 8093C100          sts 193,R24
 0156           ;       uart_Printf("%s $%4d\r\n",strM3128,num);
 0156 232C              mov R2,R3
 0158 3324              clr R3
 015A 3982              std y+1,R3
 015C 2882              std y+0,R2
 015E 20E0              ldi R18,<_strM3128
 0160 30E0              ldi R19,>_strM3128
 0162 00E0              ldi R16,<L32
 0164 10E0              ldi R17,>L32
 0166 0E940000          xcall _uart_Printf
 016A           ;       Uart0ReEnable;
 016A 8091C100          lds R24,193
 016E 8061              ori R24,16
 0170 8093C100          sts 193,R24
 0174           ;       if(num >= 125)   // 125
 0174 80910000          lds R24,L17
 0178 8D37              cpi R24,125
 017A C8F0              brlo L33
 017C           X8:
 017C           ; 	{
 017C           ; 		ReStartCardGetTest();
 017C 85DF              xcall _ReStartCardGetTest
 017E           ;               CardStoreTestFlag = 0;   // 退出取片测试模式
 017E 2224              clr R2
 0180 20923500          sts _CardStoreTestFlag,R2
 0184           ;               LastCardGetState = 0;    // 上一次取片动作完成
 0184 20922F00          sts _LastCardGetState,R2
 0188           ;               SetDiluentRatio(9);
 0188 09E0              ldi R16,9
 018A 0E940000          xcall _SetDiluentRatio
 018E           ; #ifdef Puncture
 018E           ;               WithoutPuncture = 0;    // 恢复穿刺             
 018E           ; #endif
 018E           ;               Uart0ReUnable;
 018E 8091C100          lds R24,193
 0192 8F7E              andi R24,239
 0194 8093C100          sts 193,R24
 0198           ;               uart_Printf("%s\r\n", strM3127);
 0198 20E0              ldi R18,<_strM3127
 019A 30E0              ldi R19,>_strM3127
 019C 00E0              ldi R16,<L35
 019E 10E0              ldi R17,>L35
 01A0 0E940000          xcall _uart_Printf
 01A4           ;               Uart0ReEnable;
 01A4 8091C100          lds R24,193
 01A8 8061              ori R24,16
 01AA 8093C100          sts 193,R24
 01AE           ;       }
 01AE           L33:
 01AE           L16:
 01AE                   .dbline 0 ; func end
 01AE 2296              adiw R28,2
 01B0 0895              ret
 01B2           ;              i -> R20,R21
 01B2           ;            num -> R16
                        .even
 01B2           _CalCardStorePos::
 01B2 4A93              st -y,R20
 01B4 5A93              st -y,R21
 01B6           ; }
 01B6           ; 
 01B6           ; unsigned int CalCardStorePos(unsigned char num)
 01B6           ; {
 01B6           ;       unsigned int i;
 01B6           ;       switch(num)
 01B6 402F              mov R20,R16
 01B8 5527              clr R21
 01BA 4130              cpi R20,1
 01BC E0E0              ldi R30,0
 01BE 5E07              cpc R21,R30
 01C0 89F0              breq L40
 01C2           X9:
 01C2 4230              cpi R20,2
 01C4 E0E0              ldi R30,0
 01C6 5E07              cpc R21,R30
 01C8 81F0              breq L41
 01CA           X10:
 01CA 4330              cpi R20,3
 01CC E0E0              ldi R30,0
 01CE 5E07              cpc R21,R30
 01D0 79F0              breq L42
 01D2           X11:
 01D2 4430              cpi R20,4
 01D4 E0E0              ldi R30,0
 01D6 5E07              cpc R21,R30
 01D8 71F0              breq L43
 01DA           X12:
 01DA 4530              cpi R20,5
 01DC E0E0              ldi R30,0
 01DE 5E07              cpc R21,R30
 01E0 69F0              breq L44
 01E2           X13:
 01E2 0FC0              xjmp L37
 01E4           L40:
 01E4           ; 	{
 01E4           ; 		case 1:		i = 975-25;	break;			// 79mm / 0.081 = 975;
 01E4 46EB              ldi R20,950
 01E6 53E0              ldi R21,3
 01E8 0EC0              xjmp L38
 01EA           L41:
 01EA           ; 		case 2:		i = 1383-25;	break;		// (79+33)mm / 0.081 = 1383
 01EA 4EE4              ldi R20,1358
 01EC 55E0              ldi R21,5
 01EE 0BC0              xjmp L38
 01F0           L42:
 01F0           ; 		case 3:		i = 1790-25;	break;		// (79+66)mm / 0.081 = 1790
 01F0 45EE              ldi R20,1765
 01F2 56E0              ldi R21,6
 01F4 08C0              xjmp L38
 01F6           L43:
 01F6           ; 		case 4:		i = 2198-25;	break;		// (79+99)mm / 0.081 = 2198
 01F6 4DE7              ldi R20,2173
 01F8 58E0              ldi R21,8
 01FA 05C0              xjmp L38
 01FC           L44:
 01FC           ; 		case 5:		i = 2605-45;	break;		// (79+132)mm / 0.081 = 2605
 01FC 40E0              ldi R20,2560
 01FE 5AE0              ldi R21,10
 0200 02C0              xjmp L38
 0202           L37:
 0202           ; 		default:	i = 975-25;	break;
 0202 46EB              ldi R20,950
 0204 53E0              ldi R21,3
 0206           L38:
 0206           ; 	}
 0206           ; 	return i;
 0206 8A01              movw R16,R20
 0208           L36:
 0208                   .dbline 0 ; func end
 0208 5991              ld R21,y+
 020A 4991              ld R20,y+
 020C 0895              ret
                        .area data(ram, con, rel)
 0007           _CardTrolleySta::
 0007                   .blkb 1
                        .area idata
 0007 FF                .byte 255
                        .area data(ram, con, rel)
 0008           _CardTrolleySet::
 0008                   .blkb 1
                        .area idata
 0008 00                .byte 0
                        .area data(ram, con, rel)
                        .area text(rom, con, rel)
                ;          state -> R16
                        .even
 020E           _SetCardTrolleyState::
 020E 4A93              st -y,R20
 0210 5A93              st -y,R21
 0212           ; }
 0212           ; 
 0212           ; unsigned char CardTrolleySta = 255;           // 小车初始状态 0:小车平置, 1:小车翻起, 255:状态未稳定
 0212           ; unsigned char CardTrolleySet=0;//小车的执行状态
 0212           ; void SetCardTrolleyState(unsigned char state)
 0212           ; {
 0212           ;       // state==0 关闭; state==1 翻起; state==2 吸平
 0212           ;       CardTrolleySet = state;//
 0212 00930800          sts _CardTrolleySet,R16
 0216           ;       switch(state)
 0216 402F              mov R20,R16
 0218 5527              clr R21
 021A 4030              cpi R20,0
 021C 4507              cpc R20,R21
 021E 49F0              breq L49
 0220           X14:
 0220 4130              cpi R20,1
 0222 E0E0              ldi R30,0
 0224 5E07              cpc R21,R30
 0226 49F0              breq L50
 0228           X15:
 0228 4230              cpi R20,2
 022A E0E0              ldi R30,0
 022C 5E07              cpc R21,R30
 022E 51F0              breq L51
 0230           X16:
 0230 0DC0              xjmp L46
 0232           L49:
 0232           ; 	{
 0232           ; 		case 0:		// 关闭
 0232           ; 			PORTF &= 0xfc;		// Forward OFF 01111100
 0232 81B3              in R24,0x11
 0234 8C7F              andi R24,252
 0236 81BB              out 0x11,R24
 0238           ;                       break;
 0238 09C0              xjmp L47
 023A           L50:
 023A           ; 		case 1:		// 翻起
 023A           ; 			PORTF &= 0xfc;
 023A 81B3              in R24,0x11
 023C 8C7F              andi R24,252
 023E 81BB              out 0x11,R24
 0240           ;                       PORTF |= 0x01;
 0240 889A              sbi 0x11,0
 0242           ;                       break;
 0242 04C0              xjmp L47
 0244           L51:
 0244           ; 		case 2:		// 吸平
 0244           ; 			PORTF &= 0xfc;
 0244 81B3              in R24,0x11
 0246 8C7F              andi R24,252
 0248 81BB              out 0x11,R24
 024A           ;                       PORTF |= 0x02;
 024A 899A              sbi 0x11,1
 024C           ;                       break;
 024C           L46:
 024C           L47:
 024C           ; 	}
 024C           ; 	if(CardTrolleySet == 0)
 024C 20900800          lds R2,_CardTrolleySet
 0250 2220              tst R2
 0252 21F4              brne L52
 0254           X17:
 0254           ; 	{
 0254           ; 	//	PORTF &= 0xfe;		// Forward OFF 01111111
 0254           ; 	//	PORTF |= 0x02;		// Reverse ON  00000010
 0254           ; 		PORTF &= 0xfc;		// Forward OFF 01111100
 0254 81B3              in R24,0x11
 0256 8C7F              andi R24,252
 0258 81BB              out 0x11,R24
 025A           ;       }
 025A 01C0              xjmp L53
 025C           L52:
 025C           ; 	else 
 025C           ; 	{
 025C           ; 		PORTF |= 0x01;		// Forward ON 11111100
 025C 889A              sbi 0x11,0
 025E           ;       //      PORTF &= 0xfd;          // Reverse OFF 11111101
 025E           ;       }
 025E           L53:
 025E           L45:
 025E                   .dbline 0 ; func end
 025E 5991              ld R21,y+
 0260 4991              ld R20,y+
 0262 0895              ret
                        .even
 0264           _GetCardTrolleyState::
 0264           ; }
 0264           ; unsigned char GetCardTrolleyState(void)
 0264           ; {
 0264           ; 	return CardTrolleySta;
 0264 00910700          lds R16,_CardTrolleySta
 0268           L54:
 0268                   .dbline 0 ; func end
 0268 0895              ret
 026A           ;             sw -> <dead>
                        .even
 026A           _CardTrolleyTurnProcess::
 026A           ; }
 026A           ; void CardTrolleyTurnProcess(void){		// 卡片小车翻转处理
 026A           ; 	unsigned char sw;
 026A           ; 	if(PINL & 0x04){//端口定义 不为0
 026A 20900901          lds R2,265
 026E 22FE              sbrs R2,2
 0270 04C0              rjmp L56
 0272           X18:
 0272           ; 	//	sw = 1;		// 小车平置
 0272           ; 		CardTrolleySta = 1;
 0272 81E0              ldi R24,1
 0274 80930700          sts _CardTrolleySta,R24
 0278           ;               }
 0278 03C0              xjmp L57
 027A           L56:
 027A           ; 	else{
 027A           ; 	//	sw = 0;		// 小车翻起
 027A           ; 		CardTrolleySta = 0;
 027A 2224              clr R2
 027C 20920700          sts _CardTrolleySta,R2
 0280           ;               }
 0280           L57:
 0280           L55:
 0280                   .dbline 0 ; func end
 0280 0895              ret
 0282           ;            num -> R10
                        .even
 0282           __SenCardStoreState::
 0282 0E940000          xcall push_xgset300C
 0286 A02E              mov R10,R16
 0288 2297              sbiw R28,2
 028A           ; }
 028A           ; 
 028A           ; 
 028A           ; /********************************  片仓状态处理程序  ***************************************/
 028A           ; unsigned char CardStoreOpenState;     // 片仓开关状态
 028A           ; unsigned char CardSurplusState[6];            // 卡片剩余状态
 028A           ; unsigned char CardStoretate[6];               // 片仓状态
 028A           ; 
 028A           ; void _SenCardStoreState(unsigned char num)
 028A           ; {
 028A           ;       switch(CardSurplusState[num])
 028A 80E0              ldi R24,<_CardSurplusState
 028C 90E0              ldi R25,>_CardSurplusState
 028E EA2D              mov R30,R10
 0290 FF27              clr R31
 0292 E80F              add R30,R24
 0294 F91F              adc R31,R25
 0296 4081              ldd R20,z+0
 0298 5527              clr R21
 029A 4631              cpi R20,22
 029C E0E0              ldi R30,0
 029E 5E07              cpc R21,R30
 02A0 71F0              breq L62
 02A2           X19:
 02A2 4731              cpi R20,23
 02A4 E0E0              ldi R30,0
 02A6 5E07              cpc R21,R30
 02A8 01F1              breq L63
 02AA           X20:
 02AA 4831              cpi R20,24
 02AC E0E0              ldi R30,0
 02AE 5E07              cpc R21,R30
 02B0 91F1              breq L64
 02B2           X21:
 02B2 4931              cpi R20,25
 02B4 E0E0              ldi R30,0
 02B6 5E07              cpc R21,R30
 02B8 09F4              brne X23
 02BA 42C0              xjmp L60
 02BC           X23:
 02BC           X22:
 02BC 41C0              xjmp L60
 02BE           L62:
 02BE           ; 	{
 02BE           ; 		case INFO_STORE_FULL:
 02BE           ; 			Uart0ReUnable;
 02BE 8091C100          lds R24,193
 02C2 8F7E              andi R24,239
 02C4 8093C100          sts 193,R24
 02C8           ;                       uart_Printf("%s $%4d\r\n", strM3132, num+1);
 02C8 8A2D              mov R24,R10
 02CA 9927              clr R25
 02CC 0196              adiw R24,1
 02CE 9983              std y+1,R25
 02D0 8883              std y+0,R24
 02D2 20E0              ldi R18,<_strM3132
 02D4 30E0              ldi R19,>_strM3132
 02D6 00E0              ldi R16,<L32
 02D8 10E0              ldi R17,>L32
 02DA 0E940000          xcall _uart_Printf
 02DE           ;                       Uart0ReEnable;
 02DE 8091C100          lds R24,193
 02E2 8061              ori R24,16
 02E4 8093C100          sts 193,R24
 02E8           ;                       break;
 02E8 2BC0              xjmp L60
 02EA           L63:
 02EA           ; 		case INFO_STORE_LITTLE:
 02EA           ; 			Uart0ReUnable;
 02EA 8091C100          lds R24,193
 02EE 8F7E              andi R24,239
 02F0 8093C100          sts 193,R24
 02F4           ;                       uart_Printf("%s $%4d\r\n", strM3133, num+1);
 02F4 8A2D              mov R24,R10
 02F6 9927              clr R25
 02F8 0196              adiw R24,1
 02FA 9983              std y+1,R25
 02FC 8883              std y+0,R24
 02FE 20E0              ldi R18,<_strM3133
 0300 30E0              ldi R19,>_strM3133
 0302 00E0              ldi R16,<L32
 0304 10E0              ldi R17,>L32
 0306 0E940000          xcall _uart_Printf
 030A           ;                       Uart0ReEnable;
 030A 8091C100          lds R24,193
 030E 8061              ori R24,16
 0310 8093C100          sts 193,R24
 0314           ;                       break;
 0314 15C0              xjmp L60
 0316           L64:
 0316           ; 		case INFO_STORE_EMPTY:
 0316           ; 			Uart0ReUnable;
 0316 8091C100          lds R24,193
 031A 8F7E              andi R24,239
 031C 8093C100          sts 193,R24
 0320           ;                       uart_Printf("%s $%4d\r\n", strM3134, num+1);
 0320 8A2D              mov R24,R10
 0322 9927              clr R25
 0324 0196              adiw R24,1
 0326 9983              std y+1,R25
 0328 8883              std y+0,R24
 032A 20E0              ldi R18,<_strM3134
 032C 30E0              ldi R19,>_strM3134
 032E 00E0              ldi R16,<L32
 0330 10E0              ldi R17,>L32
 0332 0E940000          xcall _uart_Printf
 0336           ;                       Uart0ReEnable;
 0336 8091C100          lds R24,193
 033A 8061              ori R24,16
 033C 8093C100          sts 193,R24
 0340           ;                       break;
 0340           ;               case INFO_STORE_ERROR:
 0340           ;               default:
 0340           ;                       break;
 0340           L60:
 0340           L58:
 0340                   .dbline 0 ; func end
 0340 2296              adiw R28,2
 0342 0C940000          xjmp pop_xgset300C
 0346           ;              i -> R20
 0346           ;            num -> R10
                        .even
 0346           _ReportCardStoreState::
 0346 AA92              st -y,R10
 0348 4A93              st -y,R20
 034A A02E              mov R10,R16
 034C           ;       }
 034C           ; }
 034C           ; void ReportCardStoreState(unsigned char num)
 034C           ; {
 034C           ;       // 向上位机报告当前片仓状态
 034C           ;       unsigned char i;
 034C           ;       if(num == 0)
 034C AA20              tst R10
 034E 41F4              brne L67
 0350           X24:
 0350           ; 	{
 0350           ; 		for(i=0; i<5; i++)
 0350 4427              clr R20
 0352 03C0              xjmp L72
 0354           L69:
 0354           ; 		{
 0354           ; 			_SenCardStoreState(i);
 0354 042F              mov R16,R20
 0356 95DF              xcall __SenCardStoreState
 0358           ;               }
 0358           L70:
 0358 4395              inc R20
 035A           L72:
 035A 4530              cpi R20,5
 035C D8F3              brlo L69
 035E           X25:
 035E           ; 	}
 035E 03C0              xjmp L68
 0360           L67:
 0360           ; 	else
 0360           ; 	{
 0360           ; 		num --;
 0360 AA94              dec R10
 0362           ;               _SenCardStoreState(num);
 0362 0A2D              mov R16,R10
 0364 8EDF              xcall __SenCardStoreState
 0366           ;       }
 0366           L68:
 0366           L66:
 0366                   .dbline 0 ; func end
 0366 4991              ld R20,y+
 0368 A990              ld R10,y+
 036A 0895              ret
                        .area lit(rom, con, rel)
 0000           _Num2Bit::
 0000 0102              .byte 1,2
 0002 0408              .byte 4,8
 0004 1020              .byte 16,32
 0006 4080              .byte 64,128
                        .area text(rom, con, rel)
                ;          pInfo -> R20,R21
                ;            num -> R22
                ;     pInfoEvent -> R10,R11
                        .even
 036C           _CardStoreSteteProcess::
 036C 0E940000          xcall push_xgsetF00C
 0370 5801              movw R10,R16
 0372 2297              sbiw R28,2
 0374           ; }
 0374           ; 
 0374           ; _CONST unsigned char Num2Bit[] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
 0374           ; unsigned char CardStoreSteteProcess(INFO_EVENT * pInfoEvent)
 0374           ; {
 0374           ;       unsigned char num;
 0374           ;       unsigned char * pInfo;
 0374           ;       if(pInfoEvent->event != INFO_STORE_STATE_ALL)
 0374 F501              movw R30,R10
 0376 8181              ldd R24,z+1
 0378 8D31              cpi R24,29
 037A 31F0              breq L74
 037C           X26:
 037C           ; 	{
 037C           ; 		num = pInfoEvent->info[0];
 037C 6281              ldd R22,z+2
 037E           ;               if(num>5)
 037E 85E0              ldi R24,5
 0380 8617              cp R24,R22
 0382 10F4              brsh L76
 0384           X27:
 0384           ; 			return 0;
 0384 0027              clr R16
 0386 07C1              xjmp L73
 0388           L76:
 0388           ; 	}
 0388           L74:
 0388           ; 	//num = 5-num;	// 颠倒顺序
 0388           ; 	switch(pInfoEvent->event)
 0388 F501              movw R30,R10
 038A 4181              ldd R20,z+1
 038C 5527              clr R21
 038E 4431              cpi R20,20
 0390 E0E0              ldi R30,0
 0392 5E07              cpc R21,R30
 0394 21F1              breq L81
 0396           X28:
 0396 4531              cpi R20,21
 0398 E0E0              ldi R30,0
 039A 5E07              cpc R21,R30
 039C 09F4              brne X41
 039E 49C0              xjmp L82
 03A0           X41:
 03A0           X29:
 03A0 4631              cpi R20,22
 03A2 E0E0              ldi R30,0
 03A4 5E07              cpc R21,R30
 03A6 09F4              brne X42
 03A8 77C0              xjmp L83
 03AA           X42:
 03AA           X30:
 03AA 4731              cpi R20,23
 03AC E0E0              ldi R30,0
 03AE 5E07              cpc R21,R30
 03B0 09F4              brne X43
 03B2 85C0              xjmp L84
 03B4           X43:
 03B4           X31:
 03B4 4831              cpi R20,24
 03B6 E0E0              ldi R30,0
 03B8 5E07              cpc R21,R30
 03BA 09F4              brne X44
 03BC 93C0              xjmp L85
 03BE           X44:
 03BE           X32:
 03BE 4931              cpi R20,25
 03C0 E0E0              ldi R30,0
 03C2 5E07              cpc R21,R30
 03C4 09F4              brne X45
 03C6 A1C0              xjmp L86
 03C8           X45:
 03C8           X33:
 03C8 4D31              cpi R20,29
 03CA E0E0              ldi R30,0
 03CC 5E07              cpc R21,R30
 03CE 09F4              brne X46
 03D0 AFC0              xjmp L87
 03D2           X46:
 03D2           X34:
 03D2 4E31              cpi R20,30
 03D4 E0E0              ldi R30,0
 03D6 5E07              cpc R21,R30
 03D8 09F4              brne X47
 03DA C7C0              xjmp L94
 03DC           X47:
 03DC           X35:
 03DC DBC0              xjmp L79
 03DE           L81:
 03DE           ; 	{
 03DE           ; 		case INFO_STORE_OPEN:		// 片仓打开
 03DE           ; 			CardStoreOpenState |= Num2Bit[num];
 03DE 80E0              ldi R24,<_Num2Bit
 03E0 90E0              ldi R25,>_Num2Bit
 03E2 E62F              mov R30,R22
 03E4 FF27              clr R31
 03E6 E80F              add R30,R24
 03E8 F91F              adc R31,R25
 03EA 2690              elpm R2,Z
 03EC 30902E00          lds R3,_CardStoreOpenState
 03F0 3228              or R3,R2
 03F2 30922E00          sts _CardStoreOpenState,R3
 03F6           ;                       CardStoretate[num] = INFO_STORE_OPEN;
 03F6 80E0              ldi R24,<_CardStoretate
 03F8 90E0              ldi R25,>_CardStoretate
 03FA E62F              mov R30,R22
 03FC FF27              clr R31
 03FE E80F              add R30,R24
 0400 F91F              adc R31,R25
 0402 84E1              ldi R24,20
 0404 8083              std z+0,R24
 0406           ;                       Uart0ReUnable;
 0406 8091C100          lds R24,193
 040A 8F7E              andi R24,239
 040C 8093C100          sts 193,R24
 0410           ;                       uart_Printf("%s $%4d\r\n",strM3130, num+1);
 0410 862F              mov R24,R22
 0412 9927              clr R25
 0414 0196              adiw R24,1
 0416 9983              std y+1,R25
 0418 8883              std y+0,R24
 041A 20E0              ldi R18,<_strM3130
 041C 30E0              ldi R19,>_strM3130
 041E 00E0              ldi R16,<L32
 0420 10E0              ldi R17,>L32
 0422 0E940000          xcall _uart_Printf
 0426           ;                       Uart0ReEnable;
 0426 8091C100          lds R24,193
 042A 8061              ori R24,16
 042C 8093C100          sts 193,R24
 0430           ;                       break;
 0430 B1C0              xjmp L79
 0432           L82:
 0432           ; 		case INFO_STORE_CLOSE:		// 片仓关闭
 0432           ; 			CardStoreOpenState &= (0xff-Num2Bit[num]);
 0432 80E0              ldi R24,<_Num2Bit
 0434 90E0              ldi R25,>_Num2Bit
 0436 E62F              mov R30,R22
 0438 FF27              clr R31
 043A E80F              add R30,R24
 043C F91F              adc R31,R25
 043E 2690              elpm R2,Z
 0440 3324              clr R3
 0442 8FEF              ldi R24,255
 0444 90E0              ldi R25,0
 0446 8219              sub R24,R2
 0448 9309              sbc R25,R3
 044A 20902E00          lds R2,_CardStoreOpenState
 044E 3324              clr R3
 0450 2822              and R2,R24
 0452 3922              and R3,R25
 0454 20922E00          sts _CardStoreOpenState,R2
 0458           ;                       CardStoretate[num] = INFO_STORE_CLOSE;
 0458 80E0              ldi R24,<_CardStoretate
 045A 90E0              ldi R25,>_CardStoretate
 045C E62F              mov R30,R22
 045E FF27              clr R31
 0460 E80F              add R30,R24
 0462 F91F              adc R31,R25
 0464 85E1              ldi R24,21
 0466 8083              std z+0,R24
 0468           ;                       Uart0ReUnable;
 0468 8091C100          lds R24,193
 046C 8F7E              andi R24,239
 046E 8093C100          sts 193,R24
 0472           ;                       uart_Printf("%s $%4d\r\n", strM3131, num+1);
 0472 862F              mov R24,R22
 0474 9927              clr R25
 0476 0196              adiw R24,1
 0478 9983              std y+1,R25
 047A 8883              std y+0,R24
 047C 20E0              ldi R18,<_strM3131
 047E 30E0              ldi R19,>_strM3131
 0480 00E0              ldi R16,<L32
 0482 10E0              ldi R17,>L32
 0484 0E940000          xcall _uart_Printf
 0488           ;                       Uart0ReEnable;
 0488 8091C100          lds R24,193
 048C 8061              ori R24,16
 048E 8093C100          sts 193,R24
 0492           ;                       _SenCardStoreState(num);        // 片仓关闭后发送片仓存储状态
 0492 062F              mov R16,R22
 0494 F6DE              xcall __SenCardStoreState
 0496           ;                       break;
 0496 7EC0              xjmp L79
 0498           L83:
 0498           ; 		case INFO_STORE_FULL:		// 片仓满
 0498           ; 			CardSurplusState[num] = pInfoEvent->event;
 0498 80E0              ldi R24,<_CardSurplusState
 049A 90E0              ldi R25,>_CardSurplusState
 049C E62F              mov R30,R22
 049E FF27              clr R31
 04A0 E80F              add R30,R24
 04A2 F91F              adc R31,R25
 04A4 D501              movw R26,R10
 04A6 1196              adiw R26,1
 04A8 2C90              ld R2,x
 04AA 2082              std z+0,R2
 04AC           ;                       CardStoretate[num] = INFO_STORE_FULL;
 04AC 80E0              ldi R24,<_CardStoretate
 04AE 90E0              ldi R25,>_CardStoretate
 04B0 E62F              mov R30,R22
 04B2 FF27              clr R31
 04B4 E80F              add R30,R24
 04B6 F91F              adc R31,R25
 04B8 86E1              ldi R24,22
 04BA 8083              std z+0,R24
 04BC           ;                       break;
 04BC 6BC0              xjmp L79
 04BE           L84:
 04BE           ; 		case INFO_STORE_LITTLE:		// 片仓少量
 04BE           ; 			CardSurplusState[num] = pInfoEvent->event;
 04BE 80E0              ldi R24,<_CardSurplusState
 04C0 90E0              ldi R25,>_CardSurplusState
 04C2 E62F              mov R30,R22
 04C4 FF27              clr R31
 04C6 E80F              add R30,R24
 04C8 F91F              adc R31,R25
 04CA D501              movw R26,R10
 04CC 1196              adiw R26,1
 04CE 2C90              ld R2,x
 04D0 2082              std z+0,R2
 04D2           ;                       CardStoretate[num] = INFO_STORE_LITTLE;
 04D2 80E0              ldi R24,<_CardStoretate
 04D4 90E0              ldi R25,>_CardStoretate
 04D6 E62F              mov R30,R22
 04D8 FF27              clr R31
 04DA E80F              add R30,R24
 04DC F91F              adc R31,R25
 04DE 87E1              ldi R24,23
 04E0 8083              std z+0,R24
 04E2           ;                       break;
 04E2 58C0              xjmp L79
 04E4           L85:
 04E4           ; 		case INFO_STORE_EMPTY:		// 片仓空
 04E4           ; 			CardSurplusState[num] = pInfoEvent->event;
 04E4 80E0              ldi R24,<_CardSurplusState
 04E6 90E0              ldi R25,>_CardSurplusState
 04E8 E62F              mov R30,R22
 04EA FF27              clr R31
 04EC E80F              add R30,R24
 04EE F91F              adc R31,R25
 04F0 D501              movw R26,R10
 04F2 1196              adiw R26,1
 04F4 2C90              ld R2,x
 04F6 2082              std z+0,R2
 04F8           ;                       CardStoretate[num] = INFO_STORE_EMPTY;
 04F8 80E0              ldi R24,<_CardStoretate
 04FA 90E0              ldi R25,>_CardStoretate
 04FC E62F              mov R30,R22
 04FE FF27              clr R31
 0500 E80F              add R30,R24
 0502 F91F              adc R31,R25
 0504 88E1              ldi R24,24
 0506 8083              std z+0,R24
 0508           ;                       break;
 0508 45C0              xjmp L79
 050A           L86:
 050A           ; 		case INFO_STORE_ERROR:		// 片仓状态错误
 050A           ; 			CardSurplusState[num] = pInfoEvent->event;
 050A 80E0              ldi R24,<_CardSurplusState
 050C 90E0              ldi R25,>_CardSurplusState
 050E E62F              mov R30,R22
 0510 FF27              clr R31
 0512 E80F              add R30,R24
 0514 F91F              adc R31,R25
 0516 D501              movw R26,R10
 0518 1196              adiw R26,1
 051A 2C90              ld R2,x
 051C 2082              std z+0,R2
 051E           ;                       CardStoretate[num] = INFO_STORE_ERROR;
 051E 80E0              ldi R24,<_CardStoretate
 0520 90E0              ldi R25,>_CardStoretate
 0522 E62F              mov R30,R22
 0524 FF27              clr R31
 0526 E80F              add R30,R24
 0528 F91F              adc R31,R25
 052A 89E1              ldi R24,25
 052C 8083              std z+0,R24
 052E           ;                       break;
 052E 32C0              xjmp L79
 0530           L87:
 0530           ; 		case INFO_STORE_STATE_ALL:	// 全部片仓状态信息
 0530           ; 			pInfo = &(pInfoEvent->info[0]);
 0530 A501              movw R20,R10
 0532 4E5F              subi R20,254  ; offset = 2
 0534 5F4F              sbci R21,255
 0536           ;                       for(num=0; num<6; num++)
 0536 6627              clr R22
 0538 15C0              xjmp L91
 053A           L88:
 053A           ; 			{
 053A           ; 				if(*pInfo >= INFO_STORE_FULL && *pInfo <= INFO_STORE_ERROR)
 053A FA01              movw R30,R20
 053C 2080              ldd R2,z+0
 053E 3324              clr R3
 0540 822D              mov R24,R2
 0542 8631              cpi R24,22
 0544 60F0              brlo L92
 0546           X36:
 0546 89E1              ldi R24,25
 0548 8215              cp R24,R2
 054A 48F0              brlo L92
 054C           X37:
 054C           ; 				{
 054C           ; 					CardSurplusState[num] = *pInfo;
 054C 80E0              ldi R24,<_CardSurplusState
 054E 90E0              ldi R25,>_CardSurplusState
 0550 E62F              mov R30,R22
 0552 FF27              clr R31
 0554 E80F              add R30,R24
 0556 F91F              adc R31,R25
 0558 DA01              movw R26,R20
 055A 2C90              ld R2,x
 055C 2082              std z+0,R2
 055E           ;                               }
 055E           L92:
 055E           ; 				pInfo ++;
 055E 4F5F              subi R20,255  ; offset = 1
 0560 5F4F              sbci R21,255
 0562           ;                       }
 0562           L89:
 0562 6395              inc R22
 0564           L91:
 0564 6630              cpi R22,6
 0566 48F3              brlo L88
 0568           X38:
 0568           ; 			break;
 0568 15C0              xjmp L79
 056A           L94:
 056A           ; 		case INFO_STORE_STATE_SPC:	// 指定片仓状态信息
 056A           ; 			pInfo = &(pInfoEvent->info[1]);
 056A A501              movw R20,R10
 056C 4D5F              subi R20,253  ; offset = 3
 056E 5F4F              sbci R21,255
 0570           ;                       if(*pInfo >= INFO_STORE_FULL && *pInfo <= INFO_STORE_ERROR)
 0570 FA01              movw R30,R20
 0572 2080              ldd R2,z+0
 0574 3324              clr R3
 0576 822D              mov R24,R2
 0578 8631              cpi R24,22
 057A 60F0              brlo L79
 057C           X39:
 057C 89E1              ldi R24,25
 057E 8215              cp R24,R2
 0580 48F0              brlo L79
 0582           X40:
 0582           ; 			{
 0582           ; 				CardSurplusState[num] = *pInfo;
 0582 80E0              ldi R24,<_CardSurplusState
 0584 90E0              ldi R25,>_CardSurplusState
 0586 E62F              mov R30,R22
 0588 FF27              clr R31
 058A E80F              add R30,R24
 058C F91F              adc R31,R25
 058E DA01              movw R26,R20
 0590 2C90              ld R2,x
 0592 2082              std z+0,R2
 0594           ;                       }
 0594           ;               default:
 0594           ;                       break;
 0594           L79:
 0594           ; 		}
 0594           ; 	return 0;
 0594 0027              clr R16
 0596           L73:
 0596                   .dbline 0 ; func end
 0596 2296              adiw R28,2
 0598 0C940000          xjmp pop_xgsetF00C
                        .even
 059C           _printf_CardstoreProcess_StepState::
 059C 2297              sbiw R28,2
 059E           ; }
 059E           ; 
 059E           ; 
 059E           ; /*********************************************************************************************/
 059E           ; 
 059E           ; static unsigned char CardstoreProcess_workStep,CardstoreProcess_mainStep;
 059E           ; 
 059E           ; void printf_CardstoreProcess_StepState(void)
 059E           ; {
 059E           ;       uart_Printf("*3203 CardStoreStepState $%2d $%2d\r\n",CardstoreProcess_mainStep,CardstoreProcess_workStep);
 059E 20902100          lds R2,_CardstoreProcess_workStep
 05A2 3324              clr R3
 05A4 3982              std y+1,R3
 05A6 2882              std y+0,R2
 05A8 20912000          lds R18,_CardstoreProcess_mainStep
 05AC 3327              clr R19
 05AE 00E0              ldi R16,<L98
 05B0 10E0              ldi R17,>L98
 05B2 0E940000          xcall _uart_Printf
 05B6           L97:
 05B6                   .dbline 0 ; func end
 05B6 2296              adiw R28,2
 05B8 0895              ret
                        .area bss(ram, con, rel)
 0001           L100:
 0001                   .blkb 1
 0002           L101:
 0002                   .blkb 1
 0003           L102:
 0003                   .blkb 2
 0005           L103:
 0005                   .blkb 1
 0006           L104:
 0006                   .blkb 1
 0007           L105:
 0007                   .blkb 1
 0008           L106:
 0008                   .blkb 1
 0009           L107:
 0009                   .blkb 1
 000A           L108:
 000A                   .blkb 1
 000B           L109:
 000B                   .blkb 1
 000C           L110:
 000C                   .blkb 1
 000D           L111:
 000D                   .blkb 1
 000E           L112:
 000E                   .blkb 1
 000F           L113:
 000F                   .blkb 1
 0010           L114:
 0010                   .blkb 1
                        .area text(rom, con, rel)
                        .area  func_lit(rom, con, rel)
 0000           L314:
 0000 1E07              .word `L242
 0002 4F07              .word `L248
 0004 7B07              .word `L255
 0006 7408              .word `L275
 0008 B508              .word `L284
 000A BE08              .word `L285
 000C 6909              .word `L302
 000E 7A09              .word `L303
 0010 8309              .word `L304
 0012 BE09              .word `L309
 0014 DD09              .word `L310
 0016 EE09              .word `L313
 0018 140D              .word `L163
 001A 140D              .word `L163
 001C 140D              .word `L163
 001E 140D              .word `L163
 0020 140D              .word `L163
 0022 140D              .word `L163
 0024 140D              .word `L163
 0026 140D              .word `L163
 0028 BF07              .word `L264
 002A D307              .word `L265
 002C E707              .word `L266
 002E F007              .word `L267
 0030 0108              .word `L268
 0032 1808              .word `L269
 0034 4308              .word `L271
 0036 4B08              .word `L272
 0038 5F08              .word `L273
 003A 6B08              .word `L274
                        .area text(rom, con, rel)
                        .area  func_lit(rom, con, rel)
 003C           L385:
 003C 580A              .word `L323
 003E 630A              .word `L326
 0040 7F0A              .word `L328
 0042 BE0B              .word `L353
 0044 DB0B              .word `L357
 0046 140D              .word `L163
 0048 140D              .word `L163
 004A F50B              .word `L359
 004C A00C              .word `L374
 004E F90C              .word `L379
 0050 050D              .word `L380
 0052 440C              .word `L365
 0054 220C              .word `L363
 0056 330C              .word `L364
 0058 140D              .word `L163
 005A 140D              .word `L163
 005C 140D              .word `L163
 005E 140D              .word `L163
 0060 140D              .word `L163
 0062 140D              .word `L163
 0064 760A              .word `L327
 0066 140D              .word `L163
 0068 140D              .word `L163
 006A 140D              .word `L163
 006C 140D              .word `L163
 006E 140D              .word `L163
 0070 140D              .word `L163
 0072 140D              .word `L163
 0074 140D              .word `L163
 0076 140D              .word `L163
 0078 8B0A              .word `L329
 007A 940A              .word `L330
 007C EF0A              .word `L336
 007E 050B              .word `L339
 0080 140D              .word `L163
 0082 0E0B              .word `L340
 0084 340B              .word `L345
 0086 480B              .word `L346
 0088 510B              .word `L347
 008A B20B              .word `L352
                        .area text(rom, con, rel)
                ;            pos -> <dead>
                ;          siTmp -> R22,R23
                ;          ucTmp -> R20
                ;     pInfoEvent -> <dead>
                        .even
 05BA           _GetNewPieceFromStoreProcess::
 05BA 1A93              st -y,r17
 05BC 0A93              st -y,r16
 05BE 0E940000          xcall push_xgsetF00C
 05C2 2497              sbiw R28,4
 05C4           ; }
 05C4           ; 
 05C4           ; 
 05C4           ; /********************************  测试卡提取处理程序  ***************************************/
 05C4           ; extern unsigned char _GetCardMainStep, _GetCardWorkStep;
 05C4           ; extern SAMP_INFO NewTestInfo;
 05C4           ; 
 05C4           ; unsigned char GetNewPieceFromStoreProcess(INFO_EVENT * pInfoEvent){
 05C4           ;       static unsigned char mainStep;          
 05C4           ;       static unsigned char workStep;
 05C4           ;       static signed int storePos;
 05C4           ;       static unsigned char inWork,i,j;
 05C4           ;       static unsigned char waitMotCardTrolley, waitMotCardLoad,waitMotCardUnload, waitMotTurnPlate;
 05C4           ;       static unsigned char oldStoreState;
 05C4           ;       static unsigned char oldGetCardState;
 05C4           ;       static unsigned char curCardStoreNum;
 05C4           ;       static unsigned char checkReDoCnt, takeRedoCnt;
 05C4           ;       signed int siTmp;
 05C4           ;       unsigned char pos;
 05C4           ;       unsigned char ucTmp;
 05C4           ;       CardstoreProcess_mainStep = mainStep;
 05C4 20900100          lds R2,L100
 05C8 20922000          sts _CardstoreProcess_mainStep,R2
 05CC           ;       CardstoreProcess_workStep = workStep;
 05CC 20900200          lds R2,L101
 05D0 20922100          sts _CardstoreProcess_workStep,R2
 05D4           ;       if(inWork)
 05D4 20900500          lds R2,L103
 05D8 2220              tst R2
 05DA 09F4              brne X165
 05DC DCC0              xjmp L115
 05DE           X165:
 05DE           X48:
 05DE           ; 	{
 05DE           ; 		if(waitMotCardTrolley)
 05DE 20900800          lds R2,L106
 05E2 2220              tst R2
 05E4 09F4              brne X166
 05E6 68C0              xjmp L117
 05E8           X166:
 05E8           X49:
 05E8           ; 		{
 05E8           ; 			if(WaitDelayTime(MOT_STORE_CARD_MOVE))
 05E8 08E0              ldi R16,8
 05EA 0E940000          xcall _WaitDelayTime
 05EE 0023              tst R16
 05F0 99F0              breq L119
 05F2           X50:
 05F2           ; 			{
 05F2           ; 				if(GetMotState(MOT_STORE_CARD_MOVE) != STA_SLAVE_FREE)	
 05F2 08E0              ldi R16,8
 05F4 0E940000          xcall _GetMotState
 05F8 0130              cpi R16,1
 05FA 19F0              breq L121
 05FC           X51:
 05FC           ; 					return 0;
 05FC 0027              clr R16
 05FE 0C94150D          xjmp L99
 0602           L121:
 0602           ; 				inWork = 0;
 0602 2224              clr R2
 0604 20920500          sts L103,R2
 0608           ;                               waitMotCardTrolley = 0;
 0608 20920800          sts L106,R2
 060C           ;                               SetDelayTime(MOT_STORE_CARD_MOVE,0);
 060C 2227              clr R18
 060E 3327              clr R19
 0610 08E0              ldi R16,8
 0612 0E940000          xcall _SetDelayTime
 0616           ;                       }
 0616 50C0              xjmp L120
 0618           L119:
 0618           ; 			else	// 5秒延时到,取片卡片
 0618           ; 			{
 0618           ; 				MotStop(MOT_STORE_CARD_MOVE);
 0618 08E0              ldi R16,8
 061A 0E940000          xcall _MotStop
 061E           ;                               SetBeepWarning();
 061E 0E940000          xcall _SetBeepWarning
 0622           ; #ifndef UartSendLong
 0622           ;                               Uart0ReUnable;
 0622           ;                               uart_Printf("!3528 $%8d\r\n", NewTestInfo.testSerial);
 0622           ;                               Uart0ReEnable;
 0622           ; #else
 0622           ;                               Uart0ReUnable;
 0622 8091C100          lds R24,193
 0626 8F7E              andi R24,239
 0628 8093C100          sts 193,R24
 062C           ;                               uart_Printf("!3528 $ ");
 062C 00E0              ldi R16,<L123
 062E 10E0              ldi R17,>L123
 0630 0E940000          xcall _uart_Printf
 0634           ;                               uart0SendInt(NewTestInfo.testSerial);
 0634 20910300          lds R18,_NewTestInfo+1+2
 0638 30910400          lds R19,_NewTestInfo+1+2+1
 063C 00910100          lds R16,_NewTestInfo+1
 0640 10910200          lds R17,_NewTestInfo+1+1
 0644 0E940000          xcall _uart0SendInt
 0648           ;                               uart_Printf("\r\n");
 0648 00E0              ldi R16,<L125
 064A 10E0              ldi R17,>L125
 064C 0E940000          xcall _uart_Printf
 0650           ;                               Uart0ReEnable;
 0650 8091C100          lds R24,193
 0654 8061              ori R24,16
 0656 8093C100          sts 193,R24
 065A           ; #endif
 065A           ;                               inWork = 0;
 065A 2224              clr R2
 065C 20920500          sts L103,R2
 0660           ;                               waitMotCardTrolley = 0;
 0660 20920800          sts L106,R2
 0664           ;                               workSwitch = 0;
 0664 20920000          sts _workSwitch,R2
 0668           ;                               Uart0ReUnable;
 0668 8091C100          lds R24,193
 066C 8F7E              andi R24,239
 066E 8093C100          sts 193,R24
 0672           ;                               uart_Printf("%s\r\n",strM0106);
 0672 20E0              ldi R18,<_strM0106
 0674 30E0              ldi R19,>_strM0106
 0676 00E0              ldi R16,<L35
 0678 10E0              ldi R17,>L35
 067A 0E940000          xcall _uart_Printf
 067E           ;                               Uart0ReEnable;
 067E 8091C100          lds R24,193
 0682 8061              ori R24,16
 0684 8093C100          sts 193,R24
 0688           ;                               if(CardStoreTestFlag != 0)
 0688 20903500          lds R2,_CardStoreTestFlag
 068C 2220              tst R2
 068E A1F0              breq L126
 0690           X52:
 0690           ; 				{
 0690           ; 					ReStartCardGetTest();// 重新开始
 0690 FBDC              xcall _ReStartCardGetTest
 0692           ;                                       stopFlag = 1;
 0692 81E0              ldi R24,1
 0694 80930600          sts _stopFlag,R24
 0698           ;                                       Uart0ReUnable;
 0698 8091C100          lds R24,193
 069C 8F7E              andi R24,239
 069E 8093C100          sts 193,R24
 06A2           ;                                       uart_Printf("%s\r\n",strM3126);
 06A2 20E0              ldi R18,<_strM3126
 06A4 30E0              ldi R19,>_strM3126
 06A6 00E0              ldi R16,<L35
 06A8 10E0              ldi R17,>L35
 06AA 0E940000          xcall _uart_Printf
 06AE           ;                                       Uart0ReEnable;
 06AE 8091C100          lds R24,193
 06B2 8061              ori R24,16
 06B4 8093C100          sts 193,R24
 06B8           ;                                       
 06B8           ;                               }
 06B8           L126:
 06B8           ; 			}
 06B8           L120:
 06B8           ; 		}
 06B8           L117:
 06B8           ; 		
 06B8           ; 		if(waitMotCardLoad)
 06B8 20900900          lds R2,L107
 06BC 2220              tst R2
 06BE 09F4              brne X167
 06C0 6AC0              xjmp L128
 06C2           X167:
 06C2           X53:
 06C2           ; 		{
 06C2           ; 			if(WaitDelayTime(MOT_CARD_LOAD))
 06C2 04E0              ldi R16,4
 06C4 0E940000          xcall _WaitDelayTime
 06C8 A02E              mov R10,R16
 06CA 0023              tst R16
 06CC A1F0              breq L130
 06CE           X54:
 06CE           ; 			{
 06CE           ; 				if(GetMotState(MOT_CARD_LOAD)!=STA_SLAVE_FREE)
 06CE 04E0              ldi R16,4
 06D0 0E940000          xcall _GetMotState
 06D4 402F              mov R20,R16
 06D6 0130              cpi R16,1
 06D8 19F0              breq L132
 06DA           X55:
 06DA           ; 					return 0;
 06DA 0027              clr R16
 06DC 0C94150D          xjmp L99
 06E0           L132:
 06E0           ; 				inWork = 0;
 06E0 2224              clr R2
 06E2 20920500          sts L103,R2
 06E6           ;                               waitMotCardLoad = 0;
 06E6 20920900          sts L107,R2
 06EA           ;                               SetDelayTime(MOT_CARD_LOAD,0);
 06EA 2227              clr R18
 06EC 3327              clr R19
 06EE 04E0              ldi R16,4
 06F0 0E940000          xcall _SetDelayTime
 06F4           ;                       }
 06F4 50C0              xjmp L131
 06F6           L130:
 06F6           ; 			else	// 5秒延时到，进片回零位卡片
 06F6           ; 			{
 06F6           ; 				MotStop(MOT_CARD_LOAD);
 06F6 04E0              ldi R16,4
 06F8 0E940000          xcall _MotStop
 06FC           ;                               SetBeepWarning();       
 06FC 0E940000          xcall _SetBeepWarning
 0700           ; #ifndef UartSendLong
 0700           ;                               Uart0ReUnable;
 0700           ;                               uart_Printf("!3529 $%8d\r\n", NewTestInfo.testSerial);
 0700           ;                               Uart0ReEnable;
 0700           ; #else
 0700           ;                               Uart0ReUnable;
 0700 8091C100          lds R24,193
 0704 8F7E              andi R24,239
 0706 8093C100          sts 193,R24
 070A           ;                               uart_Printf("!3529 $ ");
 070A 00E0              ldi R16,<L134
 070C 10E0              ldi R17,>L134
 070E 0E940000          xcall _uart_Printf
 0712           ;                               uart0SendInt(NewTestInfo.testSerial);
 0712 20910300          lds R18,_NewTestInfo+1+2
 0716 30910400          lds R19,_NewTestInfo+1+2+1
 071A 00910100          lds R16,_NewTestInfo+1
 071E 10910200          lds R17,_NewTestInfo+1+1
 0722 0E940000          xcall _uart0SendInt
 0726           ;                               uart_Printf("\r\n");
 0726 00E0              ldi R16,<L125
 0728 10E0              ldi R17,>L125
 072A 0E940000          xcall _uart_Printf
 072E           ;                               Uart0ReEnable;
 072E 8091C100          lds R24,193
 0732 8061              ori R24,16
 0734 8093C100          sts 193,R24
 0738           ; #endif
 0738           ;                               inWork = 0;
 0738 2224              clr R2
 073A 20920500          sts L103,R2
 073E           ;                               waitMotCardLoad = 0;
 073E 20920900          sts L107,R2
 0742           ;                               workSwitch = 0;
 0742 20920000          sts _workSwitch,R2
 0746           ;                               Uart0ReUnable;
 0746 8091C100          lds R24,193
 074A 8F7E              andi R24,239
 074C 8093C100          sts 193,R24
 0750           ;                               uart_Printf("%s\r\n",strM0106);
 0750 20E0              ldi R18,<_strM0106
 0752 30E0              ldi R19,>_strM0106
 0754 00E0              ldi R16,<L35
 0756 10E0              ldi R17,>L35
 0758 0E940000          xcall _uart_Printf
 075C           ;                               Uart0ReEnable;
 075C 8091C100          lds R24,193
 0760 8061              ori R24,16
 0762 8093C100          sts 193,R24
 0766           ;                               if(CardStoreTestFlag != 0)
 0766 20903500          lds R2,_CardStoreTestFlag
 076A 2220              tst R2
 076C A1F0              breq L136
 076E           X56:
 076E           ; 				{
 076E           ; 					ReStartCardGetTest();// 重新开始
 076E 8CDC              xcall _ReStartCardGetTest
 0770           ;                                       stopFlag = 1;
 0770 81E0              ldi R24,1
 0772 80930600          sts _stopFlag,R24
 0776           ;                                       Uart0ReUnable;
 0776 8091C100          lds R24,193
 077A 8F7E              andi R24,239
 077C 8093C100          sts 193,R24
 0780           ;                                       uart_Printf("%s\r\n",strM3126);
 0780 20E0              ldi R18,<_strM3126
 0782 30E0              ldi R19,>_strM3126
 0784 00E0              ldi R16,<L35
 0786 10E0              ldi R17,>L35
 0788 0E940000          xcall _uart_Printf
 078C           ;                                       Uart0ReEnable;
 078C 8091C100          lds R24,193
 0790 8061              ori R24,16
 0792 8093C100          sts 193,R24
 0796           ;                               }
 0796           L136:
 0796           ; 			}
 0796           L131:
 0796           ; 		}
 0796           L128:
 0796           ; 	}
 0796           L115:
 0796           ; 	if(workSwitch == 0)							return 0;
 0796 20900000          lds R2,_workSwitch
 079A 2220              tst R2
 079C 19F4              brne L138
 079E           X57:
 079E 0027              clr R16
 07A0 0C94150D          xjmp L99
 07A4           L138:
 07A4           ; 	if(WaitDelayTime(MOT_STORE_CARD_MOVE))		return 0;
 07A4 08E0              ldi R16,8
 07A6 0E940000          xcall _WaitDelayTime
 07AA A02E              mov R10,R16
 07AC 0023              tst R16
 07AE 19F0              breq L140
 07B0           X58:
 07B0 0027              clr R16
 07B2 0C94150D          xjmp L99
 07B6           L140:
 07B6           ; 	if(WaitDelayTime(MOT_CARD_LOAD))			return 0;
 07B6 04E0              ldi R16,4
 07B8 0E940000          xcall _WaitDelayTime
 07BC A02E              mov R10,R16
 07BE 0023              tst R16
 07C0 19F0              breq L142
 07C2           X59:
 07C2 0027              clr R16
 07C4 0C94150D          xjmp L99
 07C8           L142:
 07C8           ; 	if(WaitDelayTime(MOT_CARD_UNLOAD))			return 0;
 07C8 05E0              ldi R16,5
 07CA 0E940000          xcall _WaitDelayTime
 07CE A02E              mov R10,R16
 07D0 0023              tst R16
 07D2 19F0              breq L144
 07D4           X60:
 07D4 0027              clr R16
 07D6 0C94150D          xjmp L99
 07DA           L144:
 07DA           ; 	if(waitMotCardTrolley){	if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)	return 0;waitMotCardTrolley = 0;}
 07DA 20900800          lds R2,L106
 07DE 2220              tst R2
 07E0 61F0              breq L146
 07E2           X61:
 07E2 08E0              ldi R16,8
 07E4 0E940000          xcall _GetMotState
 07E8 402F              mov R20,R16
 07EA 0130              cpi R16,1
 07EC 19F0              breq L148
 07EE           X62:
 07EE 0027              clr R16
 07F0 0C94150D          xjmp L99
 07F4           L148:
 07F4 2224              clr R2
 07F6 20920800          sts L106,R2
 07FA           L146:
 07FA           ; 	if(waitMotCardLoad){if(GetMotState(MOT_CARD_LOAD)!=STA_SLAVE_FREE)	return 0;waitMotCardLoad = 0;}
 07FA 20900900          lds R2,L107
 07FE 2220              tst R2
 0800 61F0              breq L150
 0802           X63:
 0802 04E0              ldi R16,4
 0804 0E940000          xcall _GetMotState
 0808 402F              mov R20,R16
 080A 0130              cpi R16,1
 080C 19F0              breq L152
 080E           X64:
 080E 0027              clr R16
 0810 0C94150D          xjmp L99
 0814           L152:
 0814 2224              clr R2
 0816 20920900          sts L107,R2
 081A           L150:
 081A           ; 	if(waitMotCardUnload){if(GetMotState(MOT_CARD_UNLOAD)!=STA_SLAVE_FREE)	return 0;waitMotCardUnload = 0;}
 081A 20900A00          lds R2,L108
 081E 2220              tst R2
 0820 61F0              breq L154
 0822           X65:
 0822 05E0              ldi R16,5
 0824 0E940000          xcall _GetMotState
 0828 402F              mov R20,R16
 082A 0130              cpi R16,1
 082C 19F0              breq L156
 082E           X66:
 082E 0027              clr R16
 0830 0C94150D          xjmp L99
 0834           L156:
 0834 2224              clr R2
 0836 20920A00          sts L108,R2
 083A           L154:
 083A           ; 	if(waitMotTurnPlate){if(GetMotState(MOT_TURN_PLATE)!=STA_SLAVE_FREE)	return 0;waitMotTurnPlate = 0;}
 083A 20900B00          lds R2,L109
 083E 2220              tst R2
 0840 61F0              breq L158
 0842           X67:
 0842 01E0              ldi R16,1
 0844 0E940000          xcall _GetMotState
 0848 402F              mov R20,R16
 084A 0130              cpi R16,1
 084C 19F0              breq L160
 084E           X68:
 084E 0027              clr R16
 0850 0C94150D          xjmp L99
 0854           L160:
 0854 2224              clr R2
 0856 20920B00          sts L109,R2
 085A           L158:
 085A           ; 	
 085A           ; 	switch(mainStep)
 085A 40910100          lds R20,L100
 085E 5527              clr R21
 0860 4030              cpi R20,0
 0862 4507              cpc R20,R21
 0864 09F4              brne X168
 0866 34C0              xjmp L165
 0868           X168:
 0868           X69:
 0868 4130              cpi R20,1
 086A E0E0              ldi R30,0
 086C 5E07              cpc R21,R30
 086E 09F4              brne X169
 0870 BCC0              xjmp L184
 0872           X169:
 0872           X70:
 0872 4230              cpi R20,2
 0874 E0E0              ldi R30,0
 0876 5E07              cpc R21,R30
 0878 09F4              brne X170
 087A 50C1              xjmp L203
 087C           X170:
 087C           X71:
 087C 4330              cpi R20,3
 087E E0E0              ldi R30,0
 0880 5E07              cpc R21,R30
 0882 09F4              brne X171
 0884 FFC1              xjmp L223
 0886           X171:
 0886           X72:
 0886 4530              cpi R20,5
 0888 E0E0              ldi R30,0
 088A 5E07              cpc R21,R30
 088C 09F4              brne X172
 088E BDC2              xjmp L238
 0890           X172:
 0890           X73:
 0890 4630              cpi R20,6
 0892 E0E0              ldi R30,0
 0894 5E07              cpc R21,R30
 0896 09F4              brne X173
 0898 B0C5              xjmp L315
 089A           X173:
 089A           X74:
 089A 4730              cpi R20,7
 089C E0E0              ldi R30,0
 089E 5E07              cpc R21,R30
 08A0 09F4              brne X174
 08A2 CAC5              xjmp L316
 08A4           X174:
 08A4           X75:
 08A4 4830              cpi R20,8
 08A6 E0E0              ldi R30,0
 08A8 5E07              cpc R21,R30
 08AA 09F4              brne X175
 08AC D6C5              xjmp L319
 08AE           X175:
 08AE           X76:
 08AE 4030              cpi R20,0
 08B0 E0E0              ldi R30,0
 08B2 5E07              cpc R21,R30
 08B4 14F4              brge X176
 08B6 0C94140D          xjmp L163
 08BA           X176:
 08BA           X77:
 08BA           L386:
 08BA 4436              cpi R20,100
 08BC E0E0              ldi R30,0
 08BE 5E07              cpc R21,R30
 08C0 B1F1              breq L170
 08C2           X78:
 08C2 4536              cpi R20,101
 08C4 E0E0              ldi R30,0
 08C6 5E07              cpc R21,R30
 08C8 09F4              brne X177
 08CA 7CC0              xjmp L180
 08CC           X177:
 08CC           X79:
 08CC 0C94140D          xjmp L163
 08D0           L165:
 08D0           ; 	{
 08D0           ; 		case 0:	// 准备工作，判断是否有新的测试开始
 08D0           ; 			if(GetNewTestCard != 0 && GetNewTestCard < 6)
 08D0 40910000          lds R20,_GetNewTestCard
 08D4 4423              tst R20
 08D6 41F1              breq L166
 08D8           X80:
 08D8 4630              cpi R20,6
 08DA 30F5              brsh L166
 08DC           X81:
 08DC           ; 			{
 08DC           ; 				mainStep = 100;
 08DC 84E6              ldi R24,100
 08DE 80930100          sts L100,R24
 08E2           ;                               workStep = 0;
 08E2 2224              clr R2
 08E4 20920200          sts L101,R2
 08E8           ;                               curCardStoreNum = GetNewTestCard;
 08E8 242E              mov R2,R20
 08EA 20920E00          sts L112,R2
 08EE           ;                               MotInitCheck(MOT_STORE_CARD_MOVE);
 08EE 08E0              ldi R16,8
 08F0 0E940000          xcall _MotInitCheck
 08F4           ;                               SetCardTrolleyState(0); 
 08F4 0027              clr R16
 08F6 8BDC              xcall _SetCardTrolleyState
 08F8           ;                               SetDelayTime(MOT_STORE_CARD_MOVE,10);
 08F8 2AE0              ldi R18,10
 08FA 30E0              ldi R19,0
 08FC 08E0              ldi R16,8
 08FE 0E940000          xcall _SetDelayTime
 0902           ;                               waitMotCardTrolley = 1; 
 0902 81E0              ldi R24,1
 0904 80930800          sts L106,R24
 0908           ;                               checkReDoCnt = 0;
 0908 2224              clr R2
 090A 20920F00          sts L113,R2
 090E           ;                               takeRedoCnt = 0;
 090E 20921000          sts L114,R2
 0912           ;                               if(0 != CardStoreTestFlag)
 0912 20903500          lds R2,_CardStoreTestFlag
 0916 2220              tst R2
 0918 11F4              brne X178
 091A 0C94140D          xjmp L163
 091E           X178:
 091E           X82:
 091E           ; 					LastCardGetState = 0;
 091E 2224              clr R2
 0920 20922F00          sts _LastCardGetState,R2
 0924           ;                       }
 0924 0C94140D          xjmp L163
 0928           L166:
 0928           ; 			else
 0928           ; 				return 1;	
 0928 01E0              ldi R16,1
 092A 0C94150D          xjmp L99
 092E           L170:
 092E           ; 			break;
 092E           ; 		case 100:
 092E           ; 			ucTmp = CardSurplusState[GetNewTestCard - 1];
 092E 80E0              ldi R24,<_CardSurplusState-1
 0930 90E0              ldi R25,>_CardSurplusState-1
 0932 E0910000          lds R30,_GetNewTestCard
 0936 FF27              clr R31
 0938 E80F              add R30,R24
 093A F91F              adc R31,R25
 093C 4081              ldd R20,z+0
 093E           ;                       if(CardNoneUseful == 0)
 093E 20900000          lds R2,_CardNoneUseful
 0942 2220              tst R2
 0944 B1F5              brne L172
 0946           X83:
 0946           ; 			{
 0946           ; 				if(ucTmp == INFO_STORE_EMPTY)
 0946 4831              cpi R20,24
 0948 B9F4              brne L174
 094A           X84:
 094A           ; 				{
 094A           ; 					SetBeepWarning();
 094A 0E940000          xcall _SetBeepWarning
 094E           ;                                       Uart0ReUnable;
 094E 8091C100          lds R24,193
 0952 8F7E              andi R24,239
 0954 8093C100          sts 193,R24
 0958           ;                                       uart_Printf("!3520 $%4d\r\n", GetNewTestCard);
 0958 20910000          lds R18,_GetNewTestCard
 095C 3327              clr R19
 095E 00E0              ldi R16,<L176
 0960 10E0              ldi R17,>L176
 0962 0E940000          xcall _uart_Printf
 0966           ;                                       Uart0ReEnable;
 0966 8091C100          lds R24,193
 096A 8061              ori R24,16
 096C 8093C100          sts 193,R24
 0970           ;                                       mainStep = 101;
 0970 85E6              ldi R24,101
 0972 80930100          sts L100,R24
 0976           ;                               }
 0976 22C0              xjmp L173
 0978           L174:
 0978           ; 				else if(ucTmp == INFO_STORE_ERROR)
 0978 4931              cpi R20,25
 097A A9F4              brne L177
 097C           X85:
 097C           ; 				{
 097C           ; 					Uart0ReUnable;
 097C 8091C100          lds R24,193
 0980 8F7E              andi R24,239
 0982 8093C100          sts 193,R24
 0986           ;                                       uart_Printf("!3522 $%4d\r\n", GetNewTestCard);
 0986 20910000          lds R18,_GetNewTestCard
 098A 3327              clr R19
 098C 00E0              ldi R16,<L179
 098E 10E0              ldi R17,>L179
 0990 0E940000          xcall _uart_Printf
 0994           ;                                       Uart0ReEnable;
 0994 8091C100          lds R24,193
 0998 8061              ori R24,16
 099A 8093C100          sts 193,R24
 099E           ;                                       mainStep = 101;
 099E 85E6              ldi R24,101
 09A0 80930100          sts L100,R24
 09A4           ;                               }
 09A4 0BC0              xjmp L173
 09A6           L177:
 09A6           ; 				else
 09A6           ; 				{
 09A6           ; 					mainStep = 1;
 09A6 81E0              ldi R24,1
 09A8 80930100          sts L100,R24
 09AC           ;                                       CardStoreOpenLook = 1;  
 09AC 80930400          sts _CardStoreOpenLook,R24
 09B0           ;                               }
 09B0           ;                       }
 09B0 05C0              xjmp L173
 09B2           L172:
 09B2           ; 			else
 09B2           ; 			{
 09B2           ; 				mainStep = 1;
 09B2 81E0              ldi R24,1
 09B4 80930100          sts L100,R24
 09B8           ;                               CardStoreOpenLook = 1;
 09B8 80930400          sts _CardStoreOpenLook,R24
 09BC           ;                       }
 09BC           L173:
 09BC           ; 			oldStoreState = ucTmp;
 09BC 40930C00          sts L110,R20
 09C0           ;                       break;
 09C0 0C94140D          xjmp L163
 09C4           L180:
 09C4           ; 		case 101:
 09C4           ; 			ucTmp = CardSurplusState[GetNewTestCard-1];
 09C4 80E0              ldi R24,<_CardSurplusState-1
 09C6 90E0              ldi R25,>_CardSurplusState-1
 09C8 E0910000          lds R30,_GetNewTestCard
 09CC FF27              clr R31
 09CE E80F              add R30,R24
 09D0 F91F              adc R31,R25
 09D2 4081              ldd R20,z+0
 09D4           ;                       if(ucTmp != oldStoreState)
 09D4 20900C00          lds R2,L110
 09D8 4215              cp R20,R2
 09DA 11F4              brne X179
 09DC 0C94140D          xjmp L163
 09E0           X179:
 09E0           X86:
 09E0           ; 				mainStep = 100;
 09E0 84E6              ldi R24,100
 09E2 80930100          sts L100,R24
 09E6           ;                       break;
 09E6 0C94140D          xjmp L163
 09EA           L184:
 09EA           ; 		case 1:		// 小车移到片仓前
 09EA           ; 			switch(workStep)
 09EA 60910200          lds R22,L101
 09EE 7727              clr R23
 09F0 6030              cpi R22,0
 09F2 6707              cpc R22,R23
 09F4 89F0              breq L188
 09F6           X87:
 09F6 6130              cpi R22,1
 09F8 E0E0              ldi R30,0
 09FA 7E07              cpc R23,R30
 09FC 09F4              brne X180
 09FE 3BC0              xjmp L192
 0A00           X180:
 0A00           X88:
 0A00 6230              cpi R22,2
 0A02 E0E0              ldi R30,0
 0A04 7E07              cpc R23,R30
 0A06 09F4              brne X181
 0A08 5AC0              xjmp L197
 0A0A           X181:
 0A0A           X89:
 0A0A 6330              cpi R22,3
 0A0C E0E0              ldi R30,0
 0A0E 7E07              cpc R23,R30
 0A10 09F4              brne X182
 0A12 78C0              xjmp L202
 0A14           X182:
 0A14           X90:
 0A14 0C94140D          xjmp L163
 0A18           L188:
 0A18           ; 			{
 0A18           ; 				case 0:
 0A18           ; 					storePos = 494;		// 40mm / 0.081 = 494
 0A18 8EEE              ldi R24,494
 0A1A 91E0              ldi R25,1
 0A1C 90930400          sts L102+1,R25
 0A20 80930300          sts L102,R24
 0A24           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 0A24 8AE0              ldi R24,10
 0A26 8A83              std y+2,R24
 0A28 84E1              ldi R24,20
 0A2A 8883              std y+0,R24
 0A2C 28EC              ldi R18,200
 0A2E 08E0              ldi R16,8
 0A30 0E940000          xcall _SetMotRunPam
 0A34           ;                                       if(CardStoreOpenState & 0x3f)   // 如果片仓开启
 0A34 80912E00          lds R24,_CardStoreOpenState
 0A38 8F73              andi R24,63
 0A3A 91F0              breq L189
 0A3C           X91:
 0A3C           ; 					{
 0A3C           ; 						Uart0ReUnable;
 0A3C 8091C100          lds R24,193
 0A40 8F7E              andi R24,239
 0A42 8093C100          sts 193,R24
 0A46           ;                                               uart_Printf("!3525\r\n");
 0A46 00E0              ldi R16,<L191
 0A48 10E0              ldi R17,>L191
 0A4A 0E940000          xcall _uart_Printf
 0A4E           ;                                               Uart0ReEnable;
 0A4E 8091C100          lds R24,193
 0A52 8061              ori R24,16
 0A54 8093C100          sts 193,R24
 0A58           ;                                               workStep = 2;
 0A58 82E0              ldi R24,2
 0A5A 80930200          sts L101,R24
 0A5E           ;                                               break;
 0A5E E4C7              xjmp L163
 0A60           L189:
 0A60           ; 					}
 0A60           ; 					MotRunTo(MOT_STORE_CARD_MOVE,storePos);			// 	
 0A60 20910300          lds R18,L102
 0A64 30910400          lds R19,L102+1
 0A68 08E0              ldi R16,8
 0A6A 0E940000          xcall _MotRunTo
 0A6E           ;                                       workStep = 1;
 0A6E 81E0              ldi R24,1
 0A70 80930200          sts L101,R24
 0A74           ;                                       break;
 0A74 D9C7              xjmp L163
 0A76           L192:
 0A76           ; 				case 1:
 0A76           ; 					if(CardStoreOpenState & 0x3f)	// 如果片仓开启
 0A76 80912E00          lds R24,_CardStoreOpenState
 0A7A 8F73              andi R24,63
 0A7C A9F0              breq L193
 0A7E           X92:
 0A7E           ; 					{
 0A7E           ; 						MotStop(MOT_STORE_CARD_MOVE);
 0A7E 08E0              ldi R16,8
 0A80 0E940000          xcall _MotStop
 0A84           ;                                               Uart0ReUnable;
 0A84 8091C100          lds R24,193
 0A88 8F7E              andi R24,239
 0A8A 8093C100          sts 193,R24
 0A8E           ;                                               uart_Printf("!3525\r\n");
 0A8E 00E0              ldi R16,<L191
 0A90 10E0              ldi R17,>L191
 0A92 0E940000          xcall _uart_Printf
 0A96           ;                                               Uart0ReEnable;
 0A96 8091C100          lds R24,193
 0A9A 8061              ori R24,16
 0A9C 8093C100          sts 193,R24
 0AA0           ;                                               workStep = 2;
 0AA0 82E0              ldi R24,2
 0AA2 80930200          sts L101,R24
 0AA6           ;                                       }
 0AA6 C0C7              xjmp L163
 0AA8           L193:
 0AA8           ; 					else	// 片仓处于关闭状态，等待片仓小车停止
 0AA8           ; 					{
 0AA8           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 0AA8 08E0              ldi R16,8
 0AAA 0E940000          xcall _GetMotState
 0AAE 602F              mov R22,R16
 0AB0 0130              cpi R16,1
 0AB2 09F0              breq L195
 0AB4           X93:
 0AB4           ; 							break;
 0AB4 B9C7              xjmp L163
 0AB6           L195:
 0AB6           ; 						else
 0AB6           ; 							workStep = 3;
 0AB6 83E0              ldi R24,3
 0AB8 80930200          sts L101,R24
 0ABC           ;                                       }
 0ABC           ;                                       break;
 0ABC B5C7              xjmp L163
 0ABE           L197:
 0ABE           ; 				case 2:		// 片仓处于开启状态，等待片仓关闭后从新启动片仓电机
 0ABE           ; 					if((CardStoreOpenState & 0x3f) == 0)
 0ABE 80912E00          lds R24,_CardStoreOpenState
 0AC2 8F73              andi R24,63
 0AC4 09F0              breq X183
 0AC6 B0C7              xjmp L163
 0AC8           X183:
 0AC8           X94:
 0AC8           ; 					{
 0AC8           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE) + 5;
 0AC8 08E0              ldi R16,8
 0ACA 0E940000          xcall _GetMotPositionOfStep
 0ACE B801              movw R22,R16
 0AD0 6B5F              subi R22,251  ; offset = 5
 0AD2 7F4F              sbci R23,255
 0AD4           ;                                               if(siTmp<storePos)
 0AD4 20900300          lds R2,L102
 0AD8 30900400          lds R3,L102+1
 0ADC 6215              cp R22,R2
 0ADE 7305              cpc R23,R3
 0AE0 6CF4              brge L200
 0AE2           X95:
 0AE2           ; 						{
 0AE2           ; 							MotRunTo(MOT_STORE_CARD_MOVE,storePos);
 0AE2 9101              movw R18,R2
 0AE4 08E0              ldi R16,8
 0AE6 0E940000          xcall _MotRunTo
 0AEA           ;                                                       SetDelayTime(MOT_STORE_CARD_MOVE,1);
 0AEA 21E0              ldi R18,1
 0AEC 30E0              ldi R19,0
 0AEE 08E0              ldi R16,8
 0AF0 0E940000          xcall _SetDelayTime
 0AF4           ;                                                       workStep = 1;
 0AF4 81E0              ldi R24,1
 0AF6 80930200          sts L101,R24
 0AFA           ;                                               }
 0AFA 96C7              xjmp L163
 0AFC           L200:
 0AFC           ; 						else
 0AFC           ; 						{
 0AFC           ; 							workStep = 3;
 0AFC 83E0              ldi R24,3
 0AFE 80930200          sts L101,R24
 0B02           ;                                               }
 0B02           ;                                       }
 0B02           ;                                       break;
 0B02 92C7              xjmp L163
 0B04           L202:
 0B04           ; 				case 3:	// 片仓取片小车已运行到片仓起始处
 0B04           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,10);
 0B04 2AE0              ldi R18,10
 0B06 30E0              ldi R19,0
 0B08 08E0              ldi R16,8
 0B0A 0E940000          xcall _SetDelayTime
 0B0E           ;                               //      CardStoreOpenLook = 1;
 0B0E           ;                                       workStep = 0;
 0B0E 2224              clr R2
 0B10 20920200          sts L101,R2
 0B14           ;                                       mainStep = 2;
 0B14 82E0              ldi R24,2
 0B16 80930100          sts L100,R24
 0B1A           ;                                       break;
 0B1A           ;                               }
 0B1A           ;                       break;
 0B1A 86C7              xjmp L163
 0B1C           L203:
 0B1C           ; 		case 2:		// 小车移动到取片起始位置
 0B1C           ; 			switch(workStep)
 0B1C A0900200          lds R10,L101
 0B20 BB24              clr R11
 0B22 AA20              tst R10
 0B24 11F4              brne X96
 0B26 BB20              tst R11
 0B28 B1F0              breq L207
 0B2A           X96:
 0B2A C501              movw R24,R10
 0B2C 8130              cpi R24,1
 0B2E E0E0              ldi R30,0
 0B30 9E07              cpc R25,R30
 0B32 09F4              brne X184
 0B34 41C0              xjmp L211
 0B36           X184:
 0B36           X97:
 0B36 8230              cpi R24,2
 0B38 E0E0              ldi R30,0
 0B3A 9E07              cpc R25,R30
 0B3C 09F4              brne X185
 0B3E 60C0              xjmp L216
 0B40           X185:
 0B40           X98:
 0B40 8330              cpi R24,3
 0B42 E0E0              ldi R30,0
 0B44 9E07              cpc R25,R30
 0B46 09F4              brne X186
 0B48 7FC0              xjmp L221
 0B4A           X186:
 0B4A           X99:
 0B4A 8430              cpi R24,4
 0B4C E0E0              ldi R30,0
 0B4E 9E07              cpc R25,R30
 0B50 09F4              brne X187
 0B52 89C0              xjmp L222
 0B54           X187:
 0B54           X100:
 0B54 69C7              xjmp L163
 0B56           L207:
 0B56           ; 			{
 0B56           ; 				case 0:
 0B56           ; 					if(CardStoreOpenState & 0x3f)
 0B56 80912E00          lds R24,_CardStoreOpenState
 0B5A 8F73              andi R24,63
 0B5C 91F0              breq L208
 0B5E           X101:
 0B5E           ; 					{
 0B5E           ; 						Uart0ReUnable;
 0B5E 8091C100          lds R24,193
 0B62 8F7E              andi R24,239
 0B64 8093C100          sts 193,R24
 0B68           ;                                               uart_Printf("!3526\r\n");
 0B68 00E0              ldi R16,<L210
 0B6A 10E0              ldi R17,>L210
 0B6C 0E940000          xcall _uart_Printf
 0B70           ;                                               Uart0ReEnable;
 0B70 8091C100          lds R24,193
 0B74 8061              ori R24,16
 0B76 8093C100          sts 193,R24
 0B7A           ;                                               workStep = 2;
 0B7A 82E0              ldi R24,2
 0B7C 80930200          sts L101,R24
 0B80           ;                                               break;
 0B80 53C7              xjmp L163
 0B82           L208:
 0B82           ; 					}
 0B82           ; 					storePos = CalCardStorePos(GetNewTestCard);	
 0B82 00910000          lds R16,_GetNewTestCard
 0B86 15DB              xcall _CalCardStorePos
 0B88 5801              movw R10,R16
 0B8A B0920400          sts L102+1,R11
 0B8E A0920300          sts L102,R10
 0B92           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 0B92 8AE0              ldi R24,10
 0B94 8A83              std y+2,R24
 0B96 84E1              ldi R24,20
 0B98 8883              std y+0,R24
 0B9A 28EC              ldi R18,200
 0B9C 08E0              ldi R16,8
 0B9E 0E940000          xcall _SetMotRunPam
 0BA2           ;                                       MotRunTo(MOT_STORE_CARD_MOVE,storePos);                 //      
 0BA2 20910300          lds R18,L102
 0BA6 30910400          lds R19,L102+1
 0BAA 08E0              ldi R16,8
 0BAC 0E940000          xcall _MotRunTo
 0BB0           ;                                       workStep = 1;
 0BB0 81E0              ldi R24,1
 0BB2 80930200          sts L101,R24
 0BB6           ;                                       break;
 0BB6 38C7              xjmp L163
 0BB8           L211:
 0BB8           ; 				case 1:
 0BB8           ; 					if(CardStoreOpenState & 0x3f)
 0BB8 80912E00          lds R24,_CardStoreOpenState
 0BBC 8F73              andi R24,63
 0BBE A9F0              breq L212
 0BC0           X102:
 0BC0           ; 					{
 0BC0           ; 						MotStop(MOT_STORE_CARD_MOVE);
 0BC0 08E0              ldi R16,8
 0BC2 0E940000          xcall _MotStop
 0BC6           ;                                               Uart0ReUnable;
 0BC6 8091C100          lds R24,193
 0BCA 8F7E              andi R24,239
 0BCC 8093C100          sts 193,R24
 0BD0           ;                                               uart_Printf("!3526\r\n");
 0BD0 00E0              ldi R16,<L210
 0BD2 10E0              ldi R17,>L210
 0BD4 0E940000          xcall _uart_Printf
 0BD8           ;                                               Uart0ReEnable;
 0BD8 8091C100          lds R24,193
 0BDC 8061              ori R24,16
 0BDE 8093C100          sts 193,R24
 0BE2           ;                                               workStep = 2;
 0BE2 82E0              ldi R24,2
 0BE4 80930200          sts L101,R24
 0BE8           ;                                       }
 0BE8 1FC7              xjmp L163
 0BEA           L212:
 0BEA           ; 					else
 0BEA           ; 					{
 0BEA           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 0BEA 08E0              ldi R16,8
 0BEC 0E940000          xcall _GetMotState
 0BF0 A02E              mov R10,R16
 0BF2 0130              cpi R16,1
 0BF4 09F0              breq L214
 0BF6           X103:
 0BF6           ; 							break;
 0BF6 18C7              xjmp L163
 0BF8           L214:
 0BF8           ; 						else
 0BF8           ; 							workStep = 3;
 0BF8 83E0              ldi R24,3
 0BFA 80930200          sts L101,R24
 0BFE           ;                                       }
 0BFE           ;                                       break;
 0BFE 14C7              xjmp L163
 0C00           L216:
 0C00           ; 				case 2:		// 片仓处于开启状态，等待片仓关闭后从新启动片仓电机
 0C00           ; 					if((CardStoreOpenState & 0x3f) == 0)
 0C00 80912E00          lds R24,_CardStoreOpenState
 0C04 8F73              andi R24,63
 0C06 09F0              breq X188
 0C08 0FC7              xjmp L163
 0C0A           X188:
 0C0A           X104:
 0C0A           ; 					{
 0C0A           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE) + 5;
 0C0A 08E0              ldi R16,8
 0C0C 0E940000          xcall _GetMotPositionOfStep
 0C10 5801              movw R10,R16
 0C12 B501              movw R22,R10
 0C14 6B5F              subi R22,251  ; offset = 5
 0C16 7F4F              sbci R23,255
 0C18           ;                                               if(siTmp<storePos)
 0C18 20900300          lds R2,L102
 0C1C 30900400          lds R3,L102+1
 0C20 6215              cp R22,R2
 0C22 7305              cpc R23,R3
 0C24 6CF4              brge L219
 0C26           X105:
 0C26           ; 						{
 0C26           ; 							MotRunTo(MOT_STORE_CARD_MOVE,storePos);
 0C26 9101              movw R18,R2
 0C28 08E0              ldi R16,8
 0C2A 0E940000          xcall _MotRunTo
 0C2E           ;                                                       SetDelayTime(MOT_STORE_CARD_MOVE,1);
 0C2E 21E0              ldi R18,1
 0C30 30E0              ldi R19,0
 0C32 08E0              ldi R16,8
 0C34 0E940000          xcall _SetDelayTime
 0C38           ;                                                       workStep = 1;
 0C38 81E0              ldi R24,1
 0C3A 80930200          sts L101,R24
 0C3E           ;                                               }
 0C3E F4C6              xjmp L163
 0C40           L219:
 0C40           ; 						else
 0C40           ; 						{
 0C40           ; 							workStep = 3;
 0C40 83E0              ldi R24,3
 0C42 80930200          sts L101,R24
 0C46           ;                                               }
 0C46           ;                                       }
 0C46           ;                                       break;
 0C46 F0C6              xjmp L163
 0C48           L221:
 0C48           ; 				case 3:	// 片仓取片小车已运行到目的地
 0C48           ; 					MotInitCheck(MOT_CARD_LOAD);
 0C48 04E0              ldi R16,4
 0C4A 0E940000          xcall _MotInitCheck
 0C4E           ;                                       waitMotCardLoad = 1;
 0C4E 81E0              ldi R24,1
 0C50 80930900          sts L107,R24
 0C54           ;                                       SetDelayTime(MOT_STORE_CARD_MOVE,5);
 0C54 25E0              ldi R18,5
 0C56 30E0              ldi R19,0
 0C58 08E0              ldi R16,8
 0C5A 0E940000          xcall _SetDelayTime
 0C5E           ;                                       workStep = 4;
 0C5E 84E0              ldi R24,4
 0C60 80930200          sts L101,R24
 0C64           ;                                       break;
 0C64 E1C6              xjmp L163
 0C66           L222:
 0C66           ; 				case 4:
 0C66           ; 					MotRunTo(MOT_CARD_LOAD,-25);
 0C66 27EE              ldi R18,-25
 0C68 3FEF              ldi R19,-1
 0C6A 04E0              ldi R16,4
 0C6C 0E940000          xcall _MotRunTo
 0C70           ;                                       waitMotCardLoad = 1;
 0C70 81E0              ldi R24,1
 0C72 80930900          sts L107,R24
 0C76           ;                                       workStep = 0;
 0C76 2224              clr R2
 0C78 20920200          sts L101,R2
 0C7C           ;                                       mainStep = 3;
 0C7C 83E0              ldi R24,3
 0C7E 80930100          sts L100,R24
 0C82           ;                                       break;
 0C82           ;                               }
 0C82           ;                       break;
 0C82 D2C6              xjmp L163
 0C84           L223:
 0C84           ; 		case 3:// 钩片抬起，小车钩片前进，使之进入钩片道槽
 0C84           ; 			switch(workStep)
 0C84 A0900200          lds R10,L101
 0C88 BB24              clr R11
 0C8A AA20              tst R10
 0C8C 19F4              brne X106
 0C8E BB20              tst R11
 0C90 09F4              brne X189
 0C92 33C0              xjmp L227
 0C94           X189:
 0C94           X106:
 0C94 C501              movw R24,R10
 0C96 8130              cpi R24,1
 0C98 E0E0              ldi R30,0
 0C9A 9E07              cpc R25,R30
 0C9C 09F4              brne X190
 0C9E 4EC0              xjmp L229
 0CA0           X190:
 0CA0           X107:
 0CA0 8230              cpi R24,2
 0CA2 E0E0              ldi R30,0
 0CA4 9E07              cpc R25,R30
 0CA6 09F4              brne X191
 0CA8 51C0              xjmp L230
 0CAA           X191:
 0CAA           X108:
 0CAA 8330              cpi R24,3
 0CAC E0E0              ldi R30,0
 0CAE 9E07              cpc R25,R30
 0CB0 09F4              brne X192
 0CB2 5FC0              xjmp L231
 0CB4           X192:
 0CB4           X109:
 0CB4 8430              cpi R24,4
 0CB6 E0E0              ldi R30,0
 0CB8 9E07              cpc R25,R30
 0CBA 09F4              brne X193
 0CBC 66C0              xjmp L232
 0CBE           X193:
 0CBE           X110:
 0CBE 8530              cpi R24,5
 0CC0 E0E0              ldi R30,0
 0CC2 9E07              cpc R25,R30
 0CC4 09F4              brne X194
 0CC6 6DC0              xjmp L233
 0CC8           X194:
 0CC8           X111:
 0CC8 8630              cpi R24,6
 0CCA E0E0              ldi R30,0
 0CCC 9E07              cpc R25,R30
 0CCE 09F4              brne X195
 0CD0 74C0              xjmp L234
 0CD2           X195:
 0CD2           X112:
 0CD2 8730              cpi R24,7
 0CD4 E0E0              ldi R30,0
 0CD6 9E07              cpc R25,R30
 0CD8 09F4              brne X196
 0CDA 7BC0              xjmp L235
 0CDC           X196:
 0CDC           X113:
 0CDC 8830              cpi R24,8
 0CDE E0E0              ldi R30,0
 0CE0 9E07              cpc R25,R30
 0CE2 09F4              brne X197
 0CE4 7FC0              xjmp L236
 0CE6           X197:
 0CE6           X114:
 0CE6 8930              cpi R24,9
 0CE8 E0E0              ldi R30,0
 0CEA 9E07              cpc R25,R30
 0CEC 09F4              brne X198
 0CEE 86C0              xjmp L237
 0CF0           X198:
 0CF0           X115:
 0CF0 8A30              cpi R24,10
 0CF2 E0E0              ldi R30,0
 0CF4 9E07              cpc R25,R30
 0CF6 59F0              breq L228
 0CF8           X116:
 0CF8 97C6              xjmp L163
 0CFA           L227:
 0CFA           ; 			{
 0CFA           ; 				/*
 0CFA           ; 				case 0:	
 0CFA           ; 					SetCardTrolleyState(1);
 0CFA           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,16,10,CURRENT_STORE_MOVE);
 0CFA           ; 					MotRun(MOT_STORE_CARD_MOVE,-98);
 0CFA           ; 					waitMotCardTrolley = 1;
 0CFA           ; 					workStep = 1;
 0CFA           ; 					break;
 0CFA           ; 				*/
 0CFA           ; 				case 0:
 0CFA           ; 					SetCardTrolleyState(1);
 0CFA 01E0              ldi R16,1
 0CFC 88DA              xcall _SetCardTrolleyState
 0CFE           ;                                       SetDelayTime(MOT_STORE_CARD_MOVE,2);    // 延时200ms
 0CFE 22E0              ldi R18,2
 0D00 30E0              ldi R19,0
 0D02 08E0              ldi R16,8
 0D04 0E940000          xcall _SetDelayTime
 0D08           ;                                       workStep = 10;
 0D08 8AE0              ldi R24,10
 0D0A 80930200          sts L101,R24
 0D0E           L228:
 0D0E           ; 				case 10:
 0D0E           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,16,10,CURRENT_STORE_MOVE);
 0D0E 8AE0              ldi R24,10
 0D10 8A83              std y+2,R24
 0D12 8883              std y+0,R24
 0D14 20E1              ldi R18,16
 0D16 08E0              ldi R16,8
 0D18 0E940000          xcall _SetMotRunPam
 0D1C           ;                                       MotRun(MOT_STORE_CARD_MOVE,-98);
 0D1C 2EE9              ldi R18,-98
 0D1E 3FEF              ldi R19,-1
 0D20 08E0              ldi R16,8
 0D22 0E940000          xcall _MotRun
 0D26           ;                                       SetDelayTime(MOT_STORE_CARD_MOVE,2);    // 延时200ms
 0D26 22E0              ldi R18,2
 0D28 30E0              ldi R19,0
 0D2A 08E0              ldi R16,8
 0D2C 0E940000          xcall _SetDelayTime
 0D30           ;                                       waitMotCardTrolley = 1;
 0D30 81E0              ldi R24,1
 0D32 80930800          sts L106,R24
 0D36           ;                                       workStep = 1;
 0D36 80930200          sts L101,R24
 0D3A           ;                                       break;
 0D3A 76C6              xjmp L163
 0D3C           L229:
 0D3C           ; 				case 1:
 0D3C           ; 					SetCardTrolleyState(0);
 0D3C 0027              clr R16
 0D3E 67DA              xcall _SetCardTrolleyState
 0D40           ;                                       SetBeepAck();
 0D40 0E940000          xcall _SetBeepAck
 0D44           ;                                       workStep = 2;
 0D44 82E0              ldi R24,2
 0D46 80930200          sts L101,R24
 0D4A           ;                                       break;
 0D4A 6EC6              xjmp L163
 0D4C           L230:
 0D4C           ; 				case 2:		
 0D4C           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,100,10,CURRENT_STORE_MOVE);
 0D4C 8AE0              ldi R24,10
 0D4E 8A83              std y+2,R24
 0D50 8883              std y+0,R24
 0D52 24E6              ldi R18,100
 0D54 08E0              ldi R16,8
 0D56 0E940000          xcall _SetMotRunPam
 0D5A           ;                                       MotRun(MOT_STORE_CARD_MOVE,-(235 + 70));        
 0D5A 2FEC              ldi R18,-305
 0D5C 3EEF              ldi R19,-2
 0D5E 08E0              ldi R16,8
 0D60 0E940000          xcall _MotRun
 0D64           ;                                       waitMotCardTrolley = 1;
 0D64 81E0              ldi R24,1
 0D66 80930800          sts L106,R24
 0D6A           ;                               //      workStep = 3;
 0D6A           ;                                       workStep = 7;
 0D6A 87E0              ldi R24,7
 0D6C 80930200          sts L101,R24
 0D70           ;                                       break;
 0D70 5BC6              xjmp L163
 0D72           L231:
 0D72           ; 				case 3:
 0D72           ; 					MotRun(MOT_STORE_CARD_MOVE,86);		
 0D72 26E5              ldi R18,86
 0D74 30E0              ldi R19,0
 0D76 08E0              ldi R16,8
 0D78 0E940000          xcall _MotRun
 0D7C           ;                                       waitMotCardTrolley = 1;
 0D7C 81E0              ldi R24,1
 0D7E 80930800          sts L106,R24
 0D82           ;                                       workStep = 4;
 0D82 84E0              ldi R24,4
 0D84 80930200          sts L101,R24
 0D88           ;                                       break;
 0D88 4FC6              xjmp L163
 0D8A           L232:
 0D8A           ; 				case 4:
 0D8A           ; 					MotRun(MOT_STORE_CARD_MOVE,-86);			
 0D8A 2AEA              ldi R18,-86
 0D8C 3FEF              ldi R19,-1
 0D8E 08E0              ldi R16,8
 0D90 0E940000          xcall _MotRun
 0D94           ;                                       waitMotCardTrolley = 1;
 0D94 81E0              ldi R24,1
 0D96 80930800          sts L106,R24
 0D9A           ;                                       workStep = 5;
 0D9A 85E0              ldi R24,5
 0D9C 80930200          sts L101,R24
 0DA0           ;                                       break;
 0DA0 43C6              xjmp L163
 0DA2           L233:
 0DA2           ; 				case 5:
 0DA2           ; 					MotRun(MOT_STORE_CARD_MOVE,99);	
 0DA2 23E6              ldi R18,99
 0DA4 30E0              ldi R19,0
 0DA6 08E0              ldi R16,8
 0DA8 0E940000          xcall _MotRun
 0DAC           ;                                       waitMotCardTrolley = 1;
 0DAC 81E0              ldi R24,1
 0DAE 80930800          sts L106,R24
 0DB2           ;                                       workStep = 6;
 0DB2 86E0              ldi R24,6
 0DB4 80930200          sts L101,R24
 0DB8           ;                                       break;
 0DB8 37C6              xjmp L163
 0DBA           L234:
 0DBA           ; 				case 6:
 0DBA           ; 					MotRun(MOT_STORE_CARD_MOVE,-150);
 0DBA 2AE6              ldi R18,-150
 0DBC 3FEF              ldi R19,-1
 0DBE 08E0              ldi R16,8
 0DC0 0E940000          xcall _MotRun
 0DC4           ;                                       waitMotCardTrolley = 1;
 0DC4 81E0              ldi R24,1
 0DC6 80930800          sts L106,R24
 0DCA           ;                                       workStep = 7;
 0DCA 87E0              ldi R24,7
 0DCC 80930200          sts L101,R24
 0DD0           ;                                       break;
 0DD0 2BC6              xjmp L163
 0DD2           L235:
 0DD2           ; 				case 7:
 0DD2           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,10);
 0DD2 2AE0              ldi R18,10
 0DD4 30E0              ldi R19,0
 0DD6 08E0              ldi R16,8
 0DD8 0E940000          xcall _SetDelayTime
 0DDC           ;                                       workStep = 8;
 0DDC 88E0              ldi R24,8
 0DDE 80930200          sts L101,R24
 0DE2           ;                                       break;
 0DE2 22C6              xjmp L163
 0DE4           L236:
 0DE4           ; 				case 8:
 0DE4           ; 				//	SetCardTrolleyState(2);
 0DE4           ; 					MotRun(MOT_STORE_CARD_MOVE,320);
 0DE4 20E4              ldi R18,320
 0DE6 31E0              ldi R19,1
 0DE8 08E0              ldi R16,8
 0DEA 0E940000          xcall _MotRun
 0DEE           ;                                       waitMotCardTrolley = 1;
 0DEE 81E0              ldi R24,1
 0DF0 80930800          sts L106,R24
 0DF4           ;                                       workStep = 9;
 0DF4 89E0              ldi R24,9
 0DF6 80930200          sts L101,R24
 0DFA           ;                                       break;
 0DFA 16C6              xjmp L163
 0DFC           L237:
 0DFC           ; 				case 9:
 0DFC           ; 				//	SetCardTrolleyState(0);
 0DFC           ; 					workStep = 0;
 0DFC 2224              clr R2
 0DFE 20920200          sts L101,R2
 0E02           ;                                       mainStep = 5;
 0E02 85E0              ldi R24,5
 0E04 80930100          sts L100,R24
 0E08           ;                                       break;
 0E08           ;                               default:
 0E08           ;                                       break;
 0E08           ;                               }
 0E08           ;                       break;
 0E08 0FC6              xjmp L163
 0E0A           L238:
 0E0A           ; 		case 5:	// 运行到离开片仓位置
 0E0A           ; 			switch(workStep){
 0E0A A0900200          lds R10,L101
 0E0E BB24              clr R11
 0E10 C501              movw R24,R10
 0E12 8030              cpi R24,0
 0E14 E0E0              ldi R30,0
 0E16 9E07              cpc R25,R30
 0E18 0CF4              brge X199
 0E1A 06C6              xjmp L163
 0E1C           X199:
 0E1C           X117:
 0E1C 8DE1              ldi R24,29
 0E1E 8A15              cp R24,R10
 0E20 9B05              cpc R25,R11
 0E22 0CF4              brge X200
 0E24 01C6              xjmp L163
 0E26           X200:
 0E26           X118:
 0E26 80E0              ldi R24,<L314
 0E28 90E0              ldi R25,>L314
 0E2A F501              movw R30,R10
 0E2C EE0F              lsl R30
 0E2E FF1F              rol R31
 0E30 E80F              add R30,R24
 0E32 F91F              adc R31,R25
 0E34 2790              elpm R2,Z+
 0E36 3690              elpm R3,Z
 0E38 F101              movw R30,R2
 0E3A 0994               ijmp
 0E3C           L242:
 0E3C           ; 				case 0:
 0E3C           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 0E3C 8AE0              ldi R24,10
 0E3E 8A83              std y+2,R24
 0E40 84E1              ldi R24,20
 0E42 8883              std y+0,R24
 0E44 28EC              ldi R18,200
 0E46 08E0              ldi R16,8
 0E48 0E940000          xcall _SetMotRunPam
 0E4C           ;                                       if(CardStoreOpenState & 0x3f)
 0E4C 80912E00          lds R24,_CardStoreOpenState
 0E50 8F73              andi R24,63
 0E52 91F0              breq L243
 0E54           X119:
 0E54           ; 					{	
 0E54           ; 						Uart0ReUnable;
 0E54 8091C100          lds R24,193
 0E58 8F7E              andi R24,239
 0E5A 8093C100          sts 193,R24
 0E5E           ;                                               uart_Printf("!3527\r\n");
 0E5E 00E0              ldi R16,<L245
 0E60 10E0              ldi R17,>L245
 0E62 0E940000          xcall _uart_Printf
 0E66           ;                                               Uart0ReEnable;
 0E66 8091C100          lds R24,193
 0E6A 8061              ori R24,16
 0E6C 8093C100          sts 193,R24
 0E70           ;                                               workStep = 2;
 0E70 82E0              ldi R24,2
 0E72 80930200          sts L101,R24
 0E76           ;                                               break;
 0E76 D8C5              xjmp L163
 0E78           L243:
 0E78           ; 					}
 0E78           ; 					if(WaitPhotoFlag == 0)
 0E78 20900000          lds R2,_WaitPhotoFlag
 0E7C 2220              tst R2
 0E7E 31F4              brne L246
 0E80           X120:
 0E80           ; 						MotRunTo(MOT_STORE_CARD_MOVE,494);	
 0E80 2EEE              ldi R18,494
 0E82 31E0              ldi R19,1
 0E84 08E0              ldi R16,8
 0E86 0E940000          xcall _MotRunTo
 0E8A 05C0              xjmp L247
 0E8C           L246:
 0E8C           ; 					else
 0E8C           ; 						MotRunTo(MOT_STORE_CARD_MOVE,0);	
 0E8C 2227              clr R18
 0E8E 3327              clr R19
 0E90 08E0              ldi R16,8
 0E92 0E940000          xcall _MotRunTo
 0E96           L247:
 0E96           ; 					workStep = 1;
 0E96 81E0              ldi R24,1
 0E98 80930200          sts L101,R24
 0E9C           ;                                       break;
 0E9C C5C5              xjmp L163
 0E9E           L248:
 0E9E           ; 				case 1:
 0E9E           ; 					if(CardStoreOpenState & 0x3f)
 0E9E 80912E00          lds R24,_CardStoreOpenState
 0EA2 8F73              andi R24,63
 0EA4 A9F0              breq L249
 0EA6           X121:
 0EA6           ; 					{
 0EA6           ; 						MotStop(MOT_STORE_CARD_MOVE);
 0EA6 08E0              ldi R16,8
 0EA8 0E940000          xcall _MotStop
 0EAC           ;                                               Uart0ReUnable;
 0EAC 8091C100          lds R24,193
 0EB0 8F7E              andi R24,239
 0EB2 8093C100          sts 193,R24
 0EB6           ;                                               uart_Printf("!3527\r\n");
 0EB6 00E0              ldi R16,<L245
 0EB8 10E0              ldi R17,>L245
 0EBA 0E940000          xcall _uart_Printf
 0EBE           ;                                               Uart0ReEnable;
 0EBE 8091C100          lds R24,193
 0EC2 8061              ori R24,16
 0EC4 8093C100          sts 193,R24
 0EC8           ;                                               workStep = 2;
 0EC8 82E0              ldi R24,2
 0ECA 80930200          sts L101,R24
 0ECE           ;                                       }
 0ECE ACC5              xjmp L163
 0ED0           L249:
 0ED0           ; 					else
 0ED0           ; 					{	
 0ED0           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 0ED0 08E0              ldi R16,8
 0ED2 0E940000          xcall _GetMotState
 0ED6 A02E              mov R10,R16
 0ED8 0130              cpi R16,1
 0EDA 09F0              breq L251
 0EDC           X122:
 0EDC           ; 							break;
 0EDC A5C5              xjmp L163
 0EDE           L251:
 0EDE           ; 						else
 0EDE           ; 						{
 0EDE           ; 							if(WaitPhotoFlag == 0)
 0EDE 20900000          lds R2,_WaitPhotoFlag
 0EE2 2220              tst R2
 0EE4 21F4              brne L253
 0EE6           X123:
 0EE6           ; 								workStep = 3;
 0EE6 83E0              ldi R24,3
 0EE8 80930200          sts L101,R24
 0EEC 9DC5              xjmp L163
 0EEE           L253:
 0EEE           ; 							else
 0EEE           ; 							{
 0EEE           ; 								//workStep = 20;
 0EEE           ; 								//SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 0EEE           ; 								//workStep = 26;	// 2016-11-18
 0EEE           ; 								workStep = 20;		// 2016-11-18
 0EEE 84E1              ldi R24,20
 0EF0 80930200          sts L101,R24
 0EF4           ;                                                       }
 0EF4           ;                                               }
 0EF4           ;                                       }
 0EF4           ;                                       break;
 0EF4 99C5              xjmp L163
 0EF6           L255:
 0EF6           ; 				case 2:		
 0EF6           ; 					if((CardStoreOpenState & 0x3f) == 0)
 0EF6 80912E00          lds R24,_CardStoreOpenState
 0EFA 8F73              andi R24,63
 0EFC 09F0              breq X201
 0EFE 94C5              xjmp L163
 0F00           X201:
 0F00           X124:
 0F00           ; 					{	
 0F00           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE);
 0F00 08E0              ldi R16,8
 0F02 0E940000          xcall _GetMotPositionOfStep
 0F06 5801              movw R10,R16
 0F08 B501              movw R22,R10
 0F0A           ;                                               if(WaitPhotoFlag == 0)
 0F0A 20900000          lds R2,_WaitPhotoFlag
 0F0E 2220              tst R2
 0F10 F9F4              brne L258
 0F12           X125:
 0F12           ; 						{
 0F12           ; 							if(siTmp>(494+20))
 0F12 82E0              ldi R24,514
 0F14 92E0              ldi R25,2
 0F16 8017              cp R24,R16
 0F18 9107              cpc R25,R17
 0F1A 74F4              brge L260
 0F1C           X126:
 0F1C           ; 							{
 0F1C           ; 								MotRunTo(MOT_STORE_CARD_MOVE,494);
 0F1C 2EEE              ldi R18,494
 0F1E 31E0              ldi R19,1
 0F20 08E0              ldi R16,8
 0F22 0E940000          xcall _MotRunTo
 0F26           ;                                                               SetDelayTime(MOT_STORE_CARD_MOVE,1);
 0F26 21E0              ldi R18,1
 0F28 30E0              ldi R19,0
 0F2A 08E0              ldi R16,8
 0F2C 0E940000          xcall _SetDelayTime
 0F30           ;                                                               workStep = 1;
 0F30 81E0              ldi R24,1
 0F32 80930200          sts L101,R24
 0F36           ;                                                       }
 0F36 78C5              xjmp L163
 0F38           L260:
 0F38           ; 							else
 0F38           ; 							{
 0F38           ; 								workStep = 3;
 0F38 83E0              ldi R24,3
 0F3A 80930200          sts L101,R24
 0F3E           ;                                                               SetMotRunPam(MOT_STORE_CARD_MOVE,100,20,CURRENT_STORE_MOVE);
 0F3E 8AE0              ldi R24,10
 0F40 8A83              std y+2,R24
 0F42 84E1              ldi R24,20
 0F44 8883              std y+0,R24
 0F46 24E6              ldi R18,100
 0F48 08E0              ldi R16,8
 0F4A 0E940000          xcall _SetMotRunPam
 0F4E           ;                                                       }
 0F4E           ;                                               }
 0F4E 6CC5              xjmp L163
 0F50           L258:
 0F50           ; 						else
 0F50           ; 						{
 0F50           ; 							if(siTmp > 0)
 0F50 2224              clr R2
 0F52 3324              clr R3
 0F54 2616              cp R2,R22
 0F56 3706              cpc R3,R23
 0F58 74F4              brge L262
 0F5A           X127:
 0F5A           ; 							{
 0F5A           ; 								MotRunTo(MOT_STORE_CARD_MOVE,0);
 0F5A 2227              clr R18
 0F5C 3327              clr R19
 0F5E 08E0              ldi R16,8
 0F60 0E940000          xcall _MotRunTo
 0F64           ;                                                               SetDelayTime(MOT_STORE_CARD_MOVE,1);
 0F64 21E0              ldi R18,1
 0F66 30E0              ldi R19,0
 0F68 08E0              ldi R16,8
 0F6A 0E940000          xcall _SetDelayTime
 0F6E           ;                                                               workStep = 1;
 0F6E 81E0              ldi R24,1
 0F70 80930200          sts L101,R24
 0F74           ;                                                       }
 0F74 59C5              xjmp L163
 0F76           L262:
 0F76           ; 							else
 0F76           ; 							{
 0F76           ; 								//workStep = 20;
 0F76           ; 								//SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 0F76           ; 								//workStep = 26;	// 2016-11-18
 0F76           ; 								workStep = 20;		// 2016-11-18
 0F76 84E1              ldi R24,20
 0F78 80930200          sts L101,R24
 0F7C           ;                                                       }
 0F7C           ;                                               }
 0F7C           ;                                       }
 0F7C           ;                                       break;
 0F7C 55C5              xjmp L163
 0F7E           L264:
 0F7E           ; 				case 20:
 0F7E           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 0F7E 8AE0              ldi R24,10
 0F80 8A83              std y+2,R24
 0F82 85E0              ldi R24,5
 0F84 8883              std y+0,R24
 0F86 22E3              ldi R18,50
 0F88 08E0              ldi R16,8
 0F8A 0E940000          xcall _SetMotRunPam
 0F8E           ;                                       MotRunTo(MOT_STORE_CARD_MOVE,70);
 0F8E 26E4              ldi R18,70
 0F90 30E0              ldi R19,0
 0F92 08E0              ldi R16,8
 0F94 0E940000          xcall _MotRunTo
 0F98           ;                                       waitMotCardTrolley = 1;
 0F98 81E0              ldi R24,1
 0F9A 80930800          sts L106,R24
 0F9E           ;                                       workStep = 21;
 0F9E 85E1              ldi R24,21
 0FA0 80930200          sts L101,R24
 0FA4           ;                                       break;
 0FA4 41C5              xjmp L163
 0FA6           L265:
 0FA6           ; 				case 21:
 0FA6           ; 					SetMotRunPam(MOT_CARD_LOAD,30,5,CURRENT_CARD_LOAD);
 0FA6 84E0              ldi R24,4
 0FA8 8A83              std y+2,R24
 0FAA 85E0              ldi R24,5
 0FAC 8883              std y+0,R24
 0FAE 2EE1              ldi R18,30
 0FB0 04E0              ldi R16,4
 0FB2 0E940000          xcall _SetMotRunPam
 0FB6           ;                                       //MotRunTo(MOT_CARD_LOAD,55);
 0FB6           ;                                       MotRunTo(MOT_CARD_LOAD,30);
 0FB6 2EE1              ldi R18,30
 0FB8 30E0              ldi R19,0
 0FBA 04E0              ldi R16,4
 0FBC 0E940000          xcall _MotRunTo
 0FC0           ;                                       waitMotCardLoad = 1;
 0FC0 81E0              ldi R24,1
 0FC2 80930900          sts L107,R24
 0FC6           ;                                       workStep = 22;
 0FC6 86E1              ldi R24,22
 0FC8 80930200          sts L101,R24
 0FCC           ;                                       break;
 0FCC 2DC5              xjmp L163
 0FCE           L266:
 0FCE           ; 				case 22:
 0FCE           ; 					SetDelayTime(MOT_CARD_LOAD,5);
 0FCE 25E0              ldi R18,5
 0FD0 30E0              ldi R19,0
 0FD2 04E0              ldi R16,4
 0FD4 0E940000          xcall _SetDelayTime
 0FD8           ;                                       workStep = 23;
 0FD8 87E1              ldi R24,23
 0FDA 80930200          sts L101,R24
 0FDE           ;                                       break;
 0FDE 24C5              xjmp L163
 0FE0           L267:
 0FE0           ; 				case 23:
 0FE0           ; 					MotRunTo(MOT_CARD_LOAD,20);
 0FE0 24E1              ldi R18,20
 0FE2 30E0              ldi R19,0
 0FE4 04E0              ldi R16,4
 0FE6 0E940000          xcall _MotRunTo
 0FEA           ;                                       waitMotCardLoad = 1;
 0FEA 81E0              ldi R24,1
 0FEC 80930900          sts L107,R24
 0FF0           ;                                       SetDelayTime(MOT_CARD_LOAD,5);
 0FF0 25E0              ldi R18,5
 0FF2 30E0              ldi R19,0
 0FF4 04E0              ldi R16,4
 0FF6 0E940000          xcall _SetDelayTime
 0FFA           ;                                       workStep = 24;
 0FFA 88E1              ldi R24,24
 0FFC 80930200          sts L101,R24
 1000           ;                                       break;
 1000 13C5              xjmp L163
 1002           L268:
 1002           ; 				case 24:
 1002           ; 					siTmp = GetCardScanfPos(); 
 1002 0E94A711          xcall _GetCardScanfPos
 1006 5801              movw R10,R16
 1008 B501              movw R22,R10
 100A           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,250,20,CURRENT_STORE_MOVE);
 100A 8AE0              ldi R24,10
 100C 8A83              std y+2,R24
 100E 84E1              ldi R24,20
 1010 8883              std y+0,R24
 1012 2AEF              ldi R18,250
 1014 08E0              ldi R16,8
 1016 0E940000          xcall _SetMotRunPam
 101A           ;                                       MotRunTo(MOT_STORE_CARD_MOVE,(unsigned int)siTmp);
 101A 9B01              movw R18,R22
 101C 08E0              ldi R16,8
 101E 0E940000          xcall _MotRunTo
 1022           ;                               //      MotRunTo(MOT_STORE_CARD_MOVE,305);
 1022           ;                                       waitMotCardTrolley = 1;
 1022 81E0              ldi R24,1
 1024 80930800          sts L106,R24
 1028           ;                                       workStep = 25;
 1028 89E1              ldi R24,25
 102A 80930200          sts L101,R24
 102E           ;                                       break;
 102E FCC4              xjmp L163
 1030           L269:
 1030           ; 				case 25:
 1030           ; 					Uart0ReUnable;
 1030 8091C100          lds R24,193
 1034 8F7E              andi R24,239
 1036 8093C100          sts 193,R24
 103A           ;                                       uart_Printf("%s $%4d\r\n",strM3146,NewTestInfo.cardStoreNum);
 103A 20900600          lds R2,_NewTestInfo+6
 103E 3324              clr R3
 1040 3982              std y+1,R3
 1042 2882              std y+0,R2
 1044 20E0              ldi R18,<_strM3146
 1046 30E0              ldi R19,>_strM3146
 1048 00E0              ldi R16,<L32
 104A 10E0              ldi R17,>L32
 104C 0E940000          xcall _uart_Printf
 1050           ;                                       Uart0ReEnable;
 1050 8091C100          lds R24,193
 1054 8061              ori R24,16
 1056 8093C100          sts 193,R24
 105A           ;                                       SetMotRunPam(MOT_CARD_LOAD,140,10,CURRENT_CARD_LOAD);
 105A 84E0              ldi R24,4
 105C 8A83              std y+2,R24
 105E 8AE0              ldi R24,10
 1060 8883              std y+0,R24
 1062 2CE8              ldi R18,140
 1064 04E0              ldi R16,4
 1066 0E940000          xcall _SetMotRunPam
 106A           ;                                       MotRunTo(MOT_CARD_LOAD,0);
 106A 2227              clr R18
 106C 3327              clr R19
 106E 04E0              ldi R16,4
 1070 0E940000          xcall _MotRunTo
 1074           ;                                       SetDelayTime(waitCardBarcode,50);       // 5s等待拍摄
 1074 22E3              ldi R18,50
 1076 30E0              ldi R19,0
 1078 06E0              ldi R16,6
 107A 0E940000          xcall _SetDelayTime
 107E           ;                                       workStep = 3;
 107E 83E0              ldi R24,3
 1080 80930200          sts L101,R24
 1084           ;                                       break;
 1084 D1C4              xjmp L163
 1086           L271:
 1086           ; 				case 26:
 1086           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,5);
 1086 25E0              ldi R18,5
 1088 30E0              ldi R19,0
 108A 08E0              ldi R16,8
 108C 0E940000          xcall _SetDelayTime
 1090           ;                                       workStep = 27;
 1090 8BE1              ldi R24,27
 1092 80930200          sts L101,R24
 1096           L272:
 1096           ; 				case 27:
 1096           ; 					SetMotRunPam(MOT_CARD_LOAD,140,10,CURRENT_CARD_LOAD);
 1096 84E0              ldi R24,4
 1098 8A83              std y+2,R24
 109A 8AE0              ldi R24,10
 109C 8883              std y+0,R24
 109E 2CE8              ldi R18,140
 10A0 04E0              ldi R16,4
 10A2 0E940000          xcall _SetMotRunPam
 10A6           ;                                       MotRunTo(MOT_CARD_LOAD,300);    // 15/0.08012 = 184
 10A6 2CE2              ldi R18,300
 10A8 31E0              ldi R19,1
 10AA 04E0              ldi R16,4
 10AC 0E940000          xcall _MotRunTo
 10B0           ;                                       waitMotCardLoad = 1;
 10B0 81E0              ldi R24,1
 10B2 80930900          sts L107,R24
 10B6           ;                                       workStep = 28;
 10B6 8CE1              ldi R24,28
 10B8 80930200          sts L101,R24
 10BC           ;                                       break;
 10BC B5C4              xjmp L163
 10BE           L273:
 10BE           ; 				case 28:
 10BE           ; 					MotRunTo(MOT_CARD_LOAD,0);
 10BE 2227              clr R18
 10C0 3327              clr R19
 10C2 04E0              ldi R16,4
 10C4 0E940000          xcall _MotRunTo
 10C8           ;                                       waitMotCardLoad = 1;
 10C8 81E0              ldi R24,1
 10CA 80930900          sts L107,R24
 10CE           ;                                       workStep = 29;
 10CE 8DE1              ldi R24,29
 10D0 80930200          sts L101,R24
 10D4           ;                                       break;
 10D4 A9C4              xjmp L163
 10D6           L274:
 10D6           ; 				case 29:
 10D6           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,2);
 10D6 22E0              ldi R18,2
 10D8 30E0              ldi R19,0
 10DA 08E0              ldi R16,8
 10DC 0E940000          xcall _SetDelayTime
 10E0           ;                                       workStep = 20;
 10E0 84E1              ldi R24,20
 10E2 80930200          sts L101,R24
 10E6           ;                                       break;
 10E6 A0C4              xjmp L163
 10E8           L275:
 10E8           ; 				case 3:
 10E8           ; 					if(WaitPhotoFlag)
 10E8 20900000          lds R2,_WaitPhotoFlag
 10EC 2220              tst R2
 10EE 09F1              breq L276
 10F0           X128:
 10F0           ; 					{
 10F0           ; 						if(WaitDelayTime(waitCardBarcode))
 10F0 06E0              ldi R16,6
 10F2 0E940000          xcall _WaitDelayTime
 10F6 A02E              mov R10,R16
 10F8 0023              tst R16
 10FA D9F0              breq L278
 10FC           X129:
 10FC           ; 						{
 10FC           ; 							if(GetReCardScanf())	// 需要重新检测
 10FC 0E945311          xcall _GetReCardScanf
 1100 5801              movw R10,R16
 1102 0030              cpi R16,0
 1104 0107              cpc R16,R17
 1106 09F4              brne X202
 1108 8FC4              xjmp L163
 110A           X202:
 110A           X130:
 110A           ; 							{
 110A           ; 								SetDelayTime(waitCardBarcode,0);
 110A 2227              clr R18
 110C 3327              clr R19
 110E 06E0              ldi R16,6
 1110 0E940000          xcall _SetDelayTime
 1114           ;                                                               SetReCardScanf(0);
 1114 0027              clr R16
 1116 0E945011          xcall _SetReCardScanf
 111A           ;                                                               MotRunTo(MOT_STORE_CARD_MOVE,0);
 111A 2227              clr R18
 111C 3327              clr R19
 111E 08E0              ldi R16,8
 1120 0E940000          xcall _MotRunTo
 1124           ;                                                               waitMotCardTrolley = 1;
 1124 81E0              ldi R24,1
 1126 80930800          sts L106,R24
 112A           ;                                                               // workStep = 26;       // 2016-11-18
 112A           ;                                                               workStep = 20;  // 2016-11-18
 112A 84E1              ldi R24,20
 112C 80930200          sts L101,R24
 1130           ;                                                       }
 1130           ;                                                       break;
 1130 7BC4              xjmp L163
 1132           L278:
 1132           ; 						}
 1132           ; 					}
 1132           L276:
 1132           ; 					oldGetCardState = PINL & 0x04;	
 1132 80910901          lds R24,265
 1136 8470              andi R24,4
 1138 80930D00          sts L111,R24
 113C           ;                                       MotRunTo(MOT_STORE_CARD_MOVE,0);        
 113C 2227              clr R18
 113E 3327              clr R19
 1140 08E0              ldi R16,8
 1142 0E940000          xcall _MotRunTo
 1146           ;                                       waitMotCardTrolley = 1;
 1146 81E0              ldi R24,1
 1148 80930800          sts L106,R24
 114C           ;                                       if(inWork == 0)
 114C 20900500          lds R2,L103
 1150 2220              tst R2
 1152 39F4              brne L282
 1154           X131:
 1154           ; 					{
 1154           ; 						inWork = 1;							
 1154 80930500          sts L103,R24
 1158           ;                                               SetDelayTime(MOT_STORE_CARD_MOVE,50);
 1158 22E3              ldi R18,50
 115A 30E0              ldi R19,0
 115C 08E0              ldi R16,8
 115E 0E940000          xcall _SetDelayTime
 1162           ;                                       }
 1162           L282:
 1162           ; 					workStep = 4;
 1162 84E0              ldi R24,4
 1164 80930200          sts L101,R24
 1168           ;                                       break;
 1168 5FC4              xjmp L163
 116A           L284:
 116A           ; 				case 4:	// 片仓取片小车已运行到起始位
 116A           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,10);
 116A 2AE0              ldi R18,10
 116C 30E0              ldi R19,0
 116E 08E0              ldi R16,8
 1170 0E940000          xcall _SetDelayTime
 1174           ;                                       workStep = 5;
 1174 85E0              ldi R24,5
 1176 80930200          sts L101,R24
 117A           ;                                       break;
 117A 56C4              xjmp L163
 117C           L285:
 117C           ; 				case 5:	// 检查测试卡是否成功取到
 117C           ; 					ucTmp = PINL & 0x04;		
 117C 40910901          lds R20,265
 1180 4470              andi R20,4
 1182           ;                                       //*************************************************
 1182           ;                                       if(CardNoneUseful == 0)
 1182 20900000          lds R2,_CardNoneUseful
 1186 2220              tst R2
 1188 09F0              breq X203
 118A 9FC0              xjmp L286
 118C           X203:
 118C           X132:
 118C           ; 					{
 118C           ; 						if(ucTmp == 0 && oldGetCardState == 0)
 118C 4423              tst R20
 118E 09F0              breq X204
 1190 75C0              xjmp L288
 1192           X204:
 1192           X133:
 1192 20900D00          lds R2,L111
 1196 2220              tst R2
 1198 09F0              breq X205
 119A 70C0              xjmp L288
 119C           X205:
 119C           X134:
 119C           ; 						{
 119C           ; 							if(checkReDoCnt < 2)
 119C 80910F00          lds R24,L113
 11A0 8230              cpi R24,2
 11A2 88F4              brsh L290
 11A4           X135:
 11A4           ; 							{
 11A4           ; 								MotRunTo(MOT_STORE_CARD_MOVE,100);	
 11A4 24E6              ldi R18,100
 11A6 30E0              ldi R19,0
 11A8 08E0              ldi R16,8
 11AA 0E940000          xcall _MotRunTo
 11AE           ;                                                               waitMotCardTrolley = 1;
 11AE 81E0              ldi R24,1
 11B0 80930800          sts L106,R24
 11B4           ;                                                               checkReDoCnt ++;
 11B4 80910F00          lds R24,L113
 11B8 8F5F              subi R24,255    ; addi 1
 11BA 80930F00          sts L113,R24
 11BE           ;                                                               workStep = 3;
 11BE 83E0              ldi R24,3
 11C0 80930200          sts L101,R24
 11C4           ;                                                               break;
 11C4 31C4              xjmp L163
 11C6           L290:
 11C6           ; 							}
 11C6           ; 							if(takeRedoCnt < 1)
 11C6 80911000          lds R24,L114
 11CA 8130              cpi R24,1
 11CC 50F4              brsh L292
 11CE           X136:
 11CE           ; 							{
 11CE           ; 								takeRedoCnt ++;
 11CE 8F5F              subi R24,255    ; addi 1
 11D0 80931000          sts L114,R24
 11D4           ;                                                               workStep = 0;
 11D4 2224              clr R2
 11D6 20920200          sts L101,R2
 11DA           ;                                                               mainStep = 1;
 11DA 81E0              ldi R24,1
 11DC 80930100          sts L100,R24
 11E0           ;                                                               break;
 11E0 23C4              xjmp L163
 11E2           L292:
 11E2           ; 							}
 11E2           ; 							// 取片失败
 11E2           ; 							SetBeepWarning();
 11E2 0E940000          xcall _SetBeepWarning
 11E6           ;                                                       if(CardStoreTestFlag != 0)
 11E6 20903500          lds R2,_CardStoreTestFlag
 11EA 2220              tst R2
 11EC 91F0              breq L294
 11EE           X137:
 11EE           ; 							{
 11EE           ; 								ReStartCardGetTest();// 重新开始
 11EE 0E944400          xcall _ReStartCardGetTest
 11F2           ;                                                               Uart0ReUnable;
 11F2 8091C100          lds R24,193
 11F6 8F7E              andi R24,239
 11F8 8093C100          sts 193,R24
 11FC           ;                                                               uart_Printf("%s\r\n",strM3126);
 11FC 20E0              ldi R18,<_strM3126
 11FE 30E0              ldi R19,>_strM3126
 1200 00E0              ldi R16,<L35
 1202 10E0              ldi R17,>L35
 1204 0E940000          xcall _uart_Printf
 1208           ;                                                               Uart0ReEnable;
 1208 8091C100          lds R24,193
 120C 8061              ori R24,16
 120E 8093C100          sts 193,R24
 1212           ;                                                       }
 1212           L294:
 1212           ; #ifndef UartSendLong
 1212           ; 							Uart0ReUnable;
 1212           ; 							uart_Printf("!3540 $%8d", NewTestInfo.testSerial);
 1212           ; 							uart_Printf(" $%4d $%4d\r\n",oldGetCardState,ucTmp);
 1212           ; 							Uart0ReEnable;
 1212           ; #else
 1212           ; 							Uart0ReUnable;
 1212 8091C100          lds R24,193
 1216 8F7E              andi R24,239
 1218 8093C100          sts 193,R24
 121C           ;                                                       uart_Printf("!3540 $ ");
 121C 00E0              ldi R16,<L296
 121E 10E0              ldi R17,>L296
 1220 0E940000          xcall _uart_Printf
 1224           ;                                                       uart0SendInt(NewTestInfo.testSerial);
 1224 20910300          lds R18,_NewTestInfo+1+2
 1228 30910400          lds R19,_NewTestInfo+1+2+1
 122C 00910100          lds R16,_NewTestInfo+1
 1230 10910200          lds R17,_NewTestInfo+1+1
 1234 0E940000          xcall _uart0SendInt
 1238           ;                                                       uart_Printf(" $%4d $%4d\r\n",oldGetCardState,ucTmp);
 1238 242E              mov R2,R20
 123A 3324              clr R3
 123C 3982              std y+1,R3
 123E 2882              std y+0,R2
 1240 20910D00          lds R18,L111
 1244 3327              clr R19
 1246 00E0              ldi R16,<L298
 1248 10E0              ldi R17,>L298
 124A 0E940000          xcall _uart_Printf
 124E           ;                                                       uart_Printf("\r\n");
 124E 00E0              ldi R16,<L125
 1250 10E0              ldi R17,>L125
 1252 0E940000          xcall _uart_Printf
 1256           ;                                                       Uart0ReEnable;
 1256 8091C100          lds R24,193
 125A 8061              ori R24,16
 125C 8093C100          sts 193,R24
 1260           ; #endif
 1260           ;                                               
 1260           ;                                                       GetNewTestCard = 250;   
 1260 8AEF              ldi R24,250
 1262 80930000          sts _GetNewTestCard,R24
 1266           ;                                                       CardStoreOpenLook = 0;  
 1266 2224              clr R2
 1268 20920400          sts _CardStoreOpenLook,R2
 126C           ;                                                       InsertRingFlag = 1;
 126C 81E0              ldi R24,1
 126E 80930000          sts _InsertRingFlag,R24
 1272           ;                                                       workStep = 0;
 1272 20920200          sts L101,R2
 1276           ;                                                       mainStep = 0;
 1276 20920100          sts L100,R2
 127A           ;                                                       break;
 127A D6C3              xjmp L163
 127C           L288:
 127C           ; 						}
 127C           ; 						else if(ucTmp == 4 && oldGetCardState == 0)
 127C 4430              cpi R20,4
 127E 09F0              breq X206
 1280 D3C3              xjmp L163
 1282           X206:
 1282           X138:
 1282 20900D00          lds R2,L111
 1286 2220              tst R2
 1288 09F0              breq X207
 128A CEC3              xjmp L163
 128C           X207:
 128C           X139:
 128C           ; 						{
 128C           ; 							Uart0ReUnable;
 128C 8091C100          lds R24,193
 1290 8F7E              andi R24,239
 1292 8093C100          sts 193,R24
 1296           ;                                                       uart_Printf("%s $%4d $%4d\r\n",strM3105,oldGetCardState,ucTmp); 
 1296 242E              mov R2,R20
 1298 3324              clr R3
 129A 3B82              std y+3,R3
 129C 2A82              std y+2,R2
 129E 20900D00          lds R2,L111
 12A2 3324              clr R3
 12A4 3982              std y+1,R3
 12A6 2882              std y+0,R2
 12A8 20E0              ldi R18,<_strM3105
 12AA 30E0              ldi R19,>_strM3105
 12AC 00E0              ldi R16,<L301
 12AE 10E0              ldi R17,>L301
 12B0 0E940000          xcall _uart_Printf
 12B4           ;                                                       Uart0ReEnable;
 12B4 8091C100          lds R24,193
 12B8 8061              ori R24,16
 12BA 8093C100          sts 193,R24
 12BE           ;                                                       workStep = 6;
 12BE 86E0              ldi R24,6
 12C0 80930200          sts L101,R24
 12C4           ;                                                       oldGetCardState = ucTmp;
 12C4 40930D00          sts L111,R20
 12C8           ;                                                       break;
 12C8 AFC3              xjmp L163
 12CA           L286:
 12CA           ; 						}
 12CA           ; 					}
 12CA           ; 					else
 12CA           ; 						workStep = 6;
 12CA 86E0              ldi R24,6
 12CC 80930200          sts L101,R24
 12D0           ;                                       //*********************************************************     
 12D0           ;                                       //if(ucTmp == 4 && oldGetCardState == 0)
 12D0           ;                                       //      oldGetCardState = ucTmp;
 12D0           ;                                       //workStep = 6;
 12D0           ;                                       break;
 12D0 ABC3              xjmp L163
 12D2           L302:
 12D2           ; 				case 6:	// 测试卡移动到滴液位置
 12D2           ; 					SetMotRunPam(MOT_CARD_LOAD,140,10,CURRENT_CARD_LOAD);
 12D2 84E0              ldi R24,4
 12D4 8A83              std y+2,R24
 12D6 8AE0              ldi R24,10
 12D8 8883              std y+0,R24
 12DA 2CE8              ldi R18,140
 12DC 04E0              ldi R16,4
 12DE 0E940000          xcall _SetMotRunPam
 12E2           ;                                       MotRunTo(MOT_CARD_LOAD,300);    // 15/0.08012 = 184
 12E2 2CE2              ldi R18,300
 12E4 31E0              ldi R19,1
 12E6 04E0              ldi R16,4
 12E8 0E940000          xcall _MotRunTo
 12EC           ;                                       workStep = 7;
 12EC 87E0              ldi R24,7
 12EE 80930200          sts L101,R24
 12F2           ;                                       break;
 12F2 9AC3              xjmp L163
 12F4           L303:
 12F4           ; 				case 7:	// 回零准备再次移动到滴液位置，防止测试卡片是歪斜的
 12F4           ; 					MotRunTo(MOT_CARD_LOAD,0);
 12F4 2227              clr R18
 12F6 3327              clr R19
 12F8 04E0              ldi R16,4
 12FA 0E940000          xcall _MotRunTo
 12FE           ;                                       workStep = 8;
 12FE 88E0              ldi R24,8
 1300 80930200          sts L101,R24
 1304           ;                                       break;
 1304 91C3              xjmp L163
 1306           L304:
 1306           ; 				case 8:	
 1306           ; 					_SenCardStoreState(GetNewTestCard-1);
 1306 00910000          lds R16,_GetNewTestCard
 130A 0150              subi R16,1
 130C 0E944101          xcall __SenCardStoreState
 1310           ;                                       SetMotRunPam(MOT_CARD_LOAD,140,10,CURRENT_CARD_LOAD);
 1310 84E0              ldi R24,4
 1312 8A83              std y+2,R24
 1314 8AE0              ldi R24,10
 1316 8883              std y+0,R24
 1318 2CE8              ldi R18,140
 131A 04E0              ldi R16,4
 131C 0E940000          xcall _SetMotRunPam
 1320           ;                                       if(_DropMode == 1)      
 1320 80910000          lds R24,__DropMode
 1324 90910100          lds R25,__DropMode+1
 1328 8130              cpi R24,1
 132A E0E0              ldi R30,0
 132C 9E07              cpc R25,R30
 132E B9F4              brne L305
 1330           X140:
 1330           ; 					{
 1330           ; 						if(0 == _MixtureMode)// 测试卡移动到抽到混匀位置
 1330 20900000          lds R2,__MixtureMode
 1334 2220              tst R2
 1336 61F4              brne L307
 1338           X141:
 1338           ; 						{
 1338           ; 							MotRunTo(MOT_CARD_LOAD,_POS_CARDLOAD_MIX);		// 115
 1338 2DE8              ldi R18,141
 133A 30E0              ldi R19,0
 133C 04E0              ldi R16,4
 133E 0E940000          xcall _MotRunTo
 1342           ;                                                       waitMotCardLoad = 1;
 1342 81E0              ldi R24,1
 1344 80930900          sts L107,R24
 1348           ;                                                       workStep = 9;
 1348 89E0              ldi R24,9
 134A 80930200          sts L101,R24
 134E           ;                                               }
 134E 6CC3              xjmp L163
 1350           L307:
 1350           ; 						else// 测试卡移动到滴样位置
 1350           ; 						{
 1350           ; 							CardStoreOpenLook = 0;		 
 1350 2224              clr R2
 1352 20920400          sts _CardStoreOpenLook,R2
 1356           ;                                                       workStep = 10;
 1356 8AE0              ldi R24,10
 1358 80930200          sts L101,R24
 135C           ;                                               }
 135C           ;                                       }
 135C 65C3              xjmp L163
 135E           L305:
 135E           ; 					else	// 测试卡再次移动到滴液位置
 135E           ; 					{
 135E           ; 						MotRunTo(MOT_CARD_LOAD,_POS_CARDLOAD_DROP);
 135E 2AE4              ldi R18,74
 1360 30E0              ldi R19,0
 1362 04E0              ldi R16,4
 1364 0E940000          xcall _MotRunTo
 1368           ;                                               waitMotCardLoad = 1;
 1368 81E0              ldi R24,1
 136A 80930900          sts L107,R24
 136E           ;                                               workStep = 0;
 136E 2224              clr R2
 1370 20920200          sts L101,R2
 1374           ;                                               mainStep = 6;
 1374 86E0              ldi R24,6
 1376 80930100          sts L100,R24
 137A           ;                                       }
 137A           ;                                       break;
 137A 56C3              xjmp L163
 137C           L309:
 137C           ; 				case 9:
 137C           ; 					Uart0ReUnable;
 137C 8091C100          lds R24,193
 1380 8F7E              andi R24,239
 1382 8093C100          sts 193,R24
 1386           ;                                       uart_Printf("%s $%4d\r\n",strM3109,curCardStoreNum);    
 1386 20900E00          lds R2,L112
 138A 3324              clr R3
 138C 3982              std y+1,R3
 138E 2882              std y+0,R2
 1390 20E0              ldi R18,<_strM3109
 1392 30E0              ldi R19,>_strM3109
 1394 00E0              ldi R16,<L32
 1396 10E0              ldi R17,>L32
 1398 0E940000          xcall _uart_Printf
 139C           ;                                       Uart0ReEnable;
 139C 8091C100          lds R24,193
 13A0 8061              ori R24,16
 13A2 8093C100          sts 193,R24
 13A6           ;                                       GetNewTestCard = 222;           // 设置取出测试卡标识,可以开始抽打混匀
 13A6 8EED              ldi R24,222
 13A8 80930000          sts _GetNewTestCard,R24
 13AC           ;                                       CardStoreOpenLook = 0;           
 13AC 2224              clr R2
 13AE 20920400          sts _CardStoreOpenLook,R2
 13B2           ;                                       workStep = 10;
 13B2 8AE0              ldi R24,10
 13B4 80930200          sts L101,R24
 13B8           ;                                       break;
 13B8 37C3              xjmp L163
 13BA           L310:
 13BA           ; 				case 10:
 13BA           ; 					if(GetNewTestCard == 233)	// 抽打混匀结束,准备滴样
 13BA 80910000          lds R24,_GetNewTestCard
 13BE 893E              cpi R24,233
 13C0 09F0              breq X208
 13C2 32C3              xjmp L163
 13C4           X208:
 13C4           X142:
 13C4           ; 					{
 13C4           ; 						MotRunTo(MOT_CARD_LOAD,0);
 13C4 2227              clr R18
 13C6 3327              clr R19
 13C8 04E0              ldi R16,4
 13CA 0E940000          xcall _MotRunTo
 13CE           ;                                               waitMotCardLoad = 1;
 13CE 81E0              ldi R24,1
 13D0 80930900          sts L107,R24
 13D4           ;                                       //      mainStep = 6;
 13D4           ;                                       //      workStep = 0;
 13D4           ;                                               workStep = 11;
 13D4 8BE0              ldi R24,11
 13D6 80930200          sts L101,R24
 13DA           ;                                       }
 13DA           ;                                       break;
 13DA 26C3              xjmp L163
 13DC           L313:
 13DC           ; 				// 2016-12-06 多走点 荧光滴样位置
 13DC           ; 				case 11:
 13DC           ; 					MotRunTo(MOT_CARD_LOAD,-25);
 13DC 27EE              ldi R18,-25
 13DE 3FEF              ldi R19,-1
 13E0 04E0              ldi R16,4
 13E2 0E940000          xcall _MotRunTo
 13E6           ;                                       waitMotCardLoad = 1;
 13E6 81E0              ldi R24,1
 13E8 80930900          sts L107,R24
 13EC           ;                                       mainStep = 6;
 13EC 86E0              ldi R24,6
 13EE 80930100          sts L100,R24
 13F2           ;                                       workStep = 0;
 13F2 2224              clr R2
 13F4 20920200          sts L101,R2
 13F8           ;                                       break;
 13F8           ;                               }
 13F8           ;                       break;
 13F8 17C3              xjmp L163
 13FA           L315:
 13FA           ; 		case 6:
 13FA           ; 			Uart0ReUnable;
 13FA 8091C100          lds R24,193
 13FE 8F7E              andi R24,239
 1400 8093C100          sts 193,R24
 1404           ;                       uart_Printf("%s $%4d\r\n",strM3106,curCardStoreNum);    
 1404 20900E00          lds R2,L112
 1408 3324              clr R3
 140A 3982              std y+1,R3
 140C 2882              std y+0,R2
 140E 20E0              ldi R18,<_strM3106
 1410 30E0              ldi R19,>_strM3106
 1412 00E0              ldi R16,<L32
 1414 10E0              ldi R17,>L32
 1416 0E940000          xcall _uart_Printf
 141A           ;                       Uart0ReEnable;
 141A 8091C100          lds R24,193
 141E 8061              ori R24,16
 1420 8093C100          sts 193,R24
 1424           ;                       GetNewTestCard = 254;                   // 设置取出测试卡标识
 1424 8EEF              ldi R24,254
 1426 80930000          sts _GetNewTestCard,R24
 142A           ;                       CardStoreOpenLook = 0;          // 
 142A 2224              clr R2
 142C 20920400          sts _CardStoreOpenLook,R2
 1430           ;                       mainStep = 7;
 1430 87E0              ldi R24,7
 1432 80930100          sts L100,R24
 1436           ;                       break;
 1436 F8C2              xjmp L163
 1438           L316:
 1438           ; 		case 7:		// 等待滴样完毕后将干片推入转盘
 1438           ; 			if(GetNewTestCard == 255)
 1438 80910000          lds R24,_GetNewTestCard
 143C 8F3F              cpi R24,255
 143E 09F0              breq X209
 1440 F3C2              xjmp L163
 1442           X209:
 1442           X143:
 1442           ; 			{
 1442           ; 				SetDelayTime(MOT_CARD_LOAD, 50);
 1442 22E3              ldi R18,50
 1444 30E0              ldi R19,0
 1446 04E0              ldi R16,4
 1448 0E940000          xcall _SetDelayTime
 144C           ;                               mainStep = 8;
 144C 88E0              ldi R24,8
 144E 80930100          sts L100,R24
 1452           ;                               workStep = 0;
 1452 2224              clr R2
 1454 20920200          sts L101,R2
 1458           ;                       }break;
 1458 E7C2              xjmp L163
 145A           L319:
 145A           ; 		case 8:		// 将滴完标本的干片装入转盘
 145A           ; 			switch(workStep)
 145A A0900200          lds R10,L101
 145E BB24              clr R11
 1460 C501              movw R24,R10
 1462 8035              cpi R24,80
 1464 E0E0              ldi R30,0
 1466 9E07              cpc R25,R30
 1468 09F4              brne X210
 146A 39C2              xjmp L371
 146C           X210:
 146C           X144:
 146C 80E5              ldi R24,80
 146E 8A15              cp R24,R10
 1470 9B05              cpc R25,R11
 1472 BCF0              brlt L384
 1474           X145:
 1474           L383:
 1474 C501              movw R24,R10
 1476 8030              cpi R24,0
 1478 E0E0              ldi R30,0
 147A 9E07              cpc R25,R30
 147C 0CF4              brge X211
 147E D4C2              xjmp L163
 1480           X211:
 1480           X146:
 1480 87E2              ldi R24,39
 1482 90E0              ldi R25,0
 1484 8A15              cp R24,R10
 1486 9B05              cpc R25,R11
 1488 0CF4              brge X212
 148A CEC2              xjmp L163
 148C           X212:
 148C           X147:
 148C 80E0              ldi R24,<L385
 148E 90E0              ldi R25,>L385
 1490 F501              movw R30,R10
 1492 EE0F              lsl R30
 1494 FF1F              rol R31
 1496 E80F              add R30,R24
 1498 F91F              adc R31,R25
 149A 2790              elpm R2,Z+
 149C 3690              elpm R3,Z
 149E F101              movw R30,R2
 14A0 0994               ijmp
 14A2           L384:
 14A2 C501              movw R24,R10
 14A4 8F36              cpi R24,111
 14A6 E0E0              ldi R30,0
 14A8 9E07              cpc R25,R30
 14AA 09F4              brne X213
 14AC 75C1              xjmp L354
 14AE           X213:
 14AE           X148:
 14AE BCC2              xjmp L163
 14B0           L323:
 14B0           ; 			{
 14B0           ; 				case 0:	
 14B0           ; 					if(TurnPlateUsedLock == 0)
 14B0 20900000          lds R2,_TurnPlateUsedLock
 14B4 2220              tst R2
 14B6 09F0              breq X214
 14B8 B7C2              xjmp L163
 14BA           X214:
 14BA           X149:
 14BA           ; 					{
 14BA           ; 						TurnPlateUsedLock = 1;		// 占用转盘标识
 14BA 81E0              ldi R24,1
 14BC 80930000          sts _TurnPlateUsedLock,R24
 14C0           ;                                               workStep = 1;
 14C0 80930200          sts L101,R24
 14C4           ;                                       }
 14C4           ;                                       break;
 14C4 B1C2              xjmp L163
 14C6           L326:
 14C6           ; 				case 1:		// 先让转盘转到零位
 14C6           ; 					SetMotRunPam(MOT_TURN_PLATE,200,20,CURRENT_TURN_PLATE);
 14C6 81E0              ldi R24,1
 14C8 8A83              std y+2,R24
 14CA 84E1              ldi R24,20
 14CC 8883              std y+0,R24
 14CE 28EC              ldi R18,200
 14D0 01E0              ldi R16,1
 14D2 0E940000          xcall _SetMotRunPam
 14D6           ;                                       MotRunToSite(MOT_TURN_PLATE,0);         // 转盘运行到零位
 14D6 2227              clr R18
 14D8 01E0              ldi R16,1
 14DA 0E940000          xcall _MotRunToSite
 14DE           ;                                       workStep = 20;
 14DE 84E1              ldi R24,20
 14E0 80930200          sts L101,R24
 14E4           ;                                       waitMotTurnPlate = 1;
 14E4 81E0              ldi R24,1
 14E6 80930B00          sts L109,R24
 14EA           ;                                       break;
 14EA 9EC2              xjmp L163
 14EC           L327:
 14EC           ; 				case 20:
 14EC           ; 					SetDelayTime(MOT_TURN_PLATE,5);
 14EC 25E0              ldi R18,5
 14EE 30E0              ldi R19,0
 14F0 01E0              ldi R16,1
 14F2 0E940000          xcall _SetDelayTime
 14F6           ;                                       workStep = 2;
 14F6 82E0              ldi R24,2
 14F8 80930200          sts L101,R24
 14FC           ;                                       break;
 14FC 95C2              xjmp L163
 14FE           L328:
 14FE           ; 				case 2:		// 再让转盘转到当前位置
 14FE           ; 					//SetMotRunPam(MOT_TURN_PLATE,200,20,CURRENT_TURN_PLATE);	
 14FE           ; 					MotRunToSite(MOT_TURN_PLATE,CurInsertRingNum);
 14FE 20910000          lds R18,_CurInsertRingNum
 1502 01E0              ldi R16,1
 1504 0E940000          xcall _MotRunToSite
 1508           ;                                       waitMotTurnPlate = 1;
 1508 81E0              ldi R24,1
 150A 80930B00          sts L109,R24
 150E           ; #ifndef LoadCheck
 150E           ;                                       workStep = 3;  // 进片光耦不使用
 150E           ; #else
 150E           ;                                       workStep = 30;   // 进片光耦使用
 150E 8EE1              ldi R24,30
 1510 80930200          sts L101,R24
 1514           ; #endif
 1514           ;                                       break;
 1514 89C2              xjmp L163
 1516           L329:
 1516           ; 				case 30:
 1516           ; 					SetDelayTime(MOT_TURN_PLATE,5);
 1516 25E0              ldi R18,5
 1518 30E0              ldi R19,0
 151A 01E0              ldi R16,1
 151C 0E940000          xcall _SetDelayTime
 1520           ;                                       workStep = 31;
 1520 8FE1              ldi R24,31
 1522 80930200          sts L101,R24
 1526           ;                                       break;
 1526 80C2              xjmp L163
 1528           L330:
 1528           ; 				case 31:
 1528           ; 					siTmp = getLiqDetADC(LoadChannel);
 1528 01E0              ldi R16,1
 152A 0E940000          xcall _getLiqDetADC
 152E 5801              movw R10,R16
 1530 B501              movw R22,R10
 1532           ;                                       if(siTmp < CardLocationAD)              // 无试剂片
 1532 0438              cpi R16,132
 1534 E3E0              ldi R30,3
 1536 1E07              cpc R17,R30
 1538 B4F4              brge L331
 153A           X150:
 153A           ; 					{
 153A           ; 						workStep = 3;
 153A 83E0              ldi R24,3
 153C 80930200          sts L101,R24
 1540           ;                                               Uart0ReUnable;
 1540 8091C100          lds R24,193
 1544 8F7E              andi R24,239
 1546 8093C100          sts 193,R24
 154A           ;                                               uart_Printf("%s $ %d\r\n",strM3195,(unsigned int)siTmp);
 154A 7983              std y+1,R23
 154C 6883              std y+0,R22
 154E 20E0              ldi R18,<_strM3195
 1550 30E0              ldi R19,>_strM3195
 1552 00E0              ldi R16,<L333
 1554 10E0              ldi R17,>L333
 1556 0E940000          xcall _uart_Printf
 155A           ;                                               Uart0ReEnable;
 155A 8091C100          lds R24,193
 155E 8061              ori R24,16
 1560 8093C100          sts 193,R24
 1564           ;                                       }
 1564 61C2              xjmp L163
 1566           L331:
 1566           ; 					else 							// 有试剂片
 1566           ; 					{
 1566           ; 						workStep = 32;
 1566 80E2              ldi R24,32
 1568 80930200          sts L101,R24
 156C           ;                                               Uart0ReUnable;
 156C 8091C100          lds R24,193
 1570 8F7E              andi R24,239
 1572 8093C100          sts 193,R24
 1576           ;                                               uart_Printf("%s $ %d\r\n",strE3934,(unsigned int)siTmp);
 1576 7983              std y+1,R23
 1578 6883              std y+0,R22
 157A 20E0              ldi R18,<_strE3934
 157C 30E0              ldi R19,>_strE3934
 157E 00E0              ldi R16,<L333
 1580 10E0              ldi R17,>L333
 1582 0E940000          xcall _uart_Printf
 1586           ;                                               Uart0ReEnable;
 1586 8091C100          lds R24,193
 158A 8061              ori R24,16
 158C 8093C100          sts 193,R24
 1590           ;                                               i++;
 1590 80910600          lds R24,L104
 1594 8F5F              subi R24,255    ; addi 1
 1596 80930600          sts L104,R24
 159A           ;                                               if(i > 2)
 159A 82E0              ldi R24,2
 159C 20900600          lds R2,L104
 15A0 8215              cp R24,R2
 15A2 08F0              brlo X215
 15A4 41C2              xjmp L163
 15A6           X215:
 15A6           X151:
 15A6           ; 						{
 15A6           ; 							i = 0;
 15A6 2224              clr R2
 15A8 20920600          sts L104,R2
 15AC           ;                                                       workStep = 3;   // 进片光耦损坏或卸片光耦损坏
 15AC 83E0              ldi R24,3
 15AE 80930200          sts L101,R24
 15B2           ;                                                       Uart0ReUnable;
 15B2 8091C100          lds R24,193
 15B6 8F7E              andi R24,239
 15B8 8093C100          sts 193,R24
 15BC           ;                                                       uart_Printf("%s $%4d\r\n",strE4910,CurInsertRingNum);           // 连续3次进片光耦错误
 15BC 20900000          lds R2,_CurInsertRingNum
 15C0 3324              clr R3
 15C2 3982              std y+1,R3
 15C4 2882              std y+0,R2
 15C6 20E0              ldi R18,<_strE4910
 15C8 30E0              ldi R19,>_strE4910
 15CA 00E0              ldi R16,<L32
 15CC 10E0              ldi R17,>L32
 15CE 0E940000          xcall _uart_Printf
 15D2           ;                                                       Uart0ReEnable;
 15D2 8091C100          lds R24,193
 15D6 8061              ori R24,16
 15D8 8093C100          sts 193,R24
 15DC           ;                                               }
 15DC           ;                                       }
 15DC           ;                                       break;
 15DC 25C2              xjmp L163
 15DE           L336:
 15DE           ; 				case 32:
 15DE           ; 					// 将此位置移动至下片位
 15DE           ; 					siTmp = CurInsertRingNum + 25;
 15DE 60910000          lds R22,_CurInsertRingNum
 15E2 7727              clr R23
 15E4 675E              subi R22,231  ; offset = 25
 15E6 7F4F              sbci R23,255
 15E8           ;                                       if(siTmp >= RING_QUEUE_NUM)
 15E8 6E31              cpi R22,30
 15EA E0E0              ldi R30,0
 15EC 7E07              cpc R23,R30
 15EE 14F0              brlt L337
 15F0           X152:
 15F0           ; 						siTmp -= RING_QUEUE_NUM;
 15F0 6E51              subi R22,30
 15F2 7040              sbci R23,0
 15F4           L337:
 15F4           ; 					MotRunToSite(MOT_TURN_PLATE,siTmp);		// 转盘转到当前位置
 15F4 262F              mov R18,R22
 15F6 01E0              ldi R16,1
 15F8 0E940000          xcall _MotRunToSite
 15FC           ;                                       waitMotTurnPlate = 1;
 15FC 81E0              ldi R24,1
 15FE 80930B00          sts L109,R24
 1602           ;                                       workStep = 33;
 1602 81E2              ldi R24,33
 1604 80930200          sts L101,R24
 1608           ;                                       break;
 1608 0FC2              xjmp L163
 160A           L339:
 160A           ; 				case 33:
 160A           ; 					SetDelayTime(MOT_TURN_PLATE,5);
 160A 25E0              ldi R18,5
 160C 30E0              ldi R19,0
 160E 01E0              ldi R16,1
 1610 0E940000          xcall _SetDelayTime
 1614           ;                               //      workStep = 34;
 1614           ;                                       workStep = 35;
 1614 83E2              ldi R24,35
 1616 80930200          sts L101,R24
 161A           ;                                       break;
 161A 06C2              xjmp L163
 161C           L340:
 161C           ; 				/*
 161C           ; 				case 34:
 161C           ; 					siTmp = getLiqDetADC(UnloadChannel);
 161C           ; 					if(siTmp < CardLocationAD)	// 当前位置没有试剂片
 161C           ; 					{
 161C           ; 						MotRunToSite(MOT_TURN_PLATE,CurInsertRingNum);
 161C           ; 						waitMotTurnPlate = 1;
 161C           ; 						//workStep = 3;
 161C           ; 						workStep = 30;
 161C           ; 					}
 161C           ; 					else 			// 有试剂片
 161C           ; 					{
 161C           ; 						workStep = 35;
 161C           ; 					}		
 161C           ; 					break;
 161C           ; 				*/
 161C           ; 				case 35:
 161C           ; 					if(GetwasteCardState() == 0)// 废片仓功能开启
 161C 0E940000          xcall _GetwasteCardState
 1620 A02E              mov R10,R16
 1622 0023              tst R16
 1624 69F4              brne L341
 1626           X153:
 1626           ; 					{
 1626           ; 						if((PINK & 0x02) == 0)
 1626 20900601          lds R2,262
 162A 21FC              sbrc R2,1
 162C 09C0              rjmp L343
 162E           X154:
 162E           ; 						{		// 废片仓打开
 162E           ; 							TurnPlateUsedLock = 0;
 162E 2224              clr R2
 1630 20920000          sts _TurnPlateUsedLock,R2
 1634           ;                                                       mainStep = 8;
 1634 88E0              ldi R24,8
 1636 80930100          sts L100,R24
 163A           ;                                                       workStep = 0;
 163A 20920200          sts L101,R2
 163E           ;                                                       break;
 163E F4C1              xjmp L163
 1640           L343:
 1640           ; 						}
 1640           ; 					}
 1640           L341:
 1640           ; 					SetMotRunPam(MOT_CARD_UNLOAD,200,20,CURRENT_CARD_UNLOAD);
 1640 84E0              ldi R24,4
 1642 8A83              std y+2,R24
 1644 84E1              ldi R24,20
 1646 8883              std y+0,R24
 1648 28EC              ldi R18,200
 164A 05E0              ldi R16,5
 164C 0E940000          xcall _SetMotRunPam
 1650           ;                                       MotRunTo(MOT_CARD_UNLOAD,_POS_UNLOAD_OUT);              // 卸片行程67mm/0.08128 = 824
 1650 20E4              ldi R18,1600
 1652 36E0              ldi R19,6
 1654 05E0              ldi R16,5
 1656 0E940000          xcall _MotRunTo
 165A           ;                                       waitMotCardUnload = 1;
 165A 81E0              ldi R24,1
 165C 80930A00          sts L108,R24
 1660           ;                                       workStep = 36;
 1660 84E2              ldi R24,36
 1662 80930200          sts L101,R24
 1666           ;                                       break;
 1666 E0C1              xjmp L163
 1668           L345:
 1668           ; 				case 36:
 1668           ; 					SetMotRunPam(MOT_CARD_UNLOAD,100,20,2);
 1668 82E0              ldi R24,2
 166A 8A83              std y+2,R24
 166C 84E1              ldi R24,20
 166E 8883              std y+0,R24
 1670 24E6              ldi R18,100
 1672 05E0              ldi R16,5
 1674 0E940000          xcall _SetMotRunPam
 1678           ;                                       MotRunTo(MOT_CARD_UNLOAD,0);
 1678 2227              clr R18
 167A 3327              clr R19
 167C 05E0              ldi R16,5
 167E 0E940000          xcall _MotRunTo
 1682           ;                                       waitMotCardUnload = 1;
 1682 81E0              ldi R24,1
 1684 80930A00          sts L108,R24
 1688           ;                                       workStep = 37;
 1688 85E2              ldi R24,37
 168A 80930200          sts L101,R24
 168E           ;                                       break;
 168E CCC1              xjmp L163
 1690           L346:
 1690           ; 				case 37:
 1690           ; 					SetDelayTime(MOT_CARD_UNLOAD,5);
 1690 25E0              ldi R18,5
 1692 30E0              ldi R19,0
 1694 05E0              ldi R16,5
 1696 0E940000          xcall _SetDelayTime
 169A           ;                                       workStep = 38; // 检测下片
 169A 86E2              ldi R24,38
 169C 80930200          sts L101,R24
 16A0           ;                                       break;
 16A0 C3C1              xjmp L163
 16A2           L347:
 16A2           ; 				case 38:	// 下片动作完成之后,检测是否有试剂片
 16A2           ; 					siTmp = getLiqDetADC(UnloadChannel);
 16A2 02E0              ldi R16,2
 16A4 0E940000          xcall _getLiqDetADC
 16A8 5801              movw R10,R16
 16AA B501              movw R22,R10
 16AC           ;                                       if(siTmp < CardLocationAD)      // 当前位置没有试剂片
 16AC 0438              cpi R16,132
 16AE E3E0              ldi R30,3
 16B0 1E07              cpc R17,R30
 16B2 64F4              brge L348
 16B4           X155:
 16B4           ; 					{
 16B4           ; 						MotRunToSite(MOT_TURN_PLATE,CurInsertRingNum);
 16B4 20910000          lds R18,_CurInsertRingNum
 16B8 01E0              ldi R16,1
 16BA 0E940000          xcall _MotRunToSite
 16BE           ;                                               waitMotTurnPlate = 1;
 16BE 81E0              ldi R24,1
 16C0 80930B00          sts L109,R24
 16C4           ;                                               //workStep = 3;
 16C4           ;                                               workStep = 30;
 16C4 8EE1              ldi R24,30
 16C6 80930200          sts L101,R24
 16CA           ;                                       }
 16CA AEC1              xjmp L163
 16CC           L348:
 16CC           ; 					else 						// 有试剂片
 16CC           ; 					{
 16CC           ; 						//workStep = 1;
 16CC           ; 						MotRunToSite(MOT_TURN_PLATE,0);		// 转盘运行到零位
 16CC 2227              clr R18
 16CE 01E0              ldi R16,1
 16D0 0E940000          xcall _MotRunToSite
 16D4           ;                                               waitMotTurnPlate = 1;
 16D4 81E0              ldi R24,1
 16D6 80930B00          sts L109,R24
 16DA           ;                                               workStep = 32;
 16DA 80E2              ldi R24,32
 16DC 80930200          sts L101,R24
 16E0           ;                                               Uart0ReUnable;
 16E0 8091C100          lds R24,193
 16E4 8F7E              andi R24,239
 16E6 8093C100          sts 193,R24
 16EA           ;                                               uart_Printf("%s $%4d $%4d\r\n",strM3117,CurInsertRingNum,j + 2);                // 对应位置再次下片
 16EA 80910700          lds R24,L105
 16EE 9927              clr R25
 16F0 0296              adiw R24,2
 16F2 9B83              std y+3,R25
 16F4 8A83              std y+2,R24
 16F6 20900000          lds R2,_CurInsertRingNum
 16FA 3324              clr R3
 16FC 3982              std y+1,R3
 16FE 2882              std y+0,R2
 1700 20E0              ldi R18,<_strM3117
 1702 30E0              ldi R19,>_strM3117
 1704 00E0              ldi R16,<L301
 1706 10E0              ldi R17,>L301
 1708 0E940000          xcall _uart_Printf
 170C           ;                                               Uart0ReEnable;
 170C 8091C100          lds R24,193
 1710 8061              ori R24,16
 1712 8093C100          sts 193,R24
 1716           ;                                               j++;
 1716 80910700          lds R24,L105
 171A 8F5F              subi R24,255    ; addi 1
 171C 80930700          sts L105,R24
 1720           ;                                               if(j > 2)
 1720 82E0              ldi R24,2
 1722 20900700          lds R2,L105
 1726 8215              cp R24,R2
 1728 08F0              brlo X216
 172A 7EC1              xjmp L163
 172C           X216:
 172C           X156:
 172C           ; 						{
 172C           ; 							j = 0;
 172C 2224              clr R2
 172E 20920700          sts L105,R2
 1732           ;                                                       workStep = 39;  // 进片光耦和下片光耦损坏
 1732 87E2              ldi R24,39
 1734 80930200          sts L101,R24
 1738           ;                                                       Uart0ReUnable;
 1738 8091C100          lds R24,193
 173C 8F7E              andi R24,239
 173E 8093C100          sts 193,R24
 1742           ;                                                       uart_Printf("%s $%4d\r\n",strE4909,CurInsertRingNum);           // 对应位置连续3次下片失败
 1742 20900000          lds R2,_CurInsertRingNum
 1746 3324              clr R3
 1748 3982              std y+1,R3
 174A 2882              std y+0,R2
 174C 20E0              ldi R18,<_strE4909
 174E 30E0              ldi R19,>_strE4909
 1750 00E0              ldi R16,<L32
 1752 10E0              ldi R17,>L32
 1754 0E940000          xcall _uart_Printf
 1758           ;                                                       Uart0ReEnable;
 1758 8091C100          lds R24,193
 175C 8061              ori R24,16
 175E 8093C100          sts 193,R24
 1762           ;                                               }
 1762           ;                                       }
 1762           ;                                       break;  
 1762 62C1              xjmp L163
 1764           L352:
 1764           ; 				case 39:	// 连续3次下片都不对，初步判定是进片或下片光耦损坏,仍然执行进片动作
 1764           ; 					MotRunToSite(MOT_TURN_PLATE,CurInsertRingNum);
 1764 20910000          lds R18,_CurInsertRingNum
 1768 01E0              ldi R16,1
 176A 0E940000          xcall _MotRunToSite
 176E           ;                                       waitMotTurnPlate = 1;
 176E 81E0              ldi R24,1
 1770 80930B00          sts L109,R24
 1774           ;                                       workStep = 3;   
 1774 83E0              ldi R24,3
 1776 80930200          sts L101,R24
 177A           ;                                       break;                                                          
 177A 56C1              xjmp L163
 177C           L353:
 177C           ; 				case 3:		
 177C           ; 					i = 0;
 177C 2224              clr R2
 177E 20920600          sts L104,R2
 1782           ;                                       j = 0;
 1782 20920700          sts L105,R2
 1786           ;                                       SetDelayTime(MOT_CARD_LOAD,5);
 1786 25E0              ldi R18,5
 1788 30E0              ldi R19,0
 178A 04E0              ldi R16,4
 178C 0E940000          xcall _SetDelayTime
 1790           ;                                       workStep = 111;
 1790 8FE6              ldi R24,111
 1792 80930200          sts L101,R24
 1796           ;                                       break;
 1796 48C1              xjmp L163
 1798           L354:
 1798           ; 					
 1798           ; 				case 111:	
 1798           ; 					//if(GetTurnPlateMonitorState() == 0)//0表示光耦通，1表示光耦遮挡 
 1798           ; 					if(GetMotorMonitorState(MOT_TURN_PLATE,StopMonitor) == 0)
 1798 21E0              ldi R18,1
 179A 01E0              ldi R16,1
 179C 0E940000          xcall _GetMotorMonitorState
 17A0 A02E              mov R10,R16
 17A2 0023              tst R16
 17A4 21F4              brne L355
 17A6           X157:
 17A6           ; 						workStep = 4;
 17A6 84E0              ldi R24,4
 17A8 80930200          sts L101,R24
 17AC 3DC1              xjmp L163
 17AE           L355:
 17AE           ; 					else 
 17AE           ; 						workStep = 1;
 17AE 81E0              ldi R24,1
 17B0 80930200          sts L101,R24
 17B4           ;                                       break;
 17B4 39C1              xjmp L163
 17B6           L357:
 17B6           ; 				case 4:	// 干片推入转盘
 17B6           ; 				//	SetMotRunPam(MOT_CARD_LOAD,120,2,3);
 17B6           ; 					MotRunTo(MOT_CARD_LOAD,_POS_CARDLOAD_RING);		// 装片行程94mm/0.08128 = 1156
 17B6 20E4              ldi R18,1600
 17B8 36E0              ldi R19,6
 17BA 04E0              ldi R16,4
 17BC 0E940000          xcall _MotRunTo
 17C0           ;                                       Uart0ReUnable;
 17C0 8091C100          lds R24,193
 17C4 8F7E              andi R24,239
 17C6 8093C100          sts 193,R24
 17CA           ;                                       uart_Printf("*3918 CardLoadBegain\r\n");        
 17CA 00E0              ldi R16,<L358
 17CC 10E0              ldi R17,>L358
 17CE 0E940000          xcall _uart_Printf
 17D2           ;                                       Uart0ReEnable;
 17D2 8091C100          lds R24,193
 17D6 8061              ori R24,16
 17D8 8093C100          sts 193,R24
 17DC           ;                                       waitMotCardLoad = 1;
 17DC 81E0              ldi R24,1
 17DE 80930900          sts L107,R24
 17E2           ;                                       workStep = 7;
 17E2 87E0              ldi R24,7
 17E4 80930200          sts L101,R24
 17E8           ;                                       break;
 17E8 1FC1              xjmp L163
 17EA           L359:
 17EA           ; 				case 7:		// 干片装入转盘完成，干片载入小车回到起始位
 17EA           ; 				//	SetMotRunPam(MOT_CARD_LOAD,160,10,4);
 17EA           ; 					SetMotRunPam(MOT_CARD_LOAD,220,10,CURRENT_CARD_LOAD);
 17EA 84E0              ldi R24,4
 17EC 8A83              std y+2,R24
 17EE 8AE0              ldi R24,10
 17F0 8883              std y+0,R24
 17F2 2CED              ldi R18,220
 17F4 04E0              ldi R16,4
 17F6 0E940000          xcall _SetMotRunPam
 17FA           ;                                       Uart0ReUnable;
 17FA 8091C100          lds R24,193
 17FE 8F7E              andi R24,239
 1800 8093C100          sts 193,R24
 1804           ;                                       uart_Printf("*3919 CardLoadBack\r\n");  
 1804 00E0              ldi R16,<L360
 1806 10E0              ldi R17,>L360
 1808 0E940000          xcall _uart_Printf
 180C           ;                                       Uart0ReEnable;
 180C 8091C100          lds R24,193
 1810 8061              ori R24,16
 1812 8093C100          sts 193,R24
 1816           ;                                       MotRunTo(MOT_CARD_LOAD,0);
 1816 2227              clr R18
 1818 3327              clr R19
 181A 04E0              ldi R16,4
 181C 0E940000          xcall _MotRunTo
 1820           ;                                       waitMotCardLoad = 1;
 1820 81E0              ldi R24,1
 1822 80930900          sts L107,R24
 1826           ;                                       if(inWork == 0)
 1826 20900500          lds R2,L103
 182A 2220              tst R2
 182C 39F4              brne L361
 182E           X158:
 182E           ; 					{
 182E           ; 						inWork = 1;
 182E 80930500          sts L103,R24
 1832           ;                                               SetDelayTime(MOT_CARD_LOAD,50);
 1832 22E3              ldi R18,50
 1834 30E0              ldi R19,0
 1836 04E0              ldi R16,4
 1838 0E940000          xcall _SetDelayTime
 183C           ;                                       }
 183C           L361:
 183C           ; 					workStep = 12;
 183C 8CE0              ldi R24,12
 183E 80930200          sts L101,R24
 1842           ;                                       break;
 1842 F2C0              xjmp L163
 1844           L363:
 1844           ; 				case 12:
 1844           ; 					MotRunTo(MOT_CARD_LOAD,0);
 1844 2227              clr R18
 1846 3327              clr R19
 1848 04E0              ldi R16,4
 184A 0E940000          xcall _MotRunTo
 184E           ;                                       SetDelayTime(MOT_CARD_LOAD,1);
 184E 21E0              ldi R18,1
 1850 30E0              ldi R19,0
 1852 04E0              ldi R16,4
 1854 0E940000          xcall _SetDelayTime
 1858           ;                                       waitMotCardLoad = 1;
 1858 81E0              ldi R24,1
 185A 80930900          sts L107,R24
 185E           ;                                       workStep = 13;
 185E 8DE0              ldi R24,13
 1860 80930200          sts L101,R24
 1864           ;                                       break;
 1864 E1C0              xjmp L163
 1866           L364:
 1866           ; 				case 13:
 1866           ; 					MotRunTo(MOT_CARD_LOAD,0);
 1866 2227              clr R18
 1868 3327              clr R19
 186A 04E0              ldi R16,4
 186C 0E940000          xcall _MotRunTo
 1870           ;                                       SetDelayTime(MOT_CARD_LOAD,1);
 1870 21E0              ldi R18,1
 1872 30E0              ldi R19,0
 1874 04E0              ldi R16,4
 1876 0E940000          xcall _SetDelayTime
 187A           ;                                       waitMotCardLoad = 1;
 187A 81E0              ldi R24,1
 187C 80930900          sts L107,R24
 1880           ;                                       workStep = 11;
 1880 8BE0              ldi R24,11
 1882 80930200          sts L101,R24
 1886           ;                                       break;
 1886 D0C0              xjmp L163
 1888           L365:
 1888           ; 				case 11:
 1888           ; 					siTmp = GetMotPositionOfStep(MOT_CARD_LOAD);
 1888 04E0              ldi R16,4
 188A 0E940000          xcall _GetMotPositionOfStep
 188E 5801              movw R10,R16
 1890 B501              movw R22,R10
 1892           ;                                       if(siTmp != 0)
 1892 0030              cpi R16,0
 1894 0107              cpc R16,R17
 1896 49F0              breq L366
 1898           X159:
 1898           ; 					{
 1898           ; 						MotRunTo(MOT_CARD_LOAD,0);
 1898 2227              clr R18
 189A 3327              clr R19
 189C 04E0              ldi R16,4
 189E 0E940000          xcall _MotRunTo
 18A2           ;                                               waitMotCardLoad = 1;
 18A2 81E0              ldi R24,1
 18A4 80930900          sts L107,R24
 18A8           ;                                               break;
 18A8 BFC0              xjmp L163
 18AA           L366:
 18AA           ; 					}
 18AA           ; 					if(CardNoneUseful == 0)
 18AA 20900000          lds R2,_CardNoneUseful
 18AE 2220              tst R2
 18B0 21F4              brne L368
 18B2           X160:
 18B2           ; 						workStep = 80;
 18B2 80E5              ldi R24,80
 18B4 80930200          sts L101,R24
 18B8 03C0              xjmp L369
 18BA           L368:
 18BA           ; 					else
 18BA           ; 						workStep = 8;
 18BA 88E0              ldi R24,8
 18BC 80930200          sts L101,R24
 18C0           L369:
 18C0           ; 					Uart0ReUnable;
 18C0 8091C100          lds R24,193
 18C4 8F7E              andi R24,239
 18C6 8093C100          sts 193,R24
 18CA           ;                                       uart_Printf("*3920 CardLoadBackDone\r\n");
 18CA 00E0              ldi R16,<L370
 18CC 10E0              ldi R17,>L370
 18CE 0E940000          xcall _uart_Printf
 18D2           ;                                       Uart0ReEnable;
 18D2 8091C100          lds R24,193
 18D6 8061              ori R24,16
 18D8 8093C100          sts 193,R24
 18DC           ;                                       break;
 18DC A5C0              xjmp L163
 18DE           L371:
 18DE           ; 				//***************************************************
 18DE           ; 				//2016-06-12 添加回来之后重新检测，试剂片是否推入转盘
 18DE           ; 				case 80:
 18DE           ; 					ucTmp = PINL & 0x04;	
 18DE 40910901          lds R20,265
 18E2 4470              andi R20,4
 18E4           ;                                       Uart0ReUnable;
 18E4 8091C100          lds R24,193
 18E8 8F7E              andi R24,239
 18EA 8093C100          sts 193,R24
 18EE           ;                                       uart_Printf("%s $%4d $%4d\r\n",strM3149,oldGetCardState,ucTmp); 
 18EE 242E              mov R2,R20
 18F0 3324              clr R3
 18F2 3B82              std y+3,R3
 18F4 2A82              std y+2,R2
 18F6 20900D00          lds R2,L111
 18FA 3324              clr R3
 18FC 3982              std y+1,R3
 18FE 2882              std y+0,R2
 1900 20E0              ldi R18,<_strM3149
 1902 30E0              ldi R19,>_strM3149
 1904 00E0              ldi R16,<L301
 1906 10E0              ldi R17,>L301
 1908 0E940000          xcall _uart_Printf
 190C           ;                                       Uart0ReEnable;
 190C 8091C100          lds R24,193
 1910 8061              ori R24,16
 1912 8093C100          sts 193,R24
 1916           ;                                       //if(ucTmp == oldGetCardState)  //试剂片还在
 1916           ;                                       if(ucTmp == 4 && oldGetCardState == 4)  //试剂片还在
 1916 4430              cpi R20,4
 1918 79F4              brne L372
 191A           X161:
 191A 80910D00          lds R24,L111
 191E 8430              cpi R24,4
 1920 59F4              brne L372
 1922           X162:
 1922           ; 					{
 1922           ; 						//TurnPlateUseLock = 0;
 1922           ; 						MotRunTo(MOT_TURN_PLATE,0);
 1922 2227              clr R18
 1924 3327              clr R19
 1926 01E0              ldi R16,1
 1928 0E940000          xcall _MotRunTo
 192C           ;                                               waitMotTurnPlate = 1;
 192C 81E0              ldi R24,1
 192E 80930B00          sts L109,R24
 1932           ;                                               workStep = 1;
 1932 80930200          sts L101,R24
 1936           ;                                       }
 1936 78C0              xjmp L163
 1938           L372:
 1938           ; 					else
 1938           ; 						workStep = 8;
 1938 88E0              ldi R24,8
 193A 80930200          sts L101,R24
 193E           ;                                       break;                                  
 193E 74C0              xjmp L163
 1940           L374:
 1940           ; 				//***************************************************
 1940           ; 				case 8:		// 完成
 1940           ; 					workStep = 9;
 1940 89E0              ldi R24,9
 1942 80930200          sts L101,R24
 1946           ;                                       TurnPlateUsedLock = 0;                  
 1946 2224              clr R2
 1948 20920000          sts _TurnPlateUsedLock,R2
 194C           ;                                       SetRingQueueUnitUsed(CurInsertRingNum);         // 设置干片已经装入转盘标识
 194C 00910000          lds R16,_CurInsertRingNum
 1950 1127              clr R17
 1952 0E940000          xcall _SetRingQueueUnitUsed
 1956           ;                                       InsertRingFlag = 1;
 1956 81E0              ldi R24,1
 1958 80930000          sts _InsertRingFlag,R24
 195C           ;                                       if(insertflag[CurInsertRingNum] == 0)
 195C 80E0              ldi R24,<_insertflag
 195E 90E0              ldi R25,>_insertflag
 1960 E0910000          lds R30,_CurInsertRingNum
 1964 FF27              clr R31
 1966 E80F              add R30,R24
 1968 F91F              adc R31,R25
 196A 2080              ldd R2,z+0
 196C 2220              tst R2
 196E 39F4              brne L375
 1970           X163:
 1970           ; 						insertflag[CurInsertRingNum] = 255;
 1970 E0910000          lds R30,_CurInsertRingNum
 1974 FF27              clr R31
 1976 E80F              add R30,R24
 1978 F91F              adc R31,R25
 197A 8FEF              ldi R24,255
 197C 8083              std z+0,R24
 197E           L375:
 197E           ; #ifndef UartSendLong					
 197E           ; 					Uart0ReUnable;
 197E           ; 					//uart_Printf("%s $%8d",strM3147,NewTestInfo.testSerial); //2016-07-07
 197E           ; 					uart_Printf("%s $%8d",strM3147,RingQueue.sampInfo[CurInsertRingNum].testSerial); //2016-09-13
 197E           ; #else
 197E           ; 					Uart0ReUnable;
 197E 8091C100          lds R24,193
 1982 8F7E              andi R24,239
 1984 8093C100          sts 193,R24
 1988           ;                                       uart_Printf("%s $ ",strM3147);
 1988 20E0              ldi R18,<_strM3147
 198A 30E0              ldi R19,>_strM3147
 198C 00E0              ldi R16,<L377
 198E 10E0              ldi R17,>L377
 1990 0E940000          xcall _uart_Printf
 1994           ;                                       uart0SendInt(RingQueue.sampInfo[CurInsertRingNum].testSerial);
 1994 10910000          lds R17,_CurInsertRingNum
 1998 0DE0              ldi R16,13
 199A 0103              mulsu R16,R17
 199C 80E0              ldi R24,<_RingQueue+1
 199E 90E0              ldi R25,>_RingQueue+1
 19A0 F001              movw R30,R0
 19A2 E80F              add R30,R24
 19A4 F91F              adc R31,R25
 19A6 0081              ldd R16,z+0
 19A8 1181              ldd R17,z+1
 19AA 2281              ldd R18,z+2
 19AC 3381              ldd R19,z+3
 19AE 0E940000          xcall _uart0SendInt
 19B2           ; #endif
 19B2           ;                                       uart_Printf(" $%4d $%4d\r\n",CurInsertRingNum,insertflag[CurInsertRingNum]); //2016-07-07
 19B2 A0900000          lds R10,_CurInsertRingNum
 19B6 80E0              ldi R24,<_insertflag
 19B8 90E0              ldi R25,>_insertflag
 19BA EA2D              mov R30,R10
 19BC FF27              clr R31
 19BE E80F              add R30,R24
 19C0 F91F              adc R31,R25
 19C2 2080              ldd R2,z+0
 19C4 3324              clr R3
 19C6 3982              std y+1,R3
 19C8 2882              std y+0,R2
 19CA 2A2D              mov R18,R10
 19CC 3327              clr R19
 19CE 00E0              ldi R16,<L298
 19D0 10E0              ldi R17,>L298
 19D2 0E940000          xcall _uart_Printf
 19D6           ;                                       Uart0ReEnable;
 19D6 8091C100          lds R24,193
 19DA 8061              ori R24,16
 19DC 8093C100          sts 193,R24
 19E0           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 19E0 8AE0              ldi R24,10
 19E2 8A83              std y+2,R24
 19E4 84E1              ldi R24,20
 19E6 8883              std y+0,R24
 19E8 28EC              ldi R18,200
 19EA 08E0              ldi R16,8
 19EC 0E940000          xcall _SetMotRunPam
 19F0           ;                                       break;
 19F0 1BC0              xjmp L163
 19F2           L379:
 19F2           ; 				case 9:		// 取片小车运行到片仓口
 19F2           ; 					MotRunTo(MOT_STORE_CARD_MOVE,432);
 19F2 20EB              ldi R18,432
 19F4 31E0              ldi R19,1
 19F6 08E0              ldi R16,8
 19F8 0E940000          xcall _MotRunTo
 19FC           ;                                       waitMotCardTrolley = 1;
 19FC 81E0              ldi R24,1
 19FE 80930800          sts L106,R24
 1A02           ;                                       workStep = 10;
 1A02 8AE0              ldi R24,10
 1A04 80930200          sts L101,R24
 1A08           ;                                       break;
 1A08 0FC0              xjmp L163
 1A0A           L380:
 1A0A           ; 				case 10:
 1A0A           ; 					if(0 != CardStoreTestFlag)
 1A0A 20903500          lds R2,_CardStoreTestFlag
 1A0E 2220              tst R2
 1A10 11F0              breq L381
 1A12           X164:
 1A12           ; 					{
 1A12           ; 						CardGetTestDone();	// 测试完成
 1A12 0E946500          xcall _CardGetTestDone
 1A16           ;                                       }
 1A16           L381:
 1A16           ; 					workStep = 0;
 1A16 2224              clr R2
 1A18 20920200          sts L101,R2
 1A1C           ;                                       mainStep = 0;
 1A1C 20920100          sts L100,R2
 1A20           ;                                       inWork = 0;
 1A20 20920500          sts L103,R2
 1A24           ;                                       return 1;
 1A24 01E0              ldi R16,1
 1A26 01C0              xjmp L99
 1A28           L163:
 1A28           ; 					break;
 1A28           ; 				}
 1A28           ; 			break;
 1A28           ; 		default:
 1A28           ; 			break;
 1A28           ; 		}
 1A28           ; 	return 0;
 1A28 0027              clr R16
 1A2A           L99:
 1A2A                   .dbline 0 ; func end
 1A2A 2496              adiw R28,4
 1A2C 0E940000          xcall pop_xgsetF00C
 1A30 2296              adiw R28,2
 1A32 0895              ret
                        .area bss(ram, con, rel)
 0011           L388:
 0011                   .blkb 1
 0012           L389:
 0012                   .blkb 1
 0013           L390:
 0013                   .blkb 2
 0015           L391:
 0015                   .blkb 1
 0016           L392:
 0016                   .blkb 1
 0017           L393:
 0017                   .blkb 1
 0018           L394:
 0018                   .blkb 1
 0019           L395:
 0019                   .blkb 1
 001A           L396:
 001A                   .blkb 1
 001B           L397:
 001B                   .blkb 1
 001C           L398:
 001C                   .blkb 1
 001D           L399:
 001D                   .blkb 1
                        .area text(rom, con, rel)
                ;            pos -> <dead>
                ;          siTmp -> R20,R21
                ;          ucTmp -> R20
                        .even
 1A34           _GetStoreProcess::
 1A34 0E940000          xcall push_xgsetF00C
 1A38 2397              sbiw R28,3
 1A3A           ; }
 1A3A           ; 
 1A3A           ; unsigned char GetStoreProcess(void)
 1A3A           ; {
 1A3A           ;       static unsigned char mainStep;          
 1A3A           ;       static unsigned char workStep;
 1A3A           ;       static signed int storePos;
 1A3A           ;       static unsigned char inWork;
 1A3A           ;       static unsigned char waitMotCardTrolley, waitMotCardLoad, waitMotTurnPlate;
 1A3A           ;       static unsigned char oldStoreState;
 1A3A           ;       static unsigned char oldGetCardState;
 1A3A           ;       static unsigned char curCardStoreNum;
 1A3A           ;       static unsigned char checkReDoCnt, takeRedoCnt;
 1A3A           ;       signed int siTmp;
 1A3A           ;       unsigned char pos;
 1A3A           ;       unsigned char ucTmp;
 1A3A           ;       if(WaitDelayTime(MOT_STORE_CARD_MOVE))          return 0;
 1A3A 08E0              ldi R16,8
 1A3C 0E940000          xcall _WaitDelayTime
 1A40 0023              tst R16
 1A42 11F0              breq L400
 1A44           X217:
 1A44 0027              clr R16
 1A46 05C4              xjmp L387
 1A48           L400:
 1A48           ; 	if(WaitDelayTime(MOT_CARD_LOAD))		return 0;
 1A48 04E0              ldi R16,4
 1A4A 0E940000          xcall _WaitDelayTime
 1A4E 0023              tst R16
 1A50 11F0              breq L402
 1A52           X218:
 1A52 0027              clr R16
 1A54 FEC3              xjmp L387
 1A56           L402:
 1A56           ; 	if(waitMotCardTrolley){	if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)	return 0;waitMotCardTrolley = 0;}
 1A56 20901600          lds R2,L392
 1A5A 2220              tst R2
 1A5C 59F0              breq L404
 1A5E           X219:
 1A5E 08E0              ldi R16,8
 1A60 0E940000          xcall _GetMotState
 1A64 402F              mov R20,R16
 1A66 0130              cpi R16,1
 1A68 11F0              breq L406
 1A6A           X220:
 1A6A 0027              clr R16
 1A6C F2C3              xjmp L387
 1A6E           L406:
 1A6E 2224              clr R2
 1A70 20921600          sts L392,R2
 1A74           L404:
 1A74           ; 	if(waitMotCardLoad){if(GetMotState(MOT_CARD_LOAD)!=STA_SLAVE_FREE)	return 0;waitMotCardLoad = 0;}
 1A74 20901700          lds R2,L393
 1A78 2220              tst R2
 1A7A 59F0              breq L408
 1A7C           X221:
 1A7C 04E0              ldi R16,4
 1A7E 0E940000          xcall _GetMotState
 1A82 402F              mov R20,R16
 1A84 0130              cpi R16,1
 1A86 11F0              breq L410
 1A88           X222:
 1A88 0027              clr R16
 1A8A E3C3              xjmp L387
 1A8C           L410:
 1A8C 2224              clr R2
 1A8E 20921700          sts L393,R2
 1A92           L408:
 1A92           ; 	if(waitMotTurnPlate){if(GetMotState(MOT_TURN_PLATE)!=STA_SLAVE_FREE)	return 0;waitMotTurnPlate = 0;}
 1A92 20901800          lds R2,L394
 1A96 2220              tst R2
 1A98 59F0              breq L412
 1A9A           X223:
 1A9A 01E0              ldi R16,1
 1A9C 0E940000          xcall _GetMotState
 1AA0 402F              mov R20,R16
 1AA2 0130              cpi R16,1
 1AA4 11F0              breq L414
 1AA6           X224:
 1AA6 0027              clr R16
 1AA8 D4C3              xjmp L387
 1AAA           L414:
 1AAA 2224              clr R2
 1AAC 20921800          sts L394,R2
 1AB0           L412:
 1AB0           ; 	
 1AB0           ; 	switch(mainStep)
 1AB0 40911100          lds R20,L388
 1AB4 5527              clr R21
 1AB6 4030              cpi R20,0
 1AB8 4507              cpc R20,R21
 1ABA 39F1              breq L419
 1ABC           X225:
 1ABC 4130              cpi R20,1
 1ABE E0E0              ldi R30,0
 1AC0 5E07              cpc R21,R30
 1AC2 09F4              brne X281
 1AC4 96C0              xjmp L433
 1AC6           X281:
 1AC6           X226:
 1AC6 4230              cpi R20,2
 1AC8 E0E0              ldi R30,0
 1ACA 5E07              cpc R21,R30
 1ACC 09F4              brne X282
 1ACE 29C1              xjmp L451
 1AD0           X282:
 1AD0           X227:
 1AD0 4330              cpi R20,3
 1AD2 E0E0              ldi R30,0
 1AD4 5E07              cpc R21,R30
 1AD6 09F4              brne X283
 1AD8 C3C1              xjmp L469
 1ADA           X283:
 1ADA           X228:
 1ADA 4530              cpi R20,5
 1ADC E0E0              ldi R30,0
 1ADE 5E07              cpc R21,R30
 1AE0 09F4              brne X284
 1AE2 74C2              xjmp L483
 1AE4           X284:
 1AE4           X229:
 1AE4 4030              cpi R20,0
 1AE6 E0E0              ldi R30,0
 1AE8 5E07              cpc R21,R30
 1AEA 0CF4              brge X285
 1AEC B1C3              xjmp L416
 1AEE           X285:
 1AEE           X230:
 1AEE           L509:
 1AEE 4336              cpi R20,99
 1AF0 E0E0              ldi R30,0
 1AF2 5E07              cpc R21,R30
 1AF4 A1F0              breq L420
 1AF6           X231:
 1AF6 4436              cpi R20,100
 1AF8 E0E0              ldi R30,0
 1AFA 5E07              cpc R21,R30
 1AFC F9F0              breq L421
 1AFE           X232:
 1AFE 4536              cpi R20,101
 1B00 E0E0              ldi R30,0
 1B02 5E07              cpc R21,R30
 1B04 09F4              brne X286
 1B06 64C0              xjmp L429
 1B08           X286:
 1B08           X233:
 1B08 A3C3              xjmp L416
 1B0A           L419:
 1B0A           ; 	{
 1B0A           ; 		case 0:	
 1B0A           ; 			MotInitCheck(MOT_CARD_LOAD);
 1B0A 04E0              ldi R16,4
 1B0C 0E940000          xcall _MotInitCheck
 1B10           ;                       waitMotCardLoad = 1;
 1B10 81E0              ldi R24,1
 1B12 80931700          sts L393,R24
 1B16           ;                       mainStep = 99;
 1B16 83E6              ldi R24,99
 1B18 80931100          sts L388,R24
 1B1C           ;                       break;
 1B1C 99C3              xjmp L417
 1B1E           L420:
 1B1E           ; 		case 99:
 1B1E           ; 			mainStep = 100;
 1B1E 84E6              ldi R24,100
 1B20 80931100          sts L388,R24
 1B24           ;                       MotInitCheck(MOT_STORE_CARD_MOVE);
 1B24 08E0              ldi R16,8
 1B26 0E940000          xcall _MotInitCheck
 1B2A           ;                       SetDelayTime(MOT_STORE_CARD_MOVE,10);
 1B2A 2AE0              ldi R18,10
 1B2C 30E0              ldi R19,0
 1B2E 08E0              ldi R16,8
 1B30 0E940000          xcall _SetDelayTime
 1B34           ;                       waitMotCardTrolley = 1; 
 1B34 81E0              ldi R24,1
 1B36 80931600          sts L392,R24
 1B3A           ;                       break;
 1B3A 8AC3              xjmp L417
 1B3C           L421:
 1B3C           ; 		case 100:
 1B3C           ; 			ucTmp = CardSurplusState[GetNewTestCard-1];
 1B3C 80E0              ldi R24,<_CardSurplusState-1
 1B3E 90E0              ldi R25,>_CardSurplusState-1
 1B40 E0910000          lds R30,_GetNewTestCard
 1B44 FF27              clr R31
 1B46 E80F              add R30,R24
 1B48 F91F              adc R31,R25
 1B4A 4081              ldd R20,z+0
 1B4C           ;                       if(CardNoneUseful == 0)
 1B4C 20900000          lds R2,_CardNoneUseful
 1B50 2220              tst R2
 1B52 B1F5              brne L423
 1B54           X234:
 1B54           ; 			{
 1B54           ; 				if(ucTmp == INFO_STORE_EMPTY)
 1B54 4831              cpi R20,24
 1B56 B9F4              brne L425
 1B58           X235:
 1B58           ; 				{
 1B58           ; 					SetBeepWarning();
 1B58 0E940000          xcall _SetBeepWarning
 1B5C           ;                                       Uart0ReUnable;
 1B5C 8091C100          lds R24,193
 1B60 8F7E              andi R24,239
 1B62 8093C100          sts 193,R24
 1B66           ;                                       uart_Printf("!3520 $%4d\r\n", GetNewTestCard);
 1B66 20910000          lds R18,_GetNewTestCard
 1B6A 3327              clr R19
 1B6C 00E0              ldi R16,<L176
 1B6E 10E0              ldi R17,>L176
 1B70 0E940000          xcall _uart_Printf
 1B74           ;                                       Uart0ReEnable;
 1B74 8091C100          lds R24,193
 1B78 8061              ori R24,16
 1B7A 8093C100          sts 193,R24
 1B7E           ;                                       mainStep = 101;
 1B7E 85E6              ldi R24,101
 1B80 80931100          sts L388,R24
 1B84           ;                               }
 1B84 22C0              xjmp L424
 1B86           L425:
 1B86           ; 				else if(ucTmp == INFO_STORE_ERROR)
 1B86 4931              cpi R20,25
 1B88 A9F4              brne L427
 1B8A           X236:
 1B8A           ; 				{
 1B8A           ; 					Uart0ReUnable;
 1B8A 8091C100          lds R24,193
 1B8E 8F7E              andi R24,239
 1B90 8093C100          sts 193,R24
 1B94           ;                                       uart_Printf("!3522 $%4d\r\n", GetNewTestCard);
 1B94 20910000          lds R18,_GetNewTestCard
 1B98 3327              clr R19
 1B9A 00E0              ldi R16,<L179
 1B9C 10E0              ldi R17,>L179
 1B9E 0E940000          xcall _uart_Printf
 1BA2           ;                                       Uart0ReEnable;
 1BA2 8091C100          lds R24,193
 1BA6 8061              ori R24,16
 1BA8 8093C100          sts 193,R24
 1BAC           ;                                       mainStep = 101;
 1BAC 85E6              ldi R24,101
 1BAE 80931100          sts L388,R24
 1BB2           ;                               }
 1BB2 0BC0              xjmp L424
 1BB4           L427:
 1BB4           ; 				else
 1BB4           ; 				{
 1BB4           ; 					mainStep = 1;
 1BB4 81E0              ldi R24,1
 1BB6 80931100          sts L388,R24
 1BBA           ;                                       CardStoreOpenLook = 1;  
 1BBA 80930400          sts _CardStoreOpenLook,R24
 1BBE           ;                               }
 1BBE           ;                       }
 1BBE 05C0              xjmp L424
 1BC0           L423:
 1BC0           ; 			else
 1BC0           ; 			{
 1BC0           ; 				mainStep = 1;
 1BC0 81E0              ldi R24,1
 1BC2 80931100          sts L388,R24
 1BC6           ;                               CardStoreOpenLook = 1;
 1BC6 80930400          sts _CardStoreOpenLook,R24
 1BCA           ;                       }
 1BCA           L424:
 1BCA           ; 			oldStoreState = ucTmp;
 1BCA 40931900          sts L395,R20
 1BCE           ;                       break;
 1BCE 40C3              xjmp L417
 1BD0           L429:
 1BD0           ; 		case 101:
 1BD0           ; 			ucTmp = CardSurplusState[GetNewTestCard-1];
 1BD0 80E0              ldi R24,<_CardSurplusState-1
 1BD2 90E0              ldi R25,>_CardSurplusState-1
 1BD4 E0910000          lds R30,_GetNewTestCard
 1BD8 FF27              clr R31
 1BDA E80F              add R30,R24
 1BDC F91F              adc R31,R25
 1BDE 4081              ldd R20,z+0
 1BE0           ;                       if(ucTmp != oldStoreState)
 1BE0 20901900          lds R2,L395
 1BE4 4215              cp R20,R2
 1BE6 09F4              brne X287
 1BE8 33C3              xjmp L417
 1BEA           X287:
 1BEA           X237:
 1BEA           ; 				mainStep = 100;
 1BEA 84E6              ldi R24,100
 1BEC 80931100          sts L388,R24
 1BF0           ;                       break;
 1BF0 2FC3              xjmp L417
 1BF2           L433:
 1BF2           ; 		case 1: 	// 小车移到片仓前
 1BF2           ; 			switch(workStep)
 1BF2 40911200          lds R20,L389
 1BF6 5527              clr R21
 1BF8 4030              cpi R20,0
 1BFA 4507              cpc R20,R21
 1BFC 81F0              breq L437
 1BFE           X238:
 1BFE 4130              cpi R20,1
 1C00 E0E0              ldi R30,0
 1C02 5E07              cpc R21,R30
 1C04 09F4              brne X288
 1C06 3AC0              xjmp L440
 1C08           X288:
 1C08           X239:
 1C08 4230              cpi R20,2
 1C0A E0E0              ldi R30,0
 1C0C 5E07              cpc R21,R30
 1C0E 09F4              brne X289
 1C10 59C0              xjmp L445
 1C12           X289:
 1C12           X240:
 1C12 4330              cpi R20,3
 1C14 E0E0              ldi R30,0
 1C16 5E07              cpc R21,R30
 1C18 09F4              brne X290
 1C1A 77C0              xjmp L450
 1C1C           X290:
 1C1C           X241:
 1C1C 19C3              xjmp L417
 1C1E           L437:
 1C1E           ; 			{
 1C1E           ; 				case 0:
 1C1E           ; 					storePos = 494;		// 40mm / 0.081 = 494
 1C1E 8EEE              ldi R24,494
 1C20 91E0              ldi R25,1
 1C22 90931400          sts L390+1,R25
 1C26 80931300          sts L390,R24
 1C2A           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 1C2A 8AE0              ldi R24,10
 1C2C 8A83              std y+2,R24
 1C2E 84E1              ldi R24,20
 1C30 8883              std y+0,R24
 1C32 28EC              ldi R18,200
 1C34 08E0              ldi R16,8
 1C36 0E940000          xcall _SetMotRunPam
 1C3A           ;                                       if(CardStoreOpenState & 0x3f) // 如果片仓开启
 1C3A 80912E00          lds R24,_CardStoreOpenState
 1C3E 8F73              andi R24,63
 1C40 91F0              breq L438
 1C42           X242:
 1C42           ; 					{	
 1C42           ; 						Uart0ReUnable;
 1C42 8091C100          lds R24,193
 1C46 8F7E              andi R24,239
 1C48 8093C100          sts 193,R24
 1C4C           ;                                               uart_Printf("!3525\r\n");
 1C4C 00E0              ldi R16,<L191
 1C4E 10E0              ldi R17,>L191
 1C50 0E940000          xcall _uart_Printf
 1C54           ;                                               Uart0ReEnable;
 1C54 8091C100          lds R24,193
 1C58 8061              ori R24,16
 1C5A 8093C100          sts 193,R24
 1C5E           ;                                               workStep = 2;
 1C5E 82E0              ldi R24,2
 1C60 80931200          sts L389,R24
 1C64           ;                                               break;
 1C64 F5C2              xjmp L417
 1C66           L438:
 1C66           ; 					}
 1C66           ; 					MotRunTo(MOT_STORE_CARD_MOVE,storePos);			// 	
 1C66 20911300          lds R18,L390
 1C6A 30911400          lds R19,L390+1
 1C6E 08E0              ldi R16,8
 1C70 0E940000          xcall _MotRunTo
 1C74           ;                                       workStep = 1;
 1C74 81E0              ldi R24,1
 1C76 80931200          sts L389,R24
 1C7A           ;                                       break;
 1C7A EAC2              xjmp L417
 1C7C           L440:
 1C7C           ; 				case 1:
 1C7C           ; 					if(CardStoreOpenState & 0x3f)	// 如果片仓开启
 1C7C 80912E00          lds R24,_CardStoreOpenState
 1C80 8F73              andi R24,63
 1C82 A9F0              breq L441
 1C84           X243:
 1C84           ; 					{	
 1C84           ; 						MotStop(MOT_STORE_CARD_MOVE);
 1C84 08E0              ldi R16,8
 1C86 0E940000          xcall _MotStop
 1C8A           ;                                               Uart0ReUnable;
 1C8A 8091C100          lds R24,193
 1C8E 8F7E              andi R24,239
 1C90 8093C100          sts 193,R24
 1C94           ;                                               uart_Printf("!3525\r\n");
 1C94 00E0              ldi R16,<L191
 1C96 10E0              ldi R17,>L191
 1C98 0E940000          xcall _uart_Printf
 1C9C           ;                                               Uart0ReEnable;
 1C9C 8091C100          lds R24,193
 1CA0 8061              ori R24,16
 1CA2 8093C100          sts 193,R24
 1CA6           ;                                               workStep = 2;
 1CA6 82E0              ldi R24,2
 1CA8 80931200          sts L389,R24
 1CAC           ;                                       }
 1CAC D1C2              xjmp L417
 1CAE           L441:
 1CAE           ; 					else
 1CAE           ; 					{	// 片仓处于关闭状态，等待片仓小车停止
 1CAE           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 1CAE 08E0              ldi R16,8
 1CB0 0E940000          xcall _GetMotState
 1CB4 402F              mov R20,R16
 1CB6 0130              cpi R16,1
 1CB8 09F0              breq L443
 1CBA           X244:
 1CBA           ; 							break;
 1CBA CAC2              xjmp L417
 1CBC           L443:
 1CBC           ; 						else
 1CBC           ; 							workStep = 3;
 1CBC 83E0              ldi R24,3
 1CBE 80931200          sts L389,R24
 1CC2           ;                                       }
 1CC2           ;                                       break;
 1CC2 C6C2              xjmp L417
 1CC4           L445:
 1CC4           ; 				case 2:		// 片仓处于开启状态，等待片仓关闭后从新启动片仓电机
 1CC4           ; 					if((CardStoreOpenState & 0x3f) == 0)
 1CC4 80912E00          lds R24,_CardStoreOpenState
 1CC8 8F73              andi R24,63
 1CCA 09F0              breq X291
 1CCC C1C2              xjmp L417
 1CCE           X291:
 1CCE           X245:
 1CCE           ; 					{
 1CCE           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE) + 5;
 1CCE 08E0              ldi R16,8
 1CD0 0E940000          xcall _GetMotPositionOfStep
 1CD4 A801              movw R20,R16
 1CD6 4B5F              subi R20,251  ; offset = 5
 1CD8 5F4F              sbci R21,255
 1CDA           ;                                               if(siTmp<storePos)
 1CDA 20901300          lds R2,L390
 1CDE 30901400          lds R3,L390+1
 1CE2 4215              cp R20,R2
 1CE4 5305              cpc R21,R3
 1CE6 6CF4              brge L448
 1CE8           X246:
 1CE8           ; 						{
 1CE8           ; 							MotRunTo(MOT_STORE_CARD_MOVE,storePos);
 1CE8 9101              movw R18,R2
 1CEA 08E0              ldi R16,8
 1CEC 0E940000          xcall _MotRunTo
 1CF0           ;                                                       SetDelayTime(MOT_STORE_CARD_MOVE,1);
 1CF0 21E0              ldi R18,1
 1CF2 30E0              ldi R19,0
 1CF4 08E0              ldi R16,8
 1CF6 0E940000          xcall _SetDelayTime
 1CFA           ;                                                       workStep = 1;
 1CFA 81E0              ldi R24,1
 1CFC 80931200          sts L389,R24
 1D00           ;                                               }
 1D00 A7C2              xjmp L417
 1D02           L448:
 1D02           ; 						else
 1D02           ; 						{
 1D02           ; 							workStep = 3;
 1D02 83E0              ldi R24,3
 1D04 80931200          sts L389,R24
 1D08           ;                                               }
 1D08           ;                                       }
 1D08           ;                                       break;
 1D08 A3C2              xjmp L417
 1D0A           L450:
 1D0A           ; 				case 3:	// 片仓取片小车已运行到片仓起始处
 1D0A           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,10);
 1D0A 2AE0              ldi R18,10
 1D0C 30E0              ldi R19,0
 1D0E 08E0              ldi R16,8
 1D10 0E940000          xcall _SetDelayTime
 1D14           ;                                       workStep = 0;
 1D14 2224              clr R2
 1D16 20921200          sts L389,R2
 1D1A           ;                                       mainStep = 2;
 1D1A 82E0              ldi R24,2
 1D1C 80931100          sts L388,R24
 1D20           ;                                       break;
 1D20           ;                       }
 1D20           ;                       break;
 1D20 97C2              xjmp L417
 1D22           L451:
 1D22           ; 		case 2:		// 小车移动到取片起始位置
 1D22           ; 			switch(workStep)
 1D22 60911200          lds R22,L389
 1D26 7727              clr R23
 1D28 6030              cpi R22,0
 1D2A 6707              cpc R22,R23
 1D2C 81F0              breq L455
 1D2E           X247:
 1D2E 6130              cpi R22,1
 1D30 E0E0              ldi R30,0
 1D32 7E07              cpc R23,R30
 1D34 09F4              brne X292
 1D36 3DC0              xjmp L458
 1D38           X292:
 1D38           X248:
 1D38 6230              cpi R22,2
 1D3A E0E0              ldi R30,0
 1D3C 7E07              cpc R23,R30
 1D3E 09F4              brne X293
 1D40 5CC0              xjmp L463
 1D42           X293:
 1D42           X249:
 1D42 6330              cpi R22,3
 1D44 E0E0              ldi R30,0
 1D46 7E07              cpc R23,R30
 1D48 09F4              brne X294
 1D4A 7BC0              xjmp L468
 1D4C           X294:
 1D4C           X250:
 1D4C 81C2              xjmp L417
 1D4E           L455:
 1D4E           ; 			{
 1D4E           ; 				case 0:
 1D4E           ; 					if(CardStoreOpenState & 0x3f)
 1D4E 80912E00          lds R24,_CardStoreOpenState
 1D52 8F73              andi R24,63
 1D54 91F0              breq L456
 1D56           X251:
 1D56           ; 					{
 1D56           ; 						Uart0ReUnable;
 1D56 8091C100          lds R24,193
 1D5A 8F7E              andi R24,239
 1D5C 8093C100          sts 193,R24
 1D60           ;                                               uart_Printf("!3526\r\n");
 1D60 00E0              ldi R16,<L210
 1D62 10E0              ldi R17,>L210
 1D64 0E940000          xcall _uart_Printf
 1D68           ;                                               Uart0ReEnable;
 1D68 8091C100          lds R24,193
 1D6C 8061              ori R24,16
 1D6E 8093C100          sts 193,R24
 1D72           ;                                               workStep = 2;
 1D72 82E0              ldi R24,2
 1D74 80931200          sts L389,R24
 1D78           ;                                               break;
 1D78 6BC2              xjmp L417
 1D7A           L456:
 1D7A           ; 					}
 1D7A           ; 					storePos = CalCardStorePos(GetNewTestCard);	
 1D7A 00910000          lds R16,_GetNewTestCard
 1D7E 0E94D900          xcall _CalCardStorePos
 1D82 5801              movw R10,R16
 1D84 B0921400          sts L390+1,R11
 1D88 A0921300          sts L390,R10
 1D8C           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 1D8C 8AE0              ldi R24,10
 1D8E 8A83              std y+2,R24
 1D90 84E1              ldi R24,20
 1D92 8883              std y+0,R24
 1D94 28EC              ldi R18,200
 1D96 08E0              ldi R16,8
 1D98 0E940000          xcall _SetMotRunPam
 1D9C           ;                                       MotRunTo(MOT_STORE_CARD_MOVE,storePos);                 //      
 1D9C 20911300          lds R18,L390
 1DA0 30911400          lds R19,L390+1
 1DA4 08E0              ldi R16,8
 1DA6 0E940000          xcall _MotRunTo
 1DAA           ;                                       workStep = 1;
 1DAA 81E0              ldi R24,1
 1DAC 80931200          sts L389,R24
 1DB0           ;                                       break;
 1DB0 4FC2              xjmp L417
 1DB2           L458:
 1DB2           ; 				case 1:
 1DB2           ; 					if(CardStoreOpenState & 0x3f)
 1DB2 80912E00          lds R24,_CardStoreOpenState
 1DB6 8F73              andi R24,63
 1DB8 A9F0              breq L459
 1DBA           X252:
 1DBA           ; 					{
 1DBA           ; 						Uart0ReUnable;
 1DBA 8091C100          lds R24,193
 1DBE 8F7E              andi R24,239
 1DC0 8093C100          sts 193,R24
 1DC4           ;                                               MotStop(MOT_STORE_CARD_MOVE);
 1DC4 08E0              ldi R16,8
 1DC6 0E940000          xcall _MotStop
 1DCA           ;                                               uart_Printf("!3526\r\n");
 1DCA 00E0              ldi R16,<L210
 1DCC 10E0              ldi R17,>L210
 1DCE 0E940000          xcall _uart_Printf
 1DD2           ;                                               Uart0ReEnable;
 1DD2 8091C100          lds R24,193
 1DD6 8061              ori R24,16
 1DD8 8093C100          sts 193,R24
 1DDC           ;                                               workStep = 2;
 1DDC 82E0              ldi R24,2
 1DDE 80931200          sts L389,R24
 1DE2           ;                                       }
 1DE2 36C2              xjmp L417
 1DE4           L459:
 1DE4           ; 					else
 1DE4           ; 					{
 1DE4           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 1DE4 08E0              ldi R16,8
 1DE6 0E940000          xcall _GetMotState
 1DEA 602F              mov R22,R16
 1DEC 0130              cpi R16,1
 1DEE 09F0              breq L461
 1DF0           X253:
 1DF0           ; 							break;
 1DF0 2FC2              xjmp L417
 1DF2           L461:
 1DF2           ; 						else
 1DF2           ; 							workStep = 3;
 1DF2 83E0              ldi R24,3
 1DF4 80931200          sts L389,R24
 1DF8           ;                                       }
 1DF8           ;                                       break;
 1DF8 2BC2              xjmp L417
 1DFA           L463:
 1DFA           ; 				case 2:		// 片仓处于开启状态，等待片仓关闭后从新启动片仓电机
 1DFA           ; 					if((CardStoreOpenState & 0x3f) == 0)
 1DFA 80912E00          lds R24,_CardStoreOpenState
 1DFE 8F73              andi R24,63
 1E00 09F0              breq X295
 1E02 26C2              xjmp L417
 1E04           X295:
 1E04           X254:
 1E04           ; 					{
 1E04           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE) + 5;
 1E04 08E0              ldi R16,8
 1E06 0E940000          xcall _GetMotPositionOfStep
 1E0A B801              movw R22,R16
 1E0C AB01              movw R20,R22
 1E0E 4B5F              subi R20,251  ; offset = 5
 1E10 5F4F              sbci R21,255
 1E12           ;                                               if(siTmp<storePos)
 1E12 20901300          lds R2,L390
 1E16 30901400          lds R3,L390+1
 1E1A 4215              cp R20,R2
 1E1C 5305              cpc R21,R3
 1E1E 6CF4              brge L466
 1E20           X255:
 1E20           ; 						{
 1E20           ; 							MotRunTo(MOT_STORE_CARD_MOVE,storePos);
 1E20 9101              movw R18,R2
 1E22 08E0              ldi R16,8
 1E24 0E940000          xcall _MotRunTo
 1E28           ;                                                       SetDelayTime(MOT_STORE_CARD_MOVE,1);
 1E28 21E0              ldi R18,1
 1E2A 30E0              ldi R19,0
 1E2C 08E0              ldi R16,8
 1E2E 0E940000          xcall _SetDelayTime
 1E32           ;                                                       workStep = 1;
 1E32 81E0              ldi R24,1
 1E34 80931200          sts L389,R24
 1E38           ;                                               }
 1E38 0BC2              xjmp L417
 1E3A           L466:
 1E3A           ; 						else
 1E3A           ; 						{
 1E3A           ; 							workStep = 3;
 1E3A 83E0              ldi R24,3
 1E3C 80931200          sts L389,R24
 1E40           ;                                               }
 1E40           ;                                       }
 1E40           ;                                       break;
 1E40 07C2              xjmp L417
 1E42           L468:
 1E42           ; 				case 3:	// 片仓取片小车已运行到目的地
 1E42           ; 					MotInitCheck(MOT_CARD_LOAD);
 1E42 04E0              ldi R16,4
 1E44 0E940000          xcall _MotInitCheck
 1E48           ;                                       SetDelayTime(MOT_STORE_CARD_MOVE,5);
 1E48 25E0              ldi R18,5
 1E4A 30E0              ldi R19,0
 1E4C 08E0              ldi R16,8
 1E4E 0E940000          xcall _SetDelayTime
 1E52           ;                                       workStep = 0;
 1E52 2224              clr R2
 1E54 20921200          sts L389,R2
 1E58           ;                                       mainStep = 3;
 1E58 83E0              ldi R24,3
 1E5A 80931100          sts L388,R24
 1E5E           ;                                       break;
 1E5E           ;                       }
 1E5E           ;                       break;
 1E5E F8C1              xjmp L417
 1E60           L469:
 1E60           ; 		case 3:// 钩片抬起，小车钩片前进，使之进入钩片道槽
 1E60           ; 			switch(workStep)
 1E60 60911200          lds R22,L389
 1E64 7727              clr R23
 1E66 6030              cpi R22,0
 1E68 6707              cpc R22,R23
 1E6A 09F4              brne X296
 1E6C 2EC0              xjmp L473
 1E6E           X296:
 1E6E           X256:
 1E6E 6130              cpi R22,1
 1E70 E0E0              ldi R30,0
 1E72 7E07              cpc R23,R30
 1E74 09F4              brne X297
 1E76 3EC0              xjmp L474
 1E78           X297:
 1E78           X257:
 1E78 6230              cpi R22,2
 1E7A E0E0              ldi R30,0
 1E7C 7E07              cpc R23,R30
 1E7E 09F4              brne X298
 1E80 40C0              xjmp L475
 1E82           X298:
 1E82           X258:
 1E82 6330              cpi R22,3
 1E84 E0E0              ldi R30,0
 1E86 7E07              cpc R23,R30
 1E88 09F4              brne X299
 1E8A 4EC0              xjmp L476
 1E8C           X299:
 1E8C           X259:
 1E8C 6430              cpi R22,4
 1E8E E0E0              ldi R30,0
 1E90 7E07              cpc R23,R30
 1E92 09F4              brne X300
 1E94 55C0              xjmp L477
 1E96           X300:
 1E96           X260:
 1E96 6530              cpi R22,5
 1E98 E0E0              ldi R30,0
 1E9A 7E07              cpc R23,R30
 1E9C 09F4              brne X301
 1E9E 5CC0              xjmp L478
 1EA0           X301:
 1EA0           X261:
 1EA0 6630              cpi R22,6
 1EA2 E0E0              ldi R30,0
 1EA4 7E07              cpc R23,R30
 1EA6 09F4              brne X302
 1EA8 63C0              xjmp L479
 1EAA           X302:
 1EAA           X262:
 1EAA 6730              cpi R22,7
 1EAC E0E0              ldi R30,0
 1EAE 7E07              cpc R23,R30
 1EB0 09F4              brne X303
 1EB2 6AC0              xjmp L480
 1EB4           X303:
 1EB4           X263:
 1EB4 6830              cpi R22,8
 1EB6 E0E0              ldi R30,0
 1EB8 7E07              cpc R23,R30
 1EBA 09F4              brne X304
 1EBC 6EC0              xjmp L481
 1EBE           X304:
 1EBE           X264:
 1EBE 6930              cpi R22,9
 1EC0 E0E0              ldi R30,0
 1EC2 7E07              cpc R23,R30
 1EC4 09F4              brne X305
 1EC6 78C0              xjmp L482
 1EC8           X305:
 1EC8           X265:
 1EC8 C3C1              xjmp L417
 1ECA           L473:
 1ECA           ; 			{
 1ECA           ; 				case 0:	
 1ECA           ; 					SetCardTrolleyState(1);
 1ECA 01E0              ldi R16,1
 1ECC 0E940701          xcall _SetCardTrolleyState
 1ED0           ;                                       SetMotRunPam(MOT_STORE_CARD_MOVE,16,10,CURRENT_STORE_MOVE);
 1ED0 8AE0              ldi R24,10
 1ED2 8A83              std y+2,R24
 1ED4 8883              std y+0,R24
 1ED6 20E1              ldi R18,16
 1ED8 08E0              ldi R16,8
 1EDA 0E940000          xcall _SetMotRunPam
 1EDE           ;                                       MotRun(MOT_STORE_CARD_MOVE,-98);
 1EDE 2EE9              ldi R18,-98
 1EE0 3FEF              ldi R19,-1
 1EE2 08E0              ldi R16,8
 1EE4 0E940000          xcall _MotRun
 1EE8           ;                                       waitMotCardTrolley = 1;
 1EE8 81E0              ldi R24,1
 1EEA 80931600          sts L392,R24
 1EEE           ;                                       workStep = 1;
 1EEE 80931200          sts L389,R24
 1EF2           ;                                       break;
 1EF2 AEC1              xjmp L417
 1EF4           L474:
 1EF4           ; 				case 1:
 1EF4           ; 					SetCardTrolleyState(0);
 1EF4 0027              clr R16
 1EF6 0E940701          xcall _SetCardTrolleyState
 1EFA           ;                                       workStep = 2;
 1EFA 82E0              ldi R24,2
 1EFC 80931200          sts L389,R24
 1F00           ;                                       break;
 1F00 A7C1              xjmp L417
 1F02           L475:
 1F02           ; 				case 2:		
 1F02           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,100,10,CURRENT_STORE_MOVE);
 1F02 8AE0              ldi R24,10
 1F04 8A83              std y+2,R24
 1F06 8883              std y+0,R24
 1F08 24E6              ldi R18,100
 1F0A 08E0              ldi R16,8
 1F0C 0E940000          xcall _SetMotRunPam
 1F10           ;                                       MotRun(MOT_STORE_CARD_MOVE,-(235+70));  
 1F10 2FEC              ldi R18,-305
 1F12 3EEF              ldi R19,-2
 1F14 08E0              ldi R16,8
 1F16 0E940000          xcall _MotRun
 1F1A           ;                                       waitMotCardTrolley = 1;
 1F1A 81E0              ldi R24,1
 1F1C 80931600          sts L392,R24
 1F20           ;                               //      workStep = 3;
 1F20           ;                                       workStep = 7;
 1F20 87E0              ldi R24,7
 1F22 80931200          sts L389,R24
 1F26           ;                                       break;
 1F26 94C1              xjmp L417
 1F28           L476:
 1F28           ; 				case 3:
 1F28           ; 					MotRun(MOT_STORE_CARD_MOVE,86);		
 1F28 26E5              ldi R18,86
 1F2A 30E0              ldi R19,0
 1F2C 08E0              ldi R16,8
 1F2E 0E940000          xcall _MotRun
 1F32           ;                                       waitMotCardTrolley = 1;
 1F32 81E0              ldi R24,1
 1F34 80931600          sts L392,R24
 1F38           ;                                       workStep = 4;
 1F38 84E0              ldi R24,4
 1F3A 80931200          sts L389,R24
 1F3E           ;                                       break;
 1F3E 88C1              xjmp L417
 1F40           L477:
 1F40           ; 				case 4:
 1F40           ; 					MotRun(MOT_STORE_CARD_MOVE,-86);			
 1F40 2AEA              ldi R18,-86
 1F42 3FEF              ldi R19,-1
 1F44 08E0              ldi R16,8
 1F46 0E940000          xcall _MotRun
 1F4A           ;                                       waitMotCardTrolley = 1;
 1F4A 81E0              ldi R24,1
 1F4C 80931600          sts L392,R24
 1F50           ;                                       workStep = 5;
 1F50 85E0              ldi R24,5
 1F52 80931200          sts L389,R24
 1F56           ;                                       break;
 1F56 7CC1              xjmp L417
 1F58           L478:
 1F58           ; 				case 5:
 1F58           ; 					MotRun(MOT_STORE_CARD_MOVE,99);	
 1F58 23E6              ldi R18,99
 1F5A 30E0              ldi R19,0
 1F5C 08E0              ldi R16,8
 1F5E 0E940000          xcall _MotRun
 1F62           ;                                       waitMotCardTrolley = 1;
 1F62 81E0              ldi R24,1
 1F64 80931600          sts L392,R24
 1F68           ;                                       workStep = 6;
 1F68 86E0              ldi R24,6
 1F6A 80931200          sts L389,R24
 1F6E           ;                                       break;
 1F6E 70C1              xjmp L417
 1F70           L479:
 1F70           ; 				case 6:
 1F70           ; 					MotRun(MOT_STORE_CARD_MOVE,-150);
 1F70 2AE6              ldi R18,-150
 1F72 3FEF              ldi R19,-1
 1F74 08E0              ldi R16,8
 1F76 0E940000          xcall _MotRun
 1F7A           ;                                       waitMotCardTrolley = 1;
 1F7A 81E0              ldi R24,1
 1F7C 80931600          sts L392,R24
 1F80           ;                                       workStep = 7;
 1F80 87E0              ldi R24,7
 1F82 80931200          sts L389,R24
 1F86           ;                                       break;
 1F86 64C1              xjmp L417
 1F88           L480:
 1F88           ; 				case 7:
 1F88           ; 					SetDelayTime(MOT_STORE_CARD_MOVE,10);
 1F88 2AE0              ldi R18,10
 1F8A 30E0              ldi R19,0
 1F8C 08E0              ldi R16,8
 1F8E 0E940000          xcall _SetDelayTime
 1F92           ;                                       workStep = 8;
 1F92 88E0              ldi R24,8
 1F94 80931200          sts L389,R24
 1F98           ;                                       break;
 1F98 5BC1              xjmp L417
 1F9A           L481:
 1F9A           ; 				case 8:
 1F9A           ; 					SetCardTrolleyState(2);
 1F9A 02E0              ldi R16,2
 1F9C 0E940701          xcall _SetCardTrolleyState
 1FA0           ;                                       MotRun(MOT_STORE_CARD_MOVE,320);
 1FA0 20E4              ldi R18,320
 1FA2 31E0              ldi R19,1
 1FA4 08E0              ldi R16,8
 1FA6 0E940000          xcall _MotRun
 1FAA           ;                                       waitMotCardTrolley = 1;
 1FAA 81E0              ldi R24,1
 1FAC 80931600          sts L392,R24
 1FB0           ;                                       workStep = 9;
 1FB0 89E0              ldi R24,9
 1FB2 80931200          sts L389,R24
 1FB6           ;                                       break;
 1FB6 4CC1              xjmp L417
 1FB8           L482:
 1FB8           ; 				case 9:
 1FB8           ; 					SetCardTrolleyState(0);
 1FB8 0027              clr R16
 1FBA 0E940701          xcall _SetCardTrolleyState
 1FBE           ;                                       workStep = 0;
 1FBE 2224              clr R2
 1FC0 20921200          sts L389,R2
 1FC4           ;                                       mainStep = 5;
 1FC4 85E0              ldi R24,5
 1FC6 80931100          sts L388,R24
 1FCA           ;                                       break;
 1FCA           ;                               default:
 1FCA           ;                                       break;
 1FCA           ;                       }
 1FCA           ;                       break;
 1FCA 42C1              xjmp L417
 1FCC           L483:
 1FCC           ; 		case 5:	// 运行到离开片仓位置
 1FCC           ; 			switch(workStep)
 1FCC 60911200          lds R22,L389
 1FD0 7727              clr R23
 1FD2 6030              cpi R22,0
 1FD4 6707              cpc R22,R23
 1FD6 09F4              brne X306
 1FD8 2EC0              xjmp L487
 1FDA           X306:
 1FDA           X266:
 1FDA 6130              cpi R22,1
 1FDC E0E0              ldi R30,0
 1FDE 7E07              cpc R23,R30
 1FE0 09F4              brne X307
 1FE2 50C0              xjmp L490
 1FE4           X307:
 1FE4           X267:
 1FE4 6230              cpi R22,2
 1FE6 E0E0              ldi R30,0
 1FE8 7E07              cpc R23,R30
 1FEA 09F4              brne X308
 1FEC 77C0              xjmp L495
 1FEE           X308:
 1FEE           X268:
 1FEE 6430              cpi R22,4
 1FF0 E0E0              ldi R30,0
 1FF2 7E07              cpc R23,R30
 1FF4 09F4              brne X309
 1FF6 93C0              xjmp L500
 1FF8           X309:
 1FF8           X269:
 1FF8 6530              cpi R22,5
 1FFA E0E0              ldi R30,0
 1FFC 7E07              cpc R23,R30
 1FFE 09F4              brne X310
 2000 A2C0              xjmp L501
 2002           X310:
 2002           X270:
 2002 6630              cpi R22,6
 2004 E0E0              ldi R30,0
 2006 7E07              cpc R23,R30
 2008 09F4              brne X311
 200A B6C0              xjmp L502
 200C           X311:
 200C           X271:
 200C 6730              cpi R22,7
 200E E0E0              ldi R30,0
 2010 7E07              cpc R23,R30
 2012 09F4              brne X312
 2014 C2C0              xjmp L503
 2016           X312:
 2016           X272:
 2016 6830              cpi R22,8
 2018 E0E0              ldi R30,0
 201A 7E07              cpc R23,R30
 201C 09F4              brne X313
 201E CBC0              xjmp L504
 2020           X313:
 2020           X273:
 2020 6930              cpi R22,9
 2022 E0E0              ldi R30,0
 2024 7E07              cpc R23,R30
 2026 09F4              brne X314
 2028 D5C0              xjmp L505
 202A           X314:
 202A           X274:
 202A 6A30              cpi R22,10
 202C E0E0              ldi R30,0
 202E 7E07              cpc R23,R30
 2030 09F4              brne X315
 2032 EEC0              xjmp L507
 2034           X315:
 2034           X275:
 2034 0DC1              xjmp L484
 2036           L487:
 2036           ; 			{
 2036           ; 				case 0:
 2036           ; 					SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 2036 8AE0              ldi R24,10
 2038 8A83              std y+2,R24
 203A 84E1              ldi R24,20
 203C 8883              std y+0,R24
 203E 28EC              ldi R18,200
 2040 08E0              ldi R16,8
 2042 0E940000          xcall _SetMotRunPam
 2046           ;                                       if(CardStoreOpenState & 0x3f)
 2046 80912E00          lds R24,_CardStoreOpenState
 204A 8F73              andi R24,63
 204C 91F0              breq L488
 204E           X276:
 204E           ; 					{	
 204E           ; 						Uart0ReUnable;
 204E 8091C100          lds R24,193
 2052 8F7E              andi R24,239
 2054 8093C100          sts 193,R24
 2058           ;                                               uart_Printf("!3527\r\n");
 2058 00E0              ldi R16,<L245
 205A 10E0              ldi R17,>L245
 205C 0E940000          xcall _uart_Printf
 2060           ;                                               Uart0ReEnable;
 2060 8091C100          lds R24,193
 2064 8061              ori R24,16
 2066 8093C100          sts 193,R24
 206A           ;                                               workStep = 2;
 206A 82E0              ldi R24,2
 206C 80931200          sts L389,R24
 2070           ;                                               break;
 2070 EFC0              xjmp L485
 2072           L488:
 2072           ; 					}
 2072           ; 					MotRunTo(MOT_STORE_CARD_MOVE,0);	
 2072 2227              clr R18
 2074 3327              clr R19
 2076 08E0              ldi R16,8
 2078 0E940000          xcall _MotRunTo
 207C           ;                                       workStep = 1;
 207C 81E0              ldi R24,1
 207E 80931200          sts L389,R24
 2082           ;                                       break;
 2082 E6C0              xjmp L485
 2084           L490:
 2084           ; 				case 1:
 2084           ; 					if(CardStoreOpenState & 0x3f)
 2084 80912E00          lds R24,_CardStoreOpenState
 2088 8F73              andi R24,63
 208A A9F0              breq L491
 208C           X277:
 208C           ; 					{
 208C           ; 						MotStop(MOT_STORE_CARD_MOVE);
 208C 08E0              ldi R16,8
 208E 0E940000          xcall _MotStop
 2092           ;                                               Uart0ReUnable;
 2092 8091C100          lds R24,193
 2096 8F7E              andi R24,239
 2098 8093C100          sts 193,R24
 209C           ;                                               uart_Printf("!3527\r\n");
 209C 00E0              ldi R16,<L245
 209E 10E0              ldi R17,>L245
 20A0 0E940000          xcall _uart_Printf
 20A4           ;                                               Uart0ReEnable;
 20A4 8091C100          lds R24,193
 20A8 8061              ori R24,16
 20AA 8093C100          sts 193,R24
 20AE           ;                                               workStep = 2;
 20AE 82E0              ldi R24,2
 20B0 80931200          sts L389,R24
 20B4           ;                                       }
 20B4 CDC0              xjmp L485
 20B6           L491:
 20B6           ; 					else
 20B6           ; 					{	
 20B6           ; 						if(GetMotState(MOT_STORE_CARD_MOVE)!=STA_SLAVE_FREE)
 20B6 08E0              ldi R16,8
 20B8 0E940000          xcall _GetMotState
 20BC 602F              mov R22,R16
 20BE 0130              cpi R16,1
 20C0 09F0              breq L493
 20C2           X278:
 20C2           ; 							break;
 20C2 C6C0              xjmp L485
 20C4           L493:
 20C4           ; 						else
 20C4           ; 						{
 20C4           ; 							workStep = 4;
 20C4 84E0              ldi R24,4
 20C6 80931200          sts L389,R24
 20CA           ;                                                       SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 20CA 8AE0              ldi R24,10
 20CC 8A83              std y+2,R24
 20CE 85E0              ldi R24,5
 20D0 8883              std y+0,R24
 20D2 22E3              ldi R18,50
 20D4 08E0              ldi R16,8
 20D6 0E940000          xcall _SetMotRunPam
 20DA           ;                                               }
 20DA           ;                                       }
 20DA           ;                                       break;
 20DA BAC0              xjmp L485
 20DC           L495:
 20DC           ; 				case 2:		
 20DC           ; 					if((CardStoreOpenState & 0x3f) == 0)
 20DC 80912E00          lds R24,_CardStoreOpenState
 20E0 8F73              andi R24,63
 20E2 09F0              breq X316
 20E4 B5C0              xjmp L485
 20E6           X316:
 20E6           X279:
 20E6           ; 					{	
 20E6           ; 						siTmp = GetMotPositionOfStep(MOT_STORE_CARD_MOVE);
 20E6 08E0              ldi R16,8
 20E8 0E940000          xcall _GetMotPositionOfStep
 20EC 5801              movw R10,R16
 20EE A501              movw R20,R10
 20F0           ;                                               if(siTmp > 0)
 20F0 2224              clr R2
 20F2 3324              clr R3
 20F4 2016              cp R2,R16
 20F6 3106              cpc R3,R17
 20F8 74F4              brge L498
 20FA           X280:
 20FA           ; 						{
 20FA           ; 							MotRunTo(MOT_STORE_CARD_MOVE,0);
 20FA 2227              clr R18
 20FC 3327              clr R19
 20FE 08E0              ldi R16,8
 2100 0E940000          xcall _MotRunTo
 2104           ;                                                       SetDelayTime(MOT_STORE_CARD_MOVE,1);
 2104 21E0              ldi R18,1
 2106 30E0              ldi R19,0
 2108 08E0              ldi R16,8
 210A 0E940000          xcall _SetDelayTime
 210E           ;                                                       workStep = 1;
 210E 81E0              ldi R24,1
 2110 80931200          sts L389,R24
 2114           ;                                               }
 2114 9DC0              xjmp L485
 2116           L498:
 2116           ; 						else
 2116           ; 						{
 2116           ; 							workStep = 4;
 2116 84E0              ldi R24,4
 2118 80931200          sts L389,R24
 211C           ;                                               }
 211C           ;                                       }
 211C           ;                                       break;
 211C 99C0              xjmp L485
 211E           L500:
 211E           ; 				case 4:
 211E           ; 						SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 211E 8AE0              ldi R24,10
 2120 8A83              std y+2,R24
 2122 85E0              ldi R24,5
 2124 8883              std y+0,R24
 2126 22E3              ldi R18,50
 2128 08E0              ldi R16,8
 212A 0E940000          xcall _SetMotRunPam
 212E           ;                                               MotRunTo(MOT_STORE_CARD_MOVE,70);
 212E 26E4              ldi R18,70
 2130 30E0              ldi R19,0
 2132 08E0              ldi R16,8
 2134 0E940000          xcall _MotRunTo
 2138           ;                                               waitMotCardTrolley = 1;
 2138 81E0              ldi R24,1
 213A 80931600          sts L392,R24
 213E           ;                                               workStep = 5;
 213E 85E0              ldi R24,5
 2140 80931200          sts L389,R24
 2144           ;                                               break;
 2144 85C0              xjmp L485
 2146           L501:
 2146           ; 				case 5:
 2146           ; 						SetMotRunPam(MOT_CARD_LOAD,30,5,CURRENT_CARD_LOAD);
 2146 84E0              ldi R24,4
 2148 8A83              std y+2,R24
 214A 85E0              ldi R24,5
 214C 8883              std y+0,R24
 214E 2EE1              ldi R18,30
 2150 04E0              ldi R16,4
 2152 0E940000          xcall _SetMotRunPam
 2156           ;                                               MotRunTo(MOT_CARD_LOAD,55); 
 2156 27E3              ldi R18,55
 2158 30E0              ldi R19,0
 215A 04E0              ldi R16,4
 215C 0E940000          xcall _MotRunTo
 2160           ;                                               waitMotCardLoad = 1;
 2160 81E0              ldi R24,1
 2162 80931700          sts L393,R24
 2166           ;                                               workStep = 6;
 2166 86E0              ldi R24,6
 2168 80931200          sts L389,R24
 216C           ;                                               SetDelayTime(MOT_STORE_CARD_MOVE,3);
 216C 23E0              ldi R18,3
 216E 30E0              ldi R19,0
 2170 08E0              ldi R16,8
 2172 0E940000          xcall _SetDelayTime
 2176           ;                                               break;
 2176 6CC0              xjmp L485
 2178           L502:
 2178           ; 				case 6:
 2178           ; 						MotRunTo(MOT_CARD_LOAD,20);
 2178 24E1              ldi R18,20
 217A 30E0              ldi R19,0
 217C 04E0              ldi R16,4
 217E 0E940000          xcall _MotRunTo
 2182           ;                                               waitMotCardLoad = 1;
 2182 81E0              ldi R24,1
 2184 80931700          sts L393,R24
 2188           ;                                               //workStep = 17;
 2188           ;                                               workStep = 7;
 2188 87E0              ldi R24,7
 218A 80931200          sts L389,R24
 218E           ;                                               SetDelayTime(MOT_STORE_CARD_MOVE,3);
 218E 23E0              ldi R18,3
 2190 30E0              ldi R19,0
 2192 08E0              ldi R16,8
 2194 0E940000          xcall _SetDelayTime
 2198           ;                                               break;
 2198 5BC0              xjmp L485
 219A           L503:
 219A           ; 				/*
 219A           ; 				case 17:
 219A           ; 						MotRunTo(MOT_STORE_CARD_MOVE,0);
 219A           ; 						workStep = 18;
 219A           ; 						break;
 219A           ; 				case 18:
 219A           ; 						SetDelayTime(MOT_STORE_CARD_MOVE,3);
 219A           ; 						workStep = 7;
 219A           ; 						break;
 219A           ; 				*/
 219A           ; 				case 7:
 219A           ; 						siTmp = GetCardScanfPos(); 
 219A D9D0              xcall _GetCardScanfPos
 219C 5801              movw R10,R16
 219E A501              movw R20,R10
 21A0           ;                                               MotRunTo(MOT_STORE_CARD_MOVE,(unsigned int)siTmp);
 21A0 9A01              movw R18,R20
 21A2 08E0              ldi R16,8
 21A4 0E940000          xcall _MotRunTo
 21A8           ;                               //              MotRunTo(MOT_STORE_CARD_MOVE,305);
 21A8           ;                                               waitMotCardTrolley = 1;
 21A8 81E0              ldi R24,1
 21AA 80931600          sts L392,R24
 21AE           ;                                               workStep = 8;
 21AE 88E0              ldi R24,8
 21B0 80931200          sts L389,R24
 21B4           ;                                               break;
 21B4 4DC0              xjmp L485
 21B6           L504:
 21B6           ; 				case 8:
 21B6           ; 						SetMotRunPam(MOT_CARD_LOAD,140,10,CURRENT_CARD_LOAD);
 21B6 84E0              ldi R24,4
 21B8 8A83              std y+2,R24
 21BA 8AE0              ldi R24,10
 21BC 8883              std y+0,R24
 21BE 2CE8              ldi R18,140
 21C0 04E0              ldi R16,4
 21C2 0E940000          xcall _SetMotRunPam
 21C6           ;                                               MotInitCheck(MOT_CARD_LOAD);
 21C6 04E0              ldi R16,4
 21C8 0E940000          xcall _MotInitCheck
 21CC           ;                                               workStep = 9;
 21CC 89E0              ldi R24,9
 21CE 80931200          sts L389,R24
 21D2           ;                                               break;
 21D2 3EC0              xjmp L485
 21D4           L505:
 21D4           ; 				case 9:
 21D4           ; 						Uart0ReUnable;
 21D4 8091C100          lds R24,193
 21D8 8F7E              andi R24,239
 21DA 8093C100          sts 193,R24
 21DE           ;                                               uart_Printf("%s $%4d\r\n",strM3146,NewTestInfo.cardStoreNum);
 21DE 20900600          lds R2,_NewTestInfo+6
 21E2 3324              clr R3
 21E4 3982              std y+1,R3
 21E6 2882              std y+0,R2
 21E8 20E0              ldi R18,<_strM3146
 21EA 30E0              ldi R19,>_strM3146
 21EC 00E0              ldi R16,<L32
 21EE 10E0              ldi R17,>L32
 21F0 0E940000          xcall _uart_Printf
 21F4           ;                                               Uart0ReEnable;
 21F4 8091C100          lds R24,193
 21F8 8061              ori R24,16
 21FA 8093C100          sts 193,R24
 21FE           ;                                               SetDelayTime(MOT_STORE_CARD_MOVE,50);
 21FE 22E3              ldi R18,50
 2200 30E0              ldi R19,0
 2202 08E0              ldi R16,8
 2204 0E940000          xcall _SetDelayTime
 2208           ;                                               workStep = 10;
 2208 8AE0              ldi R24,10
 220A 80931200          sts L389,R24
 220E           ;                                               break;
 220E 20C0              xjmp L485
 2210           L507:
 2210           ; 				case 10:
 2210           ; 						workStep = 0;
 2210 2224              clr R2
 2212 20921200          sts L389,R2
 2216           ;                                               mainStep = 0;
 2216 20921100          sts L388,R2
 221A           ;                                               inWork = 0;
 221A 20921500          sts L391,R2
 221E           ;                                               CardStoreOpenLook = 0;
 221E 20920400          sts _CardStoreOpenLook,R2
 2222           ;                                               Uart0ReUnable;
 2222 8091C100          lds R24,193
 2226 8F7E              andi R24,239
 2228 8093C100          sts 193,R24
 222C           ;                                               uart_Printf("%s $%4d\r\n",strM4199,NewTestInfo.cardStoreNum);
 222C 20900600          lds R2,_NewTestInfo+6
 2230 3324              clr R3
 2232 3982              std y+1,R3
 2234 2882              std y+0,R2
 2236 20E0              ldi R18,<_strM4199
 2238 30E0              ldi R19,>_strM4199
 223A 00E0              ldi R16,<L32
 223C 10E0              ldi R17,>L32
 223E 0E940000          xcall _uart_Printf
 2242           ;                                               Uart0ReEnable;
 2242 8091C100          lds R24,193
 2246 8061              ori R24,16
 2248 8093C100          sts 193,R24
 224C           ;                                               return 1;
 224C 01E0              ldi R16,1
 224E 01C0              xjmp L387
 2250           L484:
 2250           L485:
 2250           ; 				}
 2250           ; 		}
 2250           L416:
 2250           L417:
 2250           ; 		return 0;
 2250 0027              clr R16
 2252           L387:
 2252                   .dbline 0 ; func end
 2252 2396              adiw R28,3
 2254 0C940000          xjmp pop_xgsetF00C
 2258           ;            num -> R10
                        .even
 2258           _SetCardScanf::
 2258 AA92              st -y,R10
 225A A02E              mov R10,R16
 225C 2297              sbiw R28,2
 225E           ; }
 225E           ; 
 225E           ; void SetCardScanf(unsigned char num)
 225E           ; {
 225E           ;       if(num == 0)
 225E AA20              tst R10
 2260 21F4              brne L511
 2262           X317:
 2262           ; 		WaitPhotoFlag = 0;
 2262 2224              clr R2
 2264 20920000          sts _WaitPhotoFlag,R2
 2268 03C0              xjmp L512
 226A           L511:
 226A           ; 	else
 226A           ; 		WaitPhotoFlag = 1;
 226A 81E0              ldi R24,1
 226C 80930000          sts _WaitPhotoFlag,R24
 2270           L512:
 2270           ; 	Uart0ReUnable;
 2270 8091C100          lds R24,193
 2274 8F7E              andi R24,239
 2276 8093C100          sts 193,R24
 227A           ;       uart_Printf("%s $%4d\r\n",strM3123,WaitPhotoFlag);
 227A 20900000          lds R2,_WaitPhotoFlag
 227E 3324              clr R3
 2280 3982              std y+1,R3
 2282 2882              std y+0,R2
 2284 20E0              ldi R18,<_strM3123
 2286 30E0              ldi R19,>_strM3123
 2288 00E0              ldi R16,<L32
 228A 10E0              ldi R17,>L32
 228C 0E940000          xcall _uart_Printf
 2290           ;       Uart0ReEnable;
 2290 8091C100          lds R24,193
 2294 8061              ori R24,16
 2296 8093C100          sts 193,R24
 229A           L510:
 229A                   .dbline 0 ; func end
 229A 2296              adiw R28,2
 229C A990              ld R10,y+
 229E 0895              ret
 22A0           ;            num -> R16
                        .even
 22A0           _SetReCardScanf::
 22A0           ; }
 22A0           ; 
 22A0           ; void SetReCardScanf(const unsigned char num)
 22A0           ; {
 22A0           ; 	ReScanfFlag = num;
 22A0 00930100          sts _ReScanfFlag,R16
 22A4           L513:
 22A4                   .dbline 0 ; func end
 22A4 0895              ret
                        .even
 22A6           _GetReCardScanf::
 22A6           ; }
 22A6           ; 
 22A6           ; unsigned char GetReCardScanf(void)
 22A6           ; {
 22A6           ; 	return ReScanfFlag;
 22A6 00910100          lds R16,_ReScanfFlag
 22AA           L514:
 22AA                   .dbline 0 ; func end
 22AA 0895              ret
 22AC           ;              i -> y+2
 22AC           ;              n -> y+3
                        .even
 22AC           _SetCardScanfPos::
 22AC 1A93              st -y,r17
 22AE 0A93              st -y,r16
 22B0 2397              sbiw R28,3
 22B2           ; }
 22B2           ; 
 22B2           ; 
 22B2           ; unsigned int SetCardScanfPos(signed char n)
 22B2           ; {
 22B2           ;       signed char i;
 22B2           ;       if(n == 0)
 22B2 2B80              ldd R2,y+3
 22B4 2220              tst R2
 22B6 91F4              brne L516
 22B8           X318:
 22B8           ; 	{
 22B8           ; 		EEPROM_READ(EEP_ADD_CARDSCANF_POS, i);		// 重新读取写入的设置值
 22B8 81E0              ldi R24,1
 22BA 90E0              ldi R25,0
 22BC 9983              std y+1,R25
 22BE 8883              std y+0,R24
 22C0 9E01              movw R18,R28
 22C2 2E5F              subi R18,254  ; offset = 2
 22C4 3F4F              sbci R19,255
 22C6 0DEC              ldi R16,205
 22C8 10E0              ldi R17,0
 22CA 0E940000          xcall _EEPROMReadBytes_extIO
 22CE           ;               return (_POS_CARD_SCANF + (signed int)i);
 22CE 0A81              ldd R16,y+2
 22D0 1127              clr R17
 22D2 07FD              sbrc R16,7
 22D4 1095              com R17
 22D6 0F5C              subi R16,207  ; offset = 305
 22D8 1E4F              sbci R17,254
 22DA 37C0              xjmp L515
 22DC           L516:
 22DC           ; 	}
 22DC           ; 	else
 22DC           ; 	{
 22DC           ; 		if(n <= 100 && n >= -50)	// 参数范围判断
 22DC 84E6              ldi R24,100
 22DE 2B80              ldd R2,y+3
 22E0 8215              cp R24,R2
 22E2 74F0              brlt L518
 22E4           X319:
 22E4 822D              mov R24,R2
 22E6 8E3C              cpi R24,206
 22E8 5CF0              brlt L518
 22EA           X320:
 22EA           ; 		{
 22EA           ; 			EEPROM_WRITE(EEP_ADD_CARDSCANF_POS, n);
 22EA 81E0              ldi R24,1
 22EC 90E0              ldi R25,0
 22EE 9983              std y+1,R25
 22F0 8883              std y+0,R24
 22F2 9E01              movw R18,R28
 22F4 2D5F              subi R18,253  ; offset = 3
 22F6 3F4F              sbci R19,255
 22F8 0DEC              ldi R16,205
 22FA 10E0              ldi R17,0
 22FC 0E940000          xcall _EEPROMWriteBytes_extIO
 2300           ;               }
 2300           L518:
 2300           ; 		EEPROM_READ(EEP_ADD_CARDSCANF_POS, i);		// 重新读取写入的设置值
 2300 81E0              ldi R24,1
 2302 90E0              ldi R25,0
 2304 9983              std y+1,R25
 2306 8883              std y+0,R24
 2308 9E01              movw R18,R28
 230A 2E5F              subi R18,254  ; offset = 2
 230C 3F4F              sbci R19,255
 230E 0DEC              ldi R16,205
 2310 10E0              ldi R17,0
 2312 0E940000          xcall _EEPROMReadBytes_extIO
 2316           ;               if(i > 100 || i < -50)          // 保存的值有异常
 2316 84E6              ldi R24,100
 2318 2A80              ldd R2,y+2
 231A 8215              cp R24,R2
 231C 1CF0              brlt L522
 231E           X321:
 231E 822D              mov R24,R2
 2320 8E3C              cpi R24,206
 2322 6CF4              brge L520
 2324           X322:
 2324           L522:
 2324           ; 		{
 2324           ; 			i = 0;
 2324 2224              clr R2
 2326 2A82              std y+2,R2
 2328           ;                       EEPROM_WRITE(EEP_ADD_CARDSCANF_POS, i); // 清空保存值
 2328 81E0              ldi R24,1
 232A 90E0              ldi R25,0
 232C 9983              std y+1,R25
 232E 8883              std y+0,R24
 2330 9E01              movw R18,R28
 2332 2E5F              subi R18,254  ; offset = 2
 2334 3F4F              sbci R19,255
 2336 0DEC              ldi R16,205
 2338 10E0              ldi R17,0
 233A 0E940000          xcall _EEPROMWriteBytes_extIO
 233E           ;               }
 233E           L520:
 233E           ; 		return (_POS_CARD_SCANF + (signed int)i);
 233E 0A81              ldd R16,y+2
 2340 1127              clr R17
 2342 07FD              sbrc R16,7
 2344 1095              com R17
 2346 0F5C              subi R16,207  ; offset = 305
 2348 1E4F              sbci R17,254
 234A           L515:
 234A                   .dbline 0 ; func end
 234A 2596              adiw R28,5
 234C 0895              ret
 234E           ;              i -> y+2
                        .even
 234E           _GetCardScanfPos::
 234E 2397              sbiw R28,3
 2350           ;       }
 2350           ; }
 2350           ; 
 2350           ; unsigned int GetCardScanfPos(void)
 2350           ; {
 2350           ;       signed char i;
 2350           ;       EEPROM_READ(EEP_ADD_CARDSCANF_POS, i);          // 重新读取写入的设置值
 2350 81E0              ldi R24,1
 2352 90E0              ldi R25,0
 2354 9983              std y+1,R25
 2356 8883              std y+0,R24
 2358 9E01              movw R18,R28
 235A 2E5F              subi R18,254  ; offset = 2
 235C 3F4F              sbci R19,255
 235E 0DEC              ldi R16,205
 2360 10E0              ldi R17,0
 2362 0E940000          xcall _EEPROMReadBytes_extIO
 2366           ;       if(i > 100 || i < -50)          // 保存的值有异常
 2366 84E6              ldi R24,100
 2368 2A80              ldd R2,y+2
 236A 8215              cp R24,R2
 236C 1CF0              brlt L526
 236E           X323:
 236E 822D              mov R24,R2
 2370 8E3C              cpi R24,206
 2372 6CF4              brge L524
 2374           X324:
 2374           L526:
 2374           ; 	{
 2374           ; 		i = 0;
 2374 2224              clr R2
 2376 2A82              std y+2,R2
 2378           ;               EEPROM_WRITE(EEP_ADD_CARDSCANF_POS, i);
 2378 81E0              ldi R24,1
 237A 90E0              ldi R25,0
 237C 9983              std y+1,R25
 237E 8883              std y+0,R24
 2380 9E01              movw R18,R28
 2382 2E5F              subi R18,254  ; offset = 2
 2384 3F4F              sbci R19,255
 2386 0DEC              ldi R16,205
 2388 10E0              ldi R17,0
 238A 0E940000          xcall _EEPROMWriteBytes_extIO
 238E           ;       }
 238E           L524:
 238E           ; 	return (_POS_CARD_SCANF + (signed char)i);
 238E 0A81              ldd R16,y+2
 2390 1127              clr R17
 2392 07FD              sbrc R16,7
 2394 1095              com R17
 2396 0F5C              subi R16,207  ; offset = 305
 2398 1E4F              sbci R17,254
 239A           L523:
 239A                   .dbline 0 ; func end
 239A 2396              adiw R28,3
 239C 0895              ret
                        .area bss(ram, con, rel)
 001E           L528:
 001E                   .blkb 1
 001F           L529:
 001F                   .blkb 1
                        .area text(rom, con, rel)
                ;            Pos -> R10,R11
                        .even
 239E           _CardScanfPosCheck::
 239E 0E940000          xcall push_xgset300C
 23A2 2397              sbiw R28,3
 23A4           ; }
 23A4           ; 
 23A4           ; unsigned char CardScanfPosCheck(void)
 23A4           ; {
 23A4           ;       static unsigned char workStep;
 23A4           ;       static unsigned char waitMotCardTrolley;
 23A4           ;       unsigned int Pos;
 23A4           ;       if(WaitDelayTime(MOT_STORE_CARD_MOVE))          return 0;
 23A4 08E0              ldi R16,8
 23A6 0E940000          xcall _WaitDelayTime
 23AA 0023              tst R16
 23AC 11F0              breq L530
 23AE           X325:
 23AE 0027              clr R16
 23B0 5DC0              xjmp L527
 23B2           L530:
 23B2           ; 	if(waitMotCardTrolley){	if(GetMotState(MOT_STORE_CARD_MOVE) != STA_SLAVE_FREE)	return 0;waitMotCardTrolley = 0;}
 23B2 20901F00          lds R2,L529
 23B6 2220              tst R2
 23B8 51F0              breq L532
 23BA           X326:
 23BA 08E0              ldi R16,8
 23BC 0E940000          xcall _GetMotState
 23C0 0130              cpi R16,1
 23C2 11F0              breq L534
 23C4           X327:
 23C4 0027              clr R16
 23C6 52C0              xjmp L527
 23C8           L534:
 23C8 2224              clr R2
 23CA 20921F00          sts L529,R2
 23CE           L532:
 23CE           ; 	switch(workStep)
 23CE 40911E00          lds R20,L528
 23D2 5527              clr R21
 23D4 4030              cpi R20,0
 23D6 4507              cpc R20,R21
 23D8 69F0              breq L539
 23DA           X328:
 23DA 4130              cpi R20,1
 23DC E0E0              ldi R30,0
 23DE 5E07              cpc R21,R30
 23E0 09F1              breq L540
 23E2           X329:
 23E2 4230              cpi R20,2
 23E4 E0E0              ldi R30,0
 23E6 5E07              cpc R21,R30
 23E8 91F1              breq L541
 23EA           X330:
 23EA 4330              cpi R20,3
 23EC E0E0              ldi R30,0
 23EE 5E07              cpc R21,R30
 23F0 B9F1              breq L542
 23F2           X331:
 23F2 3BC0              xjmp L537
 23F4           L539:
 23F4           ; 	{
 23F4           ; 		case 0:
 23F4           ; 				SetMotRunPam(MOT_STORE_CARD_MOVE,200,20,CURRENT_STORE_MOVE);
 23F4 8AE0              ldi R24,10
 23F6 8A83              std y+2,R24
 23F8 84E1              ldi R24,20
 23FA 8883              std y+0,R24
 23FC 28EC              ldi R18,200
 23FE 08E0              ldi R16,8
 2400 0E940000          xcall _SetMotRunPam
 2404           ;                               MotRunTo(MOT_STORE_CARD_MOVE,0);        
 2404 2227              clr R18
 2406 3327              clr R19
 2408 08E0              ldi R16,8
 240A 0E940000          xcall _MotRunTo
 240E           ;                               waitMotCardTrolley = 1;
 240E 81E0              ldi R24,1
 2410 80931F00          sts L529,R24
 2414           ;                               workStep = 1;
 2414 80931E00          sts L528,R24
 2418           ;                               SetDelayTime(MOT_STORE_CARD_MOVE,5);
 2418 25E0              ldi R18,5
 241A 30E0              ldi R19,0
 241C 08E0              ldi R16,8
 241E 0E940000          xcall _SetDelayTime
 2422           ;                               break;
 2422 23C0              xjmp L537
 2424           L540:
 2424           ; 		case 1:
 2424           ; 				Pos = GetCardScanfPos();
 2424 94DF              xcall _GetCardScanfPos
 2426 5801              movw R10,R16
 2428           ;                               //SetMotRunPam(MOT_STORE_CARD_MOVE,50,5,CURRENT_STORE_MOVE);
 2428           ;                               SetMotRunPam(MOT_STORE_CARD_MOVE,250,20,CURRENT_STORE_MOVE);
 2428 8AE0              ldi R24,10
 242A 8A83              std y+2,R24
 242C 84E1              ldi R24,20
 242E 8883              std y+0,R24
 2430 2AEF              ldi R18,250
 2432 08E0              ldi R16,8
 2434 0E940000          xcall _SetMotRunPam
 2438           ;                               MotRunTo(MOT_STORE_CARD_MOVE,Pos);      
 2438 9501              movw R18,R10
 243A 08E0              ldi R16,8
 243C 0E940000          xcall _MotRunTo
 2440           ;                               waitMotCardTrolley = 1;
 2440 81E0              ldi R24,1
 2442 80931F00          sts L529,R24
 2446           ;                               workStep = 2;
 2446 82E0              ldi R24,2
 2448 80931E00          sts L528,R24
 244C           ;                               break;
 244C 0EC0              xjmp L537
 244E           L541:
 244E           ; 		case 2:
 244E           ; 				SetDelayTime(MOT_STORE_CARD_MOVE,5);
 244E 25E0              ldi R18,5
 2450 30E0              ldi R19,0
 2452 08E0              ldi R16,8
 2454 0E940000          xcall _SetDelayTime
 2458           ;                               workStep = 3;
 2458 83E0              ldi R24,3
 245A 80931E00          sts L528,R24
 245E           ;                               break;
 245E 05C0              xjmp L537
 2460           L542:
 2460           ; 		case 3:
 2460           ; 				workStep = 0;
 2460 2224              clr R2
 2462 20921E00          sts L528,R2
 2466           ;                               return 1;
 2466 01E0              ldi R16,1
 2468 01C0              xjmp L527
 246A           L537:
 246A           ; 				break;
 246A           ; 		default:break;
 246A           ; 	}
 246A           ; 	return 0;
 246A 0027              clr R16
 246C           L527:
 246C                   .dbline 0 ; func end
 246C 2396              adiw R28,3
 246E 0C940000          xjmp pop_xgset300C
                        .area bss(ram, con, rel)
 0020           _CardstoreProcess_mainStep:
 0020                   .blkb 1
 0021           _CardstoreProcess_workStep:
 0021                   .blkb 1
 0022           _CardStoretate::
 0022                   .blkb 6
 0028           _CardSurplusState::
 0028                   .blkb 6
 002E           _CardStoreOpenState::
 002E                   .blkb 1
 002F           _LastCardGetState::
 002F                   .blkb 1
 0030           _preGetCardNum:
 0030                   .blkb 5
 0035           _CardStoreTestFlag::
 0035                   .blkb 1
                        .area data(ram, con, rel)
 0009           L377:
 0009                   .blkb 6
                        .area idata
 0009 257320242000      .byte 37,'s,32,36,32,0
                        .area data(ram, con, rel)
 000F           L370:
 000F                   .blkb 25
                        .area idata
 000F 2A3339323020436172644C6F61644261  .byte 42,51,57,50,48,32,'C,'a,'r,'d,'L,'o,'a,'d,'B,'a
 001F 636B446F6E650D0A00        .byte 'c,'k,'D,'o,'n,'e,13,10,0
                        .area data(ram, con, rel)
 0028           L360:
 0028                   .blkb 21
                        .area idata
 0028 2A3339313920436172644C6F61644261  .byte 42,51,57,49,57,32,'C,'a,'r,'d,'L,'o,'a,'d,'B,'a
 0038 636B0D0A00        .byte 'c,'k,13,10,0
                        .area data(ram, con, rel)
 003D           L358:
 003D                   .blkb 23
                        .area idata
 003D 2A3339313820436172644C6F61644265  .byte 42,51,57,49,56,32,'C,'a,'r,'d,'L,'o,'a,'d,'B,'e
 004D 6761696E0D0A00    .byte 'g,'a,'i,'n,13,10,0
                        .area data(ram, con, rel)
 0054           L333:
 0054                   .blkb 10
                        .area idata
 0054 257320242025640D0A00      .byte 37,'s,32,36,32,37,'d,13,10,0
                        .area data(ram, con, rel)
 005E           L301:
 005E                   .blkb 15
                        .area idata
 005E 2573202425346420242534640D0A00    .byte 37,'s,32,36,37,52,'d,32,36,37,52,'d,13,10,0
                        .area data(ram, con, rel)
 006D           L298:
 006D                   .blkb 13
                        .area idata
 006D 202425346420242534640D0A00        .byte 32,36,37,52,'d,32,36,37,52,'d,13,10,0
                        .area data(ram, con, rel)
 007A           L296:
 007A                   .blkb 9
                        .area idata
 007A 213335343020242000        .byte 33,51,53,52,48,32,36,32,0
                        .area data(ram, con, rel)
 0083           L245:
 0083                   .blkb 8
                        .area idata
 0083 21333532370D0A00  .byte 33,51,53,50,55,13,10,0
                        .area data(ram, con, rel)
 008B           L210:
 008B                   .blkb 8
                        .area idata
 008B 21333532360D0A00  .byte 33,51,53,50,54,13,10,0
                        .area data(ram, con, rel)
 0093           L191:
 0093                   .blkb 8
                        .area idata
 0093 21333532350D0A00  .byte 33,51,53,50,53,13,10,0
                        .area data(ram, con, rel)
 009B           L179:
 009B                   .blkb 13
                        .area idata
 009B 213335323220242534640D0A00        .byte 33,51,53,50,50,32,36,37,52,'d,13,10,0
                        .area data(ram, con, rel)
 00A8           L176:
 00A8                   .blkb 13
                        .area idata
 00A8 213335323020242534640D0A00        .byte 33,51,53,50,48,32,36,37,52,'d,13,10,0
                        .area data(ram, con, rel)
 00B5           L134:
 00B5                   .blkb 9
                        .area idata
 00B5 213335323920242000        .byte 33,51,53,50,57,32,36,32,0
                        .area data(ram, con, rel)
 00BE           L125:
 00BE                   .blkb 3
                        .area idata
 00BE 0D0A00            .byte 13,10,0
                        .area data(ram, con, rel)
 00C1           L123:
 00C1                   .blkb 9
                        .area idata
 00C1 213335323820242000        .byte 33,51,53,50,56,32,36,32,0
                        .area data(ram, con, rel)
 00CA           L98:
 00CA                   .blkb 37
                        .area idata
 00CA 2A33323033204361726453746F726553  .byte 42,51,50,48,51,32,'C,'a,'r,'d,'S,'t,'o,'r,'e,'S
 00DA 74657053746174652024253264202425  .byte 't,'e,'p,'S,'t,'a,'t,'e,32,36,37,50,'d,32,36,37
 00EA 32640D0A00        .byte 50,'d,13,10,0
                        .area data(ram, con, rel)
 00EF           L35:
 00EF                   .blkb 5
                        .area idata
 00EF 25730D0A00        .byte 37,'s,13,10,0
                        .area data(ram, con, rel)
 00F4           L32:
 00F4                   .blkb 10
                        .area idata
 00F4 257320242534640D0A00      .byte 37,'s,32,36,37,52,'d,13,10,0
                        .area data(ram, con, rel)
 00FE           L7:
 00FE                   .blkb 9
                        .area idata
 00FE 2573202420300D0A00        .byte 37,'s,32,36,32,48,13,10,0
                        .area data(ram, con, rel)
 0107           L6:
 0107                   .blkb 9
                        .area idata
 0107 2573202420310D0A00        .byte 37,'s,32,36,32,49,13,10,0
                        .area data(ram, con, rel)
                ; }
                ; 
                ; /*********************************************************************************************/
                ; 
                ; 
                ; 
                ; /****************************************File end***********************************************/
                ; 
